var a=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},J=class{static fromArray(t,r){let n=r||new Re;for(let i=t.length-1;i>=0;--i)n=new Se(t[i],n);return n}[Symbol.iterator](){return new Kt(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof Re}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function b(e,t){return new Se(e,t)}function c(e,t){return J.fromArray(e,t)}var Kt=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Re)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Re=class extends J{},Se=class extends J{constructor(t,r){super(),this.head=t,this.tail=r}},je=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Fe(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Fe(this.rawBuffer,this.bitOffset,i),o=Fe(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Fe(this.rawBuffer,this.bitOffset,r),s=Fe(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Yr("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Yr("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Fe(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Xr={};function Yr(e,t){Xr[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Xr[e]=!0)}var Ae=class e extends a{static isResult(t){return t instanceof e}},p=class extends Ae{constructor(t){super(),this[0]=t}isOk(){return!0}},$=class extends Ae{constructor(t){super(),this[0]=t}isOk(){return!1}};function x(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Zr(n)||!Zr(i)||!zi(n,i)||yi(n,i)||bi(n,i)||vi(n,i)||ki(n,i)||Oi(n,i)||Li(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=gi(n);for(let f of l(n))r.push(u(n,f),u(i,f))}return!0}function gi(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function yi(e,t){return e instanceof Date&&(e>t||e<t)}function bi(e,t){return!(e instanceof je)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function vi(e,t){return Array.isArray(e)&&e.length!==t.length}function ki(e,t){return e instanceof Map&&e.size!==t.size}function Oi(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Li(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Zr(e){return typeof e=="object"&&e!==null}function zi(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function We(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let l in s)o[l]=s[l];return o}var z=class extends a{constructor(t){super(),this[0]=t}},B=class extends a{};function Qr(e,t){if(e instanceof z){let r=e[0];return new p(r)}else return new $(t)}function Ee(e,t,r){return en(t,r,e)}function Si(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=b(i,n)}}}function ji(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Si(n,c([]));{let i=r.head[0];e=r.tail,t=b(i,n)}}}function Yt(e){return ji(ft(e),c([]))}function Ti(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=b(i,n)}}}function pe(e){return Ti(e,c([]))}function Ni(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return pe(s);{let o=n.head,l=n.tail,u=(()=>{let f=i(o);if(f.isOk()){let d=f[0];return b(d,s)}else return s})();e=l,t=i,r=u}}}function at(e,t){return Ni(e,t,c([]))}function Ii(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return pe(s);{let o=n.head;e=n.tail,t=i,r=b(i(o),s)}}}function le(e,t){return Ii(e,t,c([]))}function ue(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function qi(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=o(s,u,l),r=o,n=l+1}}}function Zt(e,t,r){return qi(e,t,r,0)}function Ne(e,t){if(e.isOk()){let r=e[0];return new p(t(r))}else{let r=e[0];return new $(r)}}function er(e,t){if(e.isOk()){let r=e[0];return new p(r)}else{let r=e[0];return new $(t(r))}}function Je(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new $(r)}}var de=class extends a{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Vi(e,t){return er(e,r=>le(r,t))}function sn(e){return rr(e)}function on(e){return nr(e)}function ln(e){return cn(e)}function un(e){return t=>{if(e.hasLength(0))return new $(c([new de("another type",_e(t),c([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new p(s)}else return un(n)(t)}}}function Ki(e,t){let r=t,n=un(c([rr,o=>Ne(nr(o),q)])),i=(()=>{let o=n(r);if(o.isOk())return o[0];{let l=c(["<",_e(r),">"]),u=qe(l);return u}})(),s=e;return new de(s.expected,s.found,b(i,e.path))}function $e(e,t){return r=>{let n=new de("field","nothing",c([]));return Je(fn(r,e),i=>{let o=Qr(i,c([n])),l=Je(o,t);return Vi(l,u=>Ki(u,e))})}}var an=new WeakMap,ir=new DataView(new ArrayBuffer(8)),sr=0;function or(e){let t=an.get(e);if(t!==void 0)return t;let r=sr++;return sr===2147483647&&(sr=0),an.set(e,r),r}function lr(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function cr(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function dn(e){ir.setFloat64(0,e);let t=ir.getInt32(0),r=ir.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function Xi(e){return cr(e.toString())}function Yi(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return or(e);if(e instanceof Date)return dn(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+W(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+W(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+lr(W(n),W(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+lr(W(o),cr(s))|0}}return r}function W(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return dn(e);case"string":return cr(e);case"bigint":return Xi(e);case"object":return Yi(e);case"symbol":return or(e);case"function":return or(e);default:return 0}}var Q=5,fr=Math.pow(2,Q),Zi=fr-1,Qi=fr/2,es=fr/4,T=0,Z=1,F=2,me=3,ar={type:F,bitmap:0,array:[]};function Ve(e,t){return e>>>t&Zi}function $t(e,t){return 1<<Ve(e,t)}function ts(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function pr(e,t){return ts(e&t-1)}function G(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function rs(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function ur(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function $n(e,t,r,n,i,s){let o=W(t);if(o===n)return{type:me,hash:o,array:[{type:T,k:t,v:r},{type:T,k:i,v:s}]};let l={val:!1};return Ke(dr(ar,e,o,t,r,l),e,n,i,s,l)}function Ke(e,t,r,n,i,s){switch(e.type){case Z:return ns(e,t,r,n,i,s);case F:return dr(e,t,r,n,i,s);case me:return is(e,t,r,n,i,s)}}function ns(e,t,r,n,i,s){let o=Ve(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:Z,size:e.size+1,array:G(e.array,o,{type:T,k:n,v:i})};if(l.type===T)return x(n,l.k)?i===l.v?e:{type:Z,size:e.size,array:G(e.array,o,{type:T,k:n,v:i})}:(s.val=!0,{type:Z,size:e.size,array:G(e.array,o,$n(t+Q,l.k,l.v,r,n,i))});let u=Ke(l,t+Q,r,n,i,s);return u===l?e:{type:Z,size:e.size,array:G(e.array,o,u)}}function dr(e,t,r,n,i,s){let o=$t(r,t),l=pr(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[l];if(u.type!==T){let d=Ke(u,t+Q,r,n,i,s);return d===u?e:{type:F,bitmap:e.bitmap,array:G(e.array,l,d)}}let f=u.k;return x(n,f)?i===u.v?e:{type:F,bitmap:e.bitmap,array:G(e.array,l,{type:T,k:n,v:i})}:(s.val=!0,{type:F,bitmap:e.bitmap,array:G(e.array,l,$n(t+Q,f,u.v,r,n,i))})}else{let u=e.array.length;if(u>=Qi){let f=new Array(32),d=Ve(r,t);f[d]=dr(ar,t+Q,r,n,i,s);let h=0,w=e.bitmap;for(let H=0;H<32;H++){if((w&1)!==0){let D=e.array[h++];f[H]=D}w=w>>>1}return{type:Z,size:u+1,array:f}}else{let f=rs(e.array,l,{type:T,k:n,v:i});return s.val=!0,{type:F,bitmap:e.bitmap|o,array:f}}}}function is(e,t,r,n,i,s){if(r===e.hash){let o=$r(e,n);if(o!==-1)return e.array[o].v===i?e:{type:me,hash:r,array:G(e.array,o,{type:T,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:me,hash:r,array:G(e.array,l,{type:T,k:n,v:i})}}return Ke({type:F,bitmap:$t(e.hash,t),array:[e]},t,r,n,i,s)}function $r(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(x(t,e.array[n].k))return n;return-1}function dt(e,t,r,n){switch(e.type){case Z:return ss(e,t,r,n);case F:return os(e,t,r,n);case me:return ls(e,n)}}function ss(e,t,r,n){let i=Ve(r,t),s=e.array[i];if(s!==void 0){if(s.type!==T)return dt(s,t+Q,r,n);if(x(n,s.k))return s}}function os(e,t,r,n){let i=$t(r,t);if((e.bitmap&i)===0)return;let s=pr(e.bitmap,i),o=e.array[s];if(o.type!==T)return dt(o,t+Q,r,n);if(x(n,o.k))return o}function ls(e,t){let r=$r(e,t);if(!(r<0))return e.array[r]}function hr(e,t,r,n){switch(e.type){case Z:return us(e,t,r,n);case F:return cs(e,t,r,n);case me:return fs(e,n)}}function us(e,t,r,n){let i=Ve(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===T){if(!x(s.k,n))return e}else if(o=hr(s,t+Q,r,n),o===s)return e;if(o===void 0){if(e.size<=es){let l=e.array,u=new Array(e.size-1),f=0,d=0,h=0;for(;f<i;){let w=l[f];w!==void 0&&(u[d]=w,h|=1<<f,++d),++f}for(++f;f<l.length;){let w=l[f];w!==void 0&&(u[d]=w,h|=1<<f,++d),++f}return{type:F,bitmap:h,array:u}}return{type:Z,size:e.size-1,array:G(e.array,i,o)}}return{type:Z,size:e.size,array:G(e.array,i,o)}}function cs(e,t,r,n){let i=$t(r,t);if((e.bitmap&i)===0)return e;let s=pr(e.bitmap,i),o=e.array[s];if(o.type!==T){let l=hr(o,t+Q,r,n);return l===o?e:l!==void 0?{type:F,bitmap:e.bitmap,array:G(e.array,s,l)}:e.bitmap===i?void 0:{type:F,bitmap:e.bitmap^i,array:ur(e.array,s)}}return x(n,o.k)?e.bitmap===i?void 0:{type:F,bitmap:e.bitmap^i,array:ur(e.array,s)}:e}function fs(e,t){let r=$r(e,t);if(r<0)return e;if(e.array.length!==1)return{type:me,hash:e.hash,array:ur(e.array,r)}}function hn(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===T){t(s.v,s.k);continue}hn(s,t)}}}var fe=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=dt(this.root,0,W(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?ar:this.root,s=Ke(i,0,W(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=hr(this.root,0,W(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:dt(this.root,0,W(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){hn(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+lr(W(r),W(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!x(t.get(n,!r),r))throw pn}),!0}catch(r){if(r===pn)return!1;throw r}}},pn=Symbol();var wn=void 0,_n={};function q(e){return e.toString()}var mn;function ps(e){if(globalThis.Intl&&Intl.Segmenter)return mn||=new Intl.Segmenter,mn.segment(e)[Symbol.iterator]()}function gn(e){let t,r=ps(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new p([t,e.slice(t.length)]):new $(wn)}function ht(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function qe(e){let t="";for(let r of e)t=t+r;return t}var yn=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),ds=new RegExp(`^[${yn}]*`),$s=new RegExp(`[${yn}]*$`);function bn(e){return e.replace(ds,"")}function vn(e){return e.replace($s,"")}function V(){return fe.new()}function ft(e){return J.fromArray(e.entries())}function Ge(e,t){let r=e.get(t,_n);return r===_n?new $(wn):new p(r)}function en(e,t,r){return r.set(e,t)}function _e(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Ae)return"Result";if(e instanceof J)return"List";if(e instanceof je)return"BitArray";if(e instanceof fe)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function _t(e,t){return hs(e,_e(t))}function hs(e,t){return new $(J.fromArray([new de(e,t,J.fromArray([]))]))}function rr(e){return typeof e=="string"?new p(e):_t("String",e)}function nr(e){return Number.isInteger(e)?new p(e):_t("Int",e)}function cn(e){return typeof e=="boolean"?new p(e):_t("Bool",e)}function fn(e,t){let r=()=>_t("Dict",e);if(e instanceof fe||e instanceof WeakMap||e instanceof Map){let n=Ge(e,t);return new p(n.isOk()?new z(n[0]):new B)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?xn(e,t,()=>new p(new B)):xn(e,t,r)}function xn(e,t,r){try{return t in e?new p(new z(e[t])):r()}catch{return r()}}function _r(e){let r=bn(e);return vn(r)}function mr(e,t){for(;;){let r=e,n=t;if(n>0){let s=gn(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function gr(e){return e}function Xe(e,t,r){return e?t:r()}var ee=e=>[e],mt=(e,t)=>[e,t],we=(e,t)=>[...e,t],Me=(e,t)=>[t,...e],ge=(e,t)=>[...e,...t],_=(e,t)=>t[e-1],te=(e,t,r)=>t.with(e-1,r),m=e=>e.length;var ye=(e,t)=>e.map(t),be=(e,t)=>e<<t,Ye=(e,t)=>e>>t;function Ss(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,f=i;if(l<=u)e=s,t=f(o,_(l,s)),r=l+1,n=u,i=f;else return o}}function zn(e,t,r){let n=m(e);return Ss(e,t,2,n,r)}function js(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(o>0)e=i,t=l(s,_(o,i)),r=o-1,n=l;else return s}}function xt(e,t,r){let n=m(e);return js(e,t,n,r)}var L=class extends a{constructor(t,r){super(),this.size=t,this.children=r}},k=class extends a{constructor(t,r){super(),this.sizes=t,this.children=r}},M=class extends a{constructor(t){super(),this.children=t}},v=class extends a{constructor(t){super(),this.merged=t}},N=class extends a{constructor(t,r){super(),this.left=t,this.right=r}};function vr(e){return new M(e)}function R(e){if(e instanceof L)return e.size;if(e instanceof M){let t=e.children;return m(t)}else{let t=e.sizes;return _(m(t),t)}}function En(e){let t=R(_(1,e));return zn(e,ee(t),(r,n)=>{let i=_(m(r),r)+R(n);return we(r,i)})}function ve(e,t){let r=En(t);return new k(r,t)}function Cn(e,t,r){for(;;){let n=e,i=t,s=r;if(_(i,n)>s)return i-1;e=n,t=i+1,r=s}}function gt(e,t){if(e instanceof L){let r=e.size,n=e.children;return new L(r,ye(n,i=>gt(i,t)))}else if(e instanceof k){let r=e.sizes,n=e.children;return new k(r,ye(n,i=>gt(i,t)))}else{let r=e.children;return new M(ye(r,t))}}function yt(e,t,r){if(e instanceof L){let n=e.children;return xt(n,t,(i,s)=>yt(s,i,r))}else if(e instanceof k){let n=e.children;return xt(n,t,(i,s)=>yt(s,i,r))}else{let n=e.children;return xt(n,t,r)}}function ae(e,t){let r=m(t),n=_(r,t),s=be(1,e)*(r-1)+R(n);return new L(s,t)}function kr(e,t){let r=m(t),n=be(1,e),i=En(t);if((r===1?0:_(r-1,i))===n*(r-1)){let l=_(r,i);return new L(l,t)}else return new k(i,t)}var K=5;function Tn(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof L){let o=n.children,l=Ye(s,i),u=s-be(l,i);e=_(l+1,o),t=i-K,r=u}else if(n instanceof k){let o=n.sizes,l=n.children,u=Ye(s,i),f=Cn(o,u+1,s),d=f===0?s:s-_(f,o);e=_(f+1,l),t=i-K,r=d}else{let o=n.children;return _(s+1,o)}}}function bt(e,t,r,n){if(t instanceof L){let i=t.size,s=t.children,o=Ye(r,e),l=r-be(o,e),u=(()=>{let f=_(o+1,s),d=(h=>bt(e-K,h,l,n))(f);return(h=>te(o+1,s,h))(d)})();return new L(i,u)}else if(t instanceof k){let i=t.sizes,s=t.children,o=Ye(r,e),l=Cn(i,o+1,r),u=l===0?r:r-_(l,i),f=(()=>{let d=_(l+1,s),h=(w=>bt(e-K,w,u,n))(d);return(w=>te(l+1,s,w))(h)})();return new k(i,f)}else{let i=t.children,s=te(r+1,i,n(_(r+1,i)));return new M(s)}}var Ue=32;function Sn(e,t,r,n,i){let s=m(r),o=_(s,r),l=Pe(e-K,o,n,i);if(l instanceof v){let u=l.merged,f=te(s,r,u);return new v(ae(e,f))}else if(l instanceof N&&s<32){let u=l.right,f=we(r,u);return R(o)===be(1,e)?new v(ae(e,f)):new v(ve(e,f))}else{let u=l.right;return new N(t,ae(e,ee(u)))}}function Pe(e,t,r,n){if(t instanceof L&&n instanceof M){let i=t.children;return Sn(e,t,i,r,n)}else if(t instanceof k&&n instanceof M){let i=t.sizes,s=t.children;return jn(e,t,s,i,r,n)}else if(t instanceof M&&n instanceof L){let i=n.children;return An(e,t,r,n,i)}else if(t instanceof M&&n instanceof k){let i=n.sizes,s=n.children;return Bn(e,t,r,n,s,i)}else if(t instanceof M&&n instanceof M){let i=t.children,s=n.children;return m(i)+m(s)<=Ue?new v(new M(ge(i,s))):new N(t,n)}else if(t instanceof L&&e>r){let i=t.children;return Sn(e,t,i,r,n)}else if(t instanceof k&&e>r){let i=t.sizes,s=t.children;return jn(e,t,s,i,r,n)}else if(n instanceof L&&r>e){let i=n.children;return An(e,t,r,n,i)}else if(n instanceof k&&r>e){let i=n.sizes,s=n.children;return Bn(e,t,r,n,s,i)}else if(t instanceof L&&n instanceof L){let i=t.children,s=n.children;if(m(i)+m(s)<=Ue){let l=ge(i,s),u=_(m(i),i);return R(u)===be(1,e)?new v(ae(e,l)):new v(ve(e,l))}else return new N(t,n)}else if(t instanceof L&&n instanceof k){let i=t.children,s=n.children;if(m(i)+m(s)<=Ue){let l=ge(i,s);return new v(ve(e,l))}else return new N(t,n)}else if(t instanceof k&&n instanceof L){let i=t.children,s=n.children;if(m(i)+m(s)<=Ue){let l=ge(i,s);return new v(ve(e,l))}else return new N(t,n)}else{let i=t.children,s=n.children;if(m(i)+m(s)<=Ue){let l=ge(i,s);return new v(ve(e,l))}else return new N(t,n)}}function jn(e,t,r,n,i,s){let o=m(r),l=_(o,r),u=Pe(e-K,l,i,s);if(u instanceof v){let f=u.merged,d=te(o,r,f),h=_(o,n)+R(f),w=te(o,n,h);return new v(new k(w,d))}else if(u instanceof N&&o<32){let f=u.right,d=we(r,f),h=we(n,_(o,n)+R(f));return new v(new k(h,d))}else{let f=u.right;return new N(t,ae(e,ee(f)))}}function An(e,t,r,n,i){let s=m(i),o=_(1,i),l=Pe(e,t,r-K,o);if(l instanceof v){let u=l.merged,f=te(1,i,u);return new v(ve(r,f))}else if(l instanceof N&&s<32){let u=l.left,f=Me(i,u);return new v(ve(r,f))}else{let u=l.left;return new N(ae(r,ee(u)),n)}}function Bn(e,t,r,n,i,s){let o=m(i),l=_(1,i),u=Pe(e,t,r-K,l);if(u instanceof v){let f=u.merged,d=te(1,i,f),h=R(f)-R(l),w=ye(s,H=>H+h);return new v(new k(w,d))}else if(u instanceof N&&o<32){let f=u.left,d=Me(i,f),h=R(f),w=(()=>{let D=ye(s,ct=>ct+h);return Me(D,h)})();return new v(new k(w,d))}else{let f=u.left;return new N(ae(r,ee(f)),n)}}var ie=class extends a{},re=class extends a{constructor(t,r){super(),this.shift=t,this.root=r}};function Es(e,t){let r=m(t);if(r===0)return new ie;if(r===1)return new re(e,_(1,t));{let n=e+K;return new re(n,kr(n,t))}}function In(){return new ie}function Cs(e){return new re(0,vr(ee(e)))}function Or(e,t){if(e instanceof re){let r=e.shift,n=e.root;return 0<=t&&t<R(n)?new p(Tn(n,r,t)):new $(void 0)}else return new $(void 0)}function Ze(e,t,r){if(e instanceof re){let n=e.shift,i=e.root;return 0<=t&&t<R(i)?new re(n,bt(n,i,t,r)):e}else return e}function Lr(e,t,r){return Ze(e,t,n=>r)}function Ts(e,t){if(e instanceof ie)return t;if(t instanceof ie)return e;{let r=e.shift,n=e.root,i=t.shift,s=t.root,o=r>i?r:i,l=Pe(r,n,i,s);if(l instanceof v){let u=l.merged;return new re(o,u)}else{let u=l.left,f=l.right;return Es(o,mt(u,f))}}}function qn(e,t){return Ts(e,Cs(t))}function zr(e,t){if(e instanceof ie)return new ie;{let r=e.shift,n=e.root;return new re(r,gt(n,t))}}function Mn(e,t,r){if(e instanceof ie)return t;{let n=e.root;return yt(n,t,r)}}var vt=class extends a{constructor(t){super(),this.all=t}};function Un(e){return new vt(c([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Pn(e){return Un((t,r,n,i)=>e(t))}function I(){return new vt(c([]))}var De=class extends a{constructor(t){super(),this.content=t}},O=class extends a{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},ke=class extends a{constructor(t){super(),this.subtree=t}},Oe=class extends a{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Qe=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function Fs(e){if(e instanceof Oe)return new $(void 0);{let t=e[0],r=e[1],n=mr(t,2);return new p([n,r])}}function Rs(e,t,r){return Zt(e,t,(n,i,s)=>{let o=r+"-"+q(s);return Dn(i,n,o)})}function Dn(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof De)return i;if(n instanceof ke){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,l=n.children,u=ue(o,i,(f,d)=>{let h=Fs(d);if(h.isOk()){let w=h[0][0],H=h[0][1];return Ee(f,s+"-"+w,H)}else return f});return Rs(l,u,s)}}}function Fn(e){return Dn(e,V(),"0")}function se(e,t){return new Oe(e,t,!1)}function Ot(e,t){return new Oe(e,t,!0)}function Wn(e,t){return new Qe("on"+e,t)}function Lt(e){return se("style",ue(e,"",(t,r)=>{let n=r[0],i=r[1];return t+n+":"+i+";"}))}function U(e){return se("class",e)}function Sr(e){return se("class",(()=>{let r=at(e,n=>n[1]?new p(n[0]):new $(void 0));return ht(r," ")})())}function jr(e){return se("id",e)}function Ar(e){return se("type",e)}function Br(e){return se("value",e)}function Er(e){return Ot("checked",e)}function Gn(e){return se("placeholder",e)}function Hn(e){return Ot("autofocus",e)}function Jn(e){return se("for",e)}function Vn(e){return se("href",e)}function j(e,t,r){return e==="area"?new O("","",e,t,c([]),!1,!0):e==="base"?new O("","",e,t,c([]),!1,!0):e==="br"?new O("","",e,t,c([]),!1,!0):e==="col"?new O("","",e,t,c([]),!1,!0):e==="embed"?new O("","",e,t,c([]),!1,!0):e==="hr"?new O("","",e,t,c([]),!1,!0):e==="img"?new O("","",e,t,c([]),!1,!0):e==="input"?new O("","",e,t,c([]),!1,!0):e==="link"?new O("","",e,t,c([]),!1,!0):e==="meta"?new O("","",e,t,c([]),!1,!0):e==="param"?new O("","",e,t,c([]),!1,!0):e==="source"?new O("","",e,t,c([]),!1,!0):e==="track"?new O("","",e,t,c([]),!1,!0):e==="wbr"?new O("","",e,t,c([]),!1,!0):new O("","",e,t,r,!1,!1)}function Kn(e,t){if(e instanceof O){let r=e.namespace,n=e.tag,i=e.attrs,s=e.children,o=e.self_closing,l=e.void;return new O(t,r,n,i,s,o,l)}else if(e instanceof ke){let r=e.subtree;return new ke(()=>Kn(r(),t))}else return e}function Xn(e,t){return e(le(t,r=>{let n=r[0],i=r[1];return Kn(i,n)}))}function Yn(e){return new De(e)}function Zn(e){return j("lustre-fragment",c([Lt(c([["display","contents"]]))]),e)}var Tr=class extends a{constructor(t){super(),this.dict=t}};function ei(){return new Tr(V())}var zt=class extends a{constructor(t){super(),this[0]=t}},St=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},jt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function ti(e){return x(e.created,V())&&x(e.removed,ei())&&x(e.updated,V())}var At=class extends a{constructor(t){super(),this[0]=t}},Bt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},et=class extends a{constructor(t){super(),this[0]=t}},ne=class extends a{constructor(t){super(),this[0]=t}},tt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},Et=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};var rt=class extends a{},Ct=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},Tt=class extends a{constructor(t){super(),this[0]=t}},Nt=class extends a{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Nr(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let u=document.createTextNode(o.content);l.replaceChild(u,s),n??=u}else{let u=document.createTextNode(o.content);l.appendChild(u),n??=u}else if(o.tag!==void 0){let u=Vs({prev:s,next:o,dispatch:r,stack:i});s?s!==u&&l.replaceChild(u,s):l.appendChild(u),n??=u}}return n}function Vs({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(nt.has(o))l=nt.get(o);else{let g=new Map;nt.set(o,g),l=g}let u=s?new Set(l.keys()):null,f=s?new Set(Array.from(e.attributes,g=>g.name)):null,d=null,h=null,w=null;if(s&&t.tag==="textarea"){let g=t.children[Symbol.iterator]().next().value?.content;g!==void 0&&(o.value=g)}let H=[];for(let g of t.attrs){let y=g[0],S=g[1];if(g.as_property)o[y]!==S&&(o[y]=S),s&&f.delete(y);else if(y.startsWith("on")){let Y=y.slice(2),Vt=r(S,Y==="input");l.has(Y)||o.addEventListener(Y,it),l.set(Y,Vt),s&&u.delete(Y)}else if(y.startsWith("data-lustre-on-")){let Y=y.slice(15),Vt=r(Ks);l.has(Y)||o.addEventListener(Y,it),l.set(Y,Vt),o.setAttribute(y,S),s&&(u.delete(Y),f.delete(y))}else y.startsWith("delegate:data-")||y.startsWith("delegate:aria-")?(o.setAttribute(y,S),H.push([y.slice(10),S])):y==="class"?d=d===null?S:d+" "+S:y==="style"?h=h===null?S:h+S:y==="dangerous-unescaped-html"?w=S:(o.getAttribute(y)!==S&&o.setAttribute(y,S),(y==="value"||y==="selected")&&(o[y]=S),s&&f.delete(y))}if(d!==null&&(o.setAttribute("class",d),s&&f.delete("class")),h!==null&&(o.setAttribute("style",h),s&&f.delete("style")),s){for(let g of f)o.removeAttribute(g);for(let g of u)l.delete(g),o.removeEventListener(g,it)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let g of o.assignedElements())for(let[y,S]of H)g.hasAttribute(y)||g.setAttribute(y,S)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(w!==null)return o.innerHTML=w,o;let D=o.firstChild,ct=null,Vr=null,Kr=null,Jt=It(t).next().value;if(s&&Jt!==void 0&&Jt.key!==void 0&&Jt.key!==""){ct=new Set,Vr=ri(e),Kr=ri(t);for(let g of It(t))D=Xs(D,g,o,n,Kr,Vr,ct)}else for(let g of It(t))n.unshift({prev:D,next:g,parent:o}),D=D?.nextSibling;for(;D;){let g=D.nextSibling;o.removeChild(D),D=g}return o}var nt=new WeakMap;function it(e){let t=e.currentTarget;if(!nt.has(t)){t.removeEventListener(e.type,it);return}let r=nt.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,it);return}r.get(e.type)(e)}function Ks(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let u=0,f=s,d=e;u<l.length;u++)u===l.length-1?f[l[u]]=d[l[u]]:(f[l[u]]??={},d=d[l[u]],f=f[l[u]]);return s},{data:n})}}function ri(e){let t=new Map;if(e)for(let r of It(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function Xs(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;r.removeChild(e),e=u}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let u=document.createTextNode("");return r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*It(e){for(let t of e.children)yield*ni(t)}function*ni(e){e.subtree!==void 0?yield*ni(e.subtree()):yield e}var Ir=class e{static start({init:t,update:r,view:n},i,s){if(!Mr())return new $(new st);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new $(new qt(i));let l=new e(o,t(s),r,n);return new p(u=>l.send(u))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof et){if(t[0]instanceof Nt){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof p&&this.send(new ne(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Nr(i,r,n)}}else if(t instanceof ne){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof tt){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof rt)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof p&&this.send(new ne(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Nr(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=l=>this.send(new ne(l)),i=(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},ii=Ir.start;var qr=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new p(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#u=s,this.#n=new Map,this.#o=Fn(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof At){for(let r of t[0]){let n=this.#u.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof $||this.#r.push(i)}this.#l()}else if(t instanceof Bt)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof et))if(t instanceof ne)this.#r.push(t[0]),this.#l();else if(t instanceof tt){let r=new St(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof Et){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof $)return;this.#r.push(n[0]),this.#l()}else if(t instanceof Ct){let r=Yt(this.#u),n=new jt(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof Tt&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#u;#l(t=[]){this.#c(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!ti(n)){let i=new zt(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#c(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new ne(l)),emit:(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#c(t)}},Ys=qr.start,Mr=()=>globalThis.window&&window.document;var Ur=class extends a{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var qt=class extends a{constructor(t){super(),this.selector=t}},st=class extends a{};function si(e,t,r){return new Ur(e,t,r,new B)}function oi(e,t,r){return Xe(!Mr(),new $(new st),()=>ii(e,t,r))}function P(e){return Yn(e)}function li(e,t){return j("footer",e,t)}function ui(e,t){return j("header",e,t)}function ci(e,t){return j("h1",e,t)}function fi(e,t){return j("section",e,t)}function ai(e,t){return j("div",e,t)}function Pr(e,t){return j("li",e,t)}function Dr(e,t){return j("ul",e,t)}function pi(e,t){return j("a",e,t)}function di(e,t){return j("span",e,t)}function $i(e,t){return j("strong",e,t)}function Fr(e,t){return j("button",e,t)}function ot(e){return j("input",e,c([]))}function Rr(e,t){return j("label",e,t)}function Le(e,t){return Wn(e,t)}function Mt(e){return Le("click",t=>new p(e))}function hi(e){return Le("blur",t=>new p(e))}function eo(e){let t=e;return $e("target",$e("value",sn))(t)}function Wr(e){return Le("input",t=>{let r=eo(t);return Ne(r,e)})}function to(e){let t=e;return $e("target",$e("checked",ln))(t)}function Gr(e){return Le("change",t=>{let r=to(t);return Ne(r,e)})}var _i=e=>requestAnimationFrame(()=>document.getElementById(e)?.focus());var A=class extends a{constructor(t,r,n,i,s,o){super(),this.entries=t,this.active=r,this.completed=n,this.input=i,this.uid=s,this.visibility=o}},X=class extends a{constructor(t,r,n,i,s){super(),this.description=t,this.completed=r,this.editing=n,this.deleted=i,this.id=s}},lt=class extends a{},ut=class extends a{},Ut=class extends a{},Pt=class extends a{constructor(t){super(),this.value=t}},Dt=class extends a{},Ft=class extends a{},Rt=class extends a{constructor(t){super(),this.completed=t}},Wt=class extends a{constructor(t){super(),this.visibility=t}},Gt=class extends a{constructor(t){super(),this.index=t}},Ht=class extends a{constructor(t,r){super(),this.index=t,this.completed=r}},ze=class extends a{constructor(t,r){super(),this.index=t,this.editing=r}},Jr=class extends a{constructor(t,r){super(),this.index=t,this.description=r}};function no(e,t){return new X(e,!1,!1,!1,t)}function io(e){return[new A(In(),0,0,"",0,new lt),I()]}function so(e){let t=e===1?"item":"items";return di(c([U("todo-count")]),c([$i(c([]),c([P(q(e))])),P(" "),P(t),P(" left")]))}function Hr(e,t,r){return Pr(c([Mt(new Wt(t))]),c([pi(c([Vn(e),Sr(c([["selected",x(t,r)]]))]),c([t instanceof lt?P("All"):t instanceof ut?P("Active"):P("Completed")]))]))}function oo(e){return Dr(c([U("filters")]),c([Hr("#/",new lt,e),Hr("#/active",new ut,e),Hr("#/completed",new Ut,e)]))}function mi(e){return Ot("hidden",gr(e))}function lo(e){return Fr(c([U("clear-completed"),mi(e===0),Mt(new Ft)]),c([P("Clear completed ("),P(q(e)),P(")")]))}function xi(e){return Le("keydown",t=>Je($e("keyCode",on)(t),r=>r===13?new p(e):new $(c([]))))}function uo(e){return ui(c([U("header")]),c([ci(c([]),c([P("todos")])),ot(c([U("new-todo"),Gn("What needs to be done?"),Hn(!0),Br(e),Wr(t=>new Pt(t)),xi(new Dt)]))]))}function co(e){return Le("dblclick",t=>new p(e))}function fo(e){let t=e.description,r=e.completed,n=e.editing,i=e.id;return Pr(c([Sr(c([["completed",r],["editing",n]]))]),c([ai(c([U("view")]),c([ot(c([U("toggle"),Ar("checkbox"),Er(r),Gr(s=>new Ht(i,s))])),Rr(c([co(new ze(i,!0))]),c([P(t)])),Fr(c([U("destroy"),Mt(new Gt(i))]),c([]))])),ot(c([jr("todo-"+q(i)),U("edit"),Br(t),Wr(s=>new Jr(i,s)),hi(new ze(i,!1)),xi(new ze(i,!1))]))]))}function ao(e){let t=fo(e);return[q(e.id),t]}function po(e){let t=e.active+e.completed,r=t<=0?"hidden":"visible";return fi(c([U("main"),Lt(c([["visibility",r]]))]),c([ot(c([jr("toggle-all"),U("toggle-all"),Ar("checkbox"),Er(e.active<=0),Gr(n=>new Rt(n))])),Rr(c([Jn("toggle-all")]),c([P("Mark all as complete")])),Xn(n=>Dr(c([U("todo-list")]),n),Mn(e.entries,c([]),(n,i)=>(()=>{let o=e.visibility;return o instanceof Ut?i.completed&&!i.deleted:o instanceof ut?!i.completed&&!i.deleted:!i.deleted})()?b(ao(i),n):n))]))}function $o(e){let t=e.active+e.completed;return Zn(c([uo(e.input),po(e),li(c([U("footer"),mi(t<=0)]),c([so(e.active),oo(e.visibility),lo(e.completed)]))]))}function ho(e){return Pn(t=>_i(e))}function _o(e,t){if(t instanceof Pt){let r=t.value;return[(()=>{let n=e;return new A(n.entries,n.active,n.completed,r,n.uid,n.visibility)})(),I()]}else if(t instanceof Dt){let r=_r(e.input);return Xe(r==="",[e,I()],()=>{let n=qn(e.entries,no(r,e.uid)),i=e.uid+1,s=e.active+1;return[(()=>{let l=e;return new A(n,s,l.completed,"",i,l.visibility)})(),I()]})}else if(t instanceof Wt){let r=t.visibility;return[(()=>{let n=e;return new A(n.entries,n.active,n.completed,n.input,n.uid,r)})(),I()]}else if(t instanceof Rt){let r=t.completed,n=zr(e.entries,o=>{let l=o;return new X(l.description,r,l.editing,l.deleted,l.id)}),i=e.completed+e.active;return[(()=>{if(r){let o=e;return new A(n,0,i,o.input,o.uid,o.visibility)}else{let o=e;return new A(n,i,0,o.input,o.uid,o.visibility)}})(),I()]}else if(t instanceof Ft){let r=zr(e.entries,n=>{if(n instanceof X&&n.completed){let i=n;return new X(i.description,i.completed,i.editing,!0,i.id)}else return n});return[(()=>{let n=e;return new A(r,n.active,0,n.input,n.uid,n.visibility)})(),I()]}else if(t instanceof Gt){let r=t.index,n=Or(e.entries,r);if(n.isOk()&&!n[0].deleted){let i=n[0],s=Lr(e.entries,r,(()=>{let l=i;return new X(l.description,l.completed,l.editing,!0,l.id)})());return[(()=>{if(i.completed){let u=e;return new A(s,u.active,e.completed-1,u.input,u.uid,u.visibility)}else{let u=e;return new A(s,e.active-1,u.completed,u.input,u.uid,u.visibility)}})(),I()]}else return[e,I()]}else if(t instanceof Ht){let r=t.index,n=t.completed,i=Or(e.entries,r);if(i.isOk()&&i[0].completed!==n){let s=i[0],o=Lr(e.entries,r,(()=>{let u=s;return new X(u.description,n,u.editing,u.deleted,u.id)})());return[(()=>{if(n){let u=e.active-1,f=e.completed+1,d=e;return new A(o,u,f,d.input,d.uid,d.visibility)}else{let u=e.active+1,f=e.completed-1,d=e;return new A(o,u,f,d.input,d.uid,d.visibility)}})(),I()]}else return[e,I()]}else if(t instanceof ze&&t.editing){let r=t.index,n=Ze(e.entries,r,i=>{let s=i;return new X(s.description,s.completed,!0,s.deleted,s.id)});return[(()=>{let i=e;return new A(n,i.active,i.completed,i.input,i.uid,i.visibility)})(),ho("todo-"+q(r))]}else if(t instanceof ze&&!t.editing){let r=t.index,n=Ze(e.entries,r,i=>{let s=_r(i.description),o=i;return new X(s,o.completed,!1,o.deleted,o.id)});return[(()=>{let i=e;return new A(n,i.active,i.completed,i.input,i.uid,i.visibility)})(),I()]}else{let r=t.index,n=t.description,i=Ze(e.entries,r,s=>{let o=s;return new X(n,o.completed,o.editing,o.deleted,o.id)});return[(()=>{let s=e;return new A(i,s.active,s.completed,s.input,s.uid,s.visibility)})(),I()]}}function wi(){let e=si(io,_o,$o),t=oi(e,".todoapp",void 0);if(!t.isOk())throw We("let_assert","todomvc",18,"main","Pattern match failed, no pattern matched the value.",{value:t})}wi();
