function Nr(e,t,r){return e?t:r()}var _=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},Ze=class{static fromArray(t,r){let n=r||Al;for(let i=t.length-1;i>=0;--i)n=new Oe(t[i],n);return n}[Symbol.iterator](){return new Nn(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof L}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function d(e,t){return new Oe(e,t)}function a(e,t){return Ze.fromArray(e,t)}var Nn=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof L)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},L=class extends Ze{},Al=new L,Oe=class extends Ze{constructor(t,r){super(),this.head=t,this.tail=r}},Mt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return ur(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=ur(this.rawBuffer,this.bitOffset,i),o=ur(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=ur(this.rawBuffer,this.bitOffset,r),s=ur(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(os("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(os("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function ur(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var ss={};function os(e,t){ss[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),ss[e]=!0)}var qt=class e extends _{static isResult(t){return t instanceof e}},E=class extends qt{constructor(t){super(),this.value=t}get 0(){return this.value}isOk(){return!0}},O=class extends qt{constructor(t){super(),this.detail=t}get 0(){return this.detail}isOk(){return!1}};function G(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!ls(n)||!ls(i)||!Pl(n,i)||Tl(n,i)||Nl(n,i)||Il(n,i)||Ml(n,i)||ql(n,i)||Dl(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=Cl(n);for(let c of l(n))r.push(u(n,c),u(i,c))}return!0}function Cl(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Tl(e,t){return e instanceof Date&&(e>t||e<t)}function Nl(e,t){return!(e instanceof Mt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Il(e,t){return Array.isArray(e)&&e.length!==t.length}function Ml(e,t){return e instanceof Map&&e.size!==t.size}function ql(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Dl(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ls(e){return typeof e=="object"&&e!==null}function Pl(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function cr(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let l in s)o[l]=s[l];return o}var ie=class extends _{},ce=class extends _{},ye=class extends _{};var Q=class extends _{constructor(t){super(),this[0]=t}},$e=class extends _{};function Pt(e,t,r){return us(t,r,e)}var Z=class extends _{},Ue=class extends _{};function ar(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=d(i,n)}}}function V(e){return ar(e,a([]))}function Hl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return V(s);{let o=n.head;e=n.tail,t=i,r=d(i(o),s)}}}function gt(e,t){return Hl(e,t,a([]))}function Vl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=d(i,n)}}}function et(e,t){return Vl(V(e),t)}function ae(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Jl(e,t,r,n,i,s){for(;;){let o=e,l=t,u=r,c=n,p=i,f=s,m=d(p,u);if(o.hasLength(0))return c instanceof Z?d(V(m),f):d(m,f);{let h=o.head,w=o.tail,g=l(p,h);if(g instanceof ye&&c instanceof Ue)e=w,t=l,r=m,n=c,i=h,s=f;else if(g instanceof ie&&c instanceof Z)e=w,t=l,r=m,n=c,i=h,s=f;else if(g instanceof ce&&c instanceof Z)e=w,t=l,r=m,n=c,i=h,s=f;else if(g instanceof ye&&c instanceof Z){let $=c instanceof Z?d(V(m),f):d(m,f);if(w.hasLength(0))return d(a([h]),$);{let v=w.head,b=w.tail,y=(()=>{let A=l(h,v);return A instanceof ie?new Z:A instanceof ce?new Z:new Ue})();e=b,t=l,r=a([h]),n=y,i=v,s=$}}else if(g instanceof ie&&c instanceof Ue){let $=c instanceof Z?d(V(m),f):d(m,f);if(w.hasLength(0))return d(a([h]),$);{let v=w.head,b=w.tail,y=(()=>{let A=l(h,v);return A instanceof ie?new Z:A instanceof ce?new Z:new Ue})();e=b,t=l,r=a([h]),n=y,i=v,s=$}}else{let $=c instanceof Z?d(V(m),f):d(m,f);if(w.hasLength(0))return d(a([h]),$);{let v=w.head,b=w.tail,y=(()=>{let A=l(h,v);return A instanceof ie?new Z:A instanceof ce?new Z:new Ue})();e=b,t=l,r=a([h]),n=y,i=v,s=$}}}}}function Yl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return ar(s,l);if(s.hasLength(0))return ar(i,l);{let u=i.head,c=i.tail,p=s.head,f=s.tail,m=o(u,p);m instanceof ie?(e=c,t=s,r=o,n=d(u,l)):m instanceof ye?(e=i,t=f,r=o,n=d(p,l)):(e=i,t=f,r=o,n=d(p,l))}}}function Xl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return V(s);if(n.hasLength(1)){let o=n.head;return V(d(V(o),s))}else{let o=n.head,l=n.tail.head,u=n.tail.tail,c=Yl(o,l,i,a([]));e=u,t=i,r=d(c,s)}}}function Kl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return ar(s,l);if(s.hasLength(0))return ar(i,l);{let u=i.head,c=i.tail,p=s.head,f=s.tail,m=o(u,p);m instanceof ie?(e=i,t=f,r=o,n=d(p,l)):m instanceof ye?(e=c,t=s,r=o,n=d(u,l)):(e=c,t=s,r=o,n=d(u,l))}}}function Ql(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return V(s);if(n.hasLength(1)){let o=n.head;return V(d(V(o),s))}else{let o=n.head,l=n.tail.head,u=n.tail.tail,c=Kl(o,l,i,a([]));e=u,t=i,r=d(c,s)}}}function Zl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return a([]);if(n.hasLength(1)&&i instanceof Z)return n.head;if(n.hasLength(1)&&i instanceof Ue){let o=n.head;return V(o)}else i instanceof Z?(e=Xl(n,s,a([])),t=new Ue,r=s):(e=Ql(n,s,a([])),t=new Z,r=s)}}function cs(e,t){if(e.hasLength(0))return a([]);if(e.hasLength(1)){let r=e.head;return a([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s=(()=>{let l=t(r,n);return l instanceof ie?new Z:l instanceof ce?new Z:new Ue})(),o=Jl(i,t,a([r]),s,n,a([]));return Zl(o,new Z,t)}}function ds(e){return!!e.isOk()}var ms=new WeakMap,Mn=new DataView(new ArrayBuffer(8)),qn=0;function Dn(e){let t=ms.get(e);if(t!==void 0)return t;let r=qn++;return qn===2147483647&&(qn=0),ms.set(e,r),r}function Pn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Fn(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function $s(e){Mn.setFloat64(0,e);let t=Mn.getInt32(0),r=Mn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function pu(e){return Fn(e.toString())}function du(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Dn(e);if(e instanceof Date)return $s(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Be(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Be(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Pn(Be(n),Be(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Pn(Be(o),Fn(s))|0}}return r}function Be(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return $s(e);case"string":return Fn(e);case"bigint":return pu(e);case"object":return du(e);case"symbol":return Dn(e);case"function":return Dn(e);default:return 0}}var Re=5,Rn=Math.pow(2,Re),_u=Rn-1,mu=Rn/2,hu=Rn/4,xe=0,Fe=1,Ee=2,vt=3,Gn={type:Ee,bitmap:0,array:[]};function dr(e,t){return e>>>t&_u}function qr(e,t){return 1<<dr(e,t)}function $u(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Wn(e,t){return $u(e&t-1)}function Ae(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function xu(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Un(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function xs(e,t,r,n,i,s){let o=Be(t);if(o===n)return{type:vt,hash:o,array:[{type:xe,k:t,v:r},{type:xe,k:i,v:s}]};let l={val:!1};return _r(Hn(Gn,e,o,t,r,l),e,n,i,s,l)}function _r(e,t,r,n,i,s){switch(e.type){case Fe:return wu(e,t,r,n,i,s);case Ee:return Hn(e,t,r,n,i,s);case vt:return bu(e,t,r,n,i,s)}}function wu(e,t,r,n,i,s){let o=dr(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:Fe,size:e.size+1,array:Ae(e.array,o,{type:xe,k:n,v:i})};if(l.type===xe)return G(n,l.k)?i===l.v?e:{type:Fe,size:e.size,array:Ae(e.array,o,{type:xe,k:n,v:i})}:(s.val=!0,{type:Fe,size:e.size,array:Ae(e.array,o,xs(t+Re,l.k,l.v,r,n,i))});let u=_r(l,t+Re,r,n,i,s);return u===l?e:{type:Fe,size:e.size,array:Ae(e.array,o,u)}}function Hn(e,t,r,n,i,s){let o=qr(r,t),l=Wn(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[l];if(u.type!==xe){let p=_r(u,t+Re,r,n,i,s);return p===u?e:{type:Ee,bitmap:e.bitmap,array:Ae(e.array,l,p)}}let c=u.k;return G(n,c)?i===u.v?e:{type:Ee,bitmap:e.bitmap,array:Ae(e.array,l,{type:xe,k:n,v:i})}:(s.val=!0,{type:Ee,bitmap:e.bitmap,array:Ae(e.array,l,xs(t+Re,c,u.v,r,n,i))})}else{let u=e.array.length;if(u>=mu){let c=new Array(32),p=dr(r,t);c[p]=Hn(Gn,t+Re,r,n,i,s);let f=0,m=e.bitmap;for(let h=0;h<32;h++){if((m&1)!==0){let w=e.array[f++];c[h]=w}m=m>>>1}return{type:Fe,size:u+1,array:c}}else{let c=xu(e.array,l,{type:xe,k:n,v:i});return s.val=!0,{type:Ee,bitmap:e.bitmap|o,array:c}}}}function bu(e,t,r,n,i,s){if(r===e.hash){let o=Vn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:vt,hash:r,array:Ae(e.array,o,{type:xe,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:vt,hash:r,array:Ae(e.array,l,{type:xe,k:n,v:i})}}return _r({type:Ee,bitmap:qr(e.hash,t),array:[e]},t,r,n,i,s)}function Vn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(G(t,e.array[n].k))return n;return-1}function Mr(e,t,r,n){switch(e.type){case Fe:return gu(e,t,r,n);case Ee:return yu(e,t,r,n);case vt:return vu(e,n)}}function gu(e,t,r,n){let i=dr(r,t),s=e.array[i];if(s!==void 0){if(s.type!==xe)return Mr(s,t+Re,r,n);if(G(n,s.k))return s}}function yu(e,t,r,n){let i=qr(r,t);if((e.bitmap&i)===0)return;let s=Wn(e.bitmap,i),o=e.array[s];if(o.type!==xe)return Mr(o,t+Re,r,n);if(G(n,o.k))return o}function vu(e,t){let r=Vn(e,t);if(!(r<0))return e.array[r]}function Jn(e,t,r,n){switch(e.type){case Fe:return ku(e,t,r,n);case Ee:return ju(e,t,r,n);case vt:return Ou(e,n)}}function ku(e,t,r,n){let i=dr(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===xe){if(!G(s.k,n))return e}else if(o=Jn(s,t+Re,r,n),o===s)return e;if(o===void 0){if(e.size<=hu){let l=e.array,u=new Array(e.size-1),c=0,p=0,f=0;for(;c<i;){let m=l[c];m!==void 0&&(u[p]=m,f|=1<<c,++p),++c}for(++c;c<l.length;){let m=l[c];m!==void 0&&(u[p]=m,f|=1<<c,++p),++c}return{type:Ee,bitmap:f,array:u}}return{type:Fe,size:e.size-1,array:Ae(e.array,i,o)}}return{type:Fe,size:e.size,array:Ae(e.array,i,o)}}function ju(e,t,r,n){let i=qr(r,t);if((e.bitmap&i)===0)return e;let s=Wn(e.bitmap,i),o=e.array[s];if(o.type!==xe){let l=Jn(o,t+Re,r,n);return l===o?e:l!==void 0?{type:Ee,bitmap:e.bitmap,array:Ae(e.array,s,l)}:e.bitmap===i?void 0:{type:Ee,bitmap:e.bitmap^i,array:Un(e.array,s)}}return G(n,o.k)?e.bitmap===i?void 0:{type:Ee,bitmap:e.bitmap^i,array:Un(e.array,s)}:e}function Ou(e,t){let r=Vn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:vt,hash:e.hash,array:Un(e.array,r)}}function ws(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===xe){t(s.v,s.k);continue}ws(s,t)}}}var Ge=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Mr(this.root,0,Be(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Gn:this.root,s=_r(i,0,Be(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Jn(this.root,0,Be(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Mr(this.root,0,Be(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){ws(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Pn(Be(r),Be(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!G(t.get(n,!r),r))throw hs}),!0}catch(r){if(r===hs)return!1;throw r}}},hs=Symbol();var Eu=void 0,bs={};function ze(e){return e.toString()}function Ft(e){let t="";for(let r of e)t=t+r;return t}function Yn(e,t){return e.startsWith(t)}var gs=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Lu=new RegExp(`^[${gs}]*`),Su=new RegExp(`[${gs}]*$`);function ys(e){return e.replace(Lu,"")}function vs(e){return e.replace(Su,"")}function Ut(){return Ge.new()}function fr(e,t){let r=e.get(t,bs);return r===bs?new O(Eu):new E(r)}function us(e,t,r){return r.set(e,t)}function yt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof qt)return"Result";if(e instanceof Ze)return"List";if(e instanceof Mt)return"BitArray";if(e instanceof Ge)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function zs(e){let r=Ft(e);return r}function Dr(e){let r=ys(e);return vs(r)}function Es(e,t){if(e instanceof Ge||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new E(new $e):new E(new Q(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof Ze){let n=0;for(let i of e){if(n===t)return new E(new Q(i));n++}return new O("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new E(new Q(e[t])):new E(new $e):new O(r?"Indexable":"Dict")}function Ls(e){return Number.isInteger(e)?new E(e):new O(0)}function Ss(e){return typeof e=="string"?new E(e):new O(0)}var tt=class extends _{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},Me=class extends _{constructor(t){super(),this.function=t}};function ft(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new E(n):new O(i)}function qe(e){return new Me(t=>[e,a([])])}function kt(e,t){return new Me(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Iu(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,l=s.tail,u=o.function(n),c=u;if(u[1].hasLength(0))return c;e=n,t=i,r=l}}}function Mu(e,t){return new Me(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:Iu(r,i,t)})}function As(e,t){return a([new tt(e,yt(t),a([]))])}function Cs(e,t,r){let n=r(e);return n.isOk()?[n[0],a([])]:[n[0],a([new tt(t,yt(e),a([]))])]}function qu(e){return G(!0,e)?[!0,a([])]:G(!1,e)?[!1,a([])]:[!1,As("Bool",e)]}function Du(e){return Cs(e,"Int",Ls)}function mr(e,t){return new Me(r=>[e,As(t,r)])}var Ur=new Me(qu),Rt=new Me(Du);function Pu(e){return Cs(e,"String",Ss)}var at=new Me(Pu);function Pr(e,t){let r=Mu(at,a([kt(Rt,ze)])),n=gt(t,s=>{let o=s,l=ft(o,r);return l.isOk()?l[0]:"<"+yt(o)+">"}),i=gt(e[1],s=>{let o=s;return new tt(o.expected,o.found,et(n,s.path))});return[e[0],i]}function Ts(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(s.hasLength(0)){let p=l(u);return Pr(p,V(o))}else{let p=s.head,f=s.tail,m=Es(u,p);if(m.isOk()&&m[0]instanceof Q){let h=m[0][0];e=f,t=d(p,o),r=l,n=h,i=c}else{if(m.isOk()&&m[0]instanceof $e)return c(u,d(p,o));{let h=m[0],$=[l(u)[0],a([new tt(h,yt(u),a([]))])];return Pr($,V(o))}}}}}function Gt(e,t,r){return new Me(n=>{let i=Ts(e,a([]),t.function,n,(p,f)=>{let w=[t.function(p)[0],a([new tt("Field","Nothing",a([]))])];return Pr(w,V(f))}),s=i[0],o=i[1],l=r(s).function(n),u=l[0],c=l[1];return[u,et(o,c)]})}function Xn(e,t){return new Me(r=>Ts(e,a([]),t.function,r,(n,i)=>{let l=[t.function(n)[0],a([new tt("Field","Nothing",a([]))])];return Pr(l,V(i))}))}function Wt(e,t,r){return Gt(a([e]),t,r)}var We=e=>[e],Fr=(e,t)=>[e,t],jt=(e,t)=>[...e,t],Ht=(e,t)=>[t,...e],Ot=(e,t)=>[...e,...t],P=(e,t)=>t[e-1],He=(e,t,r)=>t.with(e-1,r),F=e=>e.length;var zt=(e,t)=>e.map(t),Et=(e,t)=>e<<t,hr=(e,t)=>e>>t;function Fu(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(l<=u)e=s,t=c(o,P(l,s)),r=l+1,n=u,i=c;else return o}}function Ms(e,t,r){let n=F(e);return Fu(e,t,2,n,r)}function Ru(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(o>0)e=i,t=l(s,P(o,i)),r=o-1,n=l;else return s}}function Rr(e,t,r){let n=F(e);return Ru(e,t,n,r)}var re=class extends _{constructor(t,r){super(),this.size=t,this.children=r}},ee=class extends _{constructor(t,r){super(),this.sizes=t,this.children=r}},ve=class extends _{constructor(t){super(),this.children=t}},Y=class extends _{constructor(t){super(),this.merged=t}},we=class extends _{constructor(t,r){super(),this.left=t,this.right=r}};function Kn(e){return new ve(e)}function Le(e){if(e instanceof re)return e.size;if(e instanceof ve){let t=e.children;return F(t)}else{let t=e.sizes;return P(F(t),t)}}function Fs(e){let t=Le(P(1,e));return Ms(e,We(t),(r,n)=>{let i=P(F(r),r)+Le(n);return jt(r,i)})}function Lt(e,t){let r=Fs(t);return new ee(r,t)}function Rs(e,t,r){for(;;){let n=e,i=t,s=r;if(P(i,n)>s)return i-1;e=n,t=i+1,r=s}}function Wr(e,t){if(e instanceof re){let r=e.size,n=e.children;return new re(r,zt(n,i=>Wr(i,t)))}else if(e instanceof ee){let r=e.sizes,n=e.children;return new ee(r,zt(n,i=>Wr(i,t)))}else{let r=e.children;return new ve(zt(r,t))}}function Hr(e,t,r){if(e instanceof re){let n=e.children;return Rr(n,t,(i,s)=>Hr(s,i,r))}else if(e instanceof ee){let n=e.children;return Rr(n,t,(i,s)=>Hr(s,i,r))}else{let n=e.children;return Rr(n,t,r)}}function dt(e,t){let r=F(t),n=P(r,t),s=Et(1,e)*(r-1)+Le(n);return new re(s,t)}function Qn(e,t){let r=F(t),n=Et(1,e),i=Fs(t);if((r===1?0:P(r-1,i))===n*(r-1)){let l=P(r,i);return new re(l,t)}else return new ee(i,t)}var De=5;function Gs(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof re){let o=n.children,l=hr(s,i),u=s-Et(l,i);e=P(l+1,o),t=i-De,r=u}else if(n instanceof ee){let o=n.sizes,l=n.children,u=hr(s,i),c=Rs(o,u+1,s),p=c===0?s:s-P(c,o);e=P(c+1,l),t=i-De,r=p}else{let o=n.children;return P(s+1,o)}}}function Vr(e,t,r,n){if(t instanceof re){let i=t.size,s=t.children,o=hr(r,e),l=r-Et(o,e),u=(()=>{let c=P(o+1,s),p=(f=>Vr(e-De,f,l,n))(c);return(f=>He(o+1,s,f))(p)})();return new re(i,u)}else if(t instanceof ee){let i=t.sizes,s=t.children,o=hr(r,e),l=Rs(i,o+1,r),u=l===0?r:r-P(l,i),c=(()=>{let p=P(l+1,s),f=(m=>Vr(e-De,m,u,n))(p);return(m=>He(l+1,s,m))(f)})();return new ee(i,c)}else{let i=t.children,s=He(r+1,i,n(P(r+1,i)));return new ve(s)}}var Vt=32;function qs(e,t,r,n,i){let s=F(r),o=P(s,r),l=Jt(e-De,o,n,i);if(l instanceof Y){let u=l.merged,c=He(s,r,u);return new Y(dt(e,c))}else if(l instanceof we&&s<32){let u=l.right,c=jt(r,u);return Le(o)===Et(1,e)?new Y(dt(e,c)):new Y(Lt(e,c))}else{let u=l.right;return new we(t,dt(e,We(u)))}}function Jt(e,t,r,n){if(t instanceof re&&n instanceof ve){let i=t.children;return qs(e,t,i,r,n)}else if(t instanceof ee&&n instanceof ve){let i=t.sizes,s=t.children;return Ds(e,t,s,i,r,n)}else if(t instanceof ve&&n instanceof re){let i=n.children;return Ps(e,t,r,n,i)}else if(t instanceof ve&&n instanceof ee){let i=n.sizes,s=n.children;return Us(e,t,r,n,s,i)}else if(t instanceof ve&&n instanceof ve){let i=t.children,s=n.children;return F(i)+F(s)<=Vt?new Y(new ve(Ot(i,s))):new we(t,n)}else if(t instanceof re&&e>r){let i=t.children;return qs(e,t,i,r,n)}else if(t instanceof ee&&e>r){let i=t.sizes,s=t.children;return Ds(e,t,s,i,r,n)}else if(n instanceof re&&r>e){let i=n.children;return Ps(e,t,r,n,i)}else if(n instanceof ee&&r>e){let i=n.sizes,s=n.children;return Us(e,t,r,n,s,i)}else if(t instanceof re&&n instanceof re){let i=t.children,s=n.children;if(F(i)+F(s)<=Vt){let l=Ot(i,s),u=P(F(i),i);return Le(u)===Et(1,e)?new Y(dt(e,l)):new Y(Lt(e,l))}else return new we(t,n)}else if(t instanceof re&&n instanceof ee){let i=t.children,s=n.children;if(F(i)+F(s)<=Vt){let l=Ot(i,s);return new Y(Lt(e,l))}else return new we(t,n)}else if(t instanceof ee&&n instanceof re){let i=t.children,s=n.children;if(F(i)+F(s)<=Vt){let l=Ot(i,s);return new Y(Lt(e,l))}else return new we(t,n)}else{let i=t.children,s=n.children;if(F(i)+F(s)<=Vt){let l=Ot(i,s);return new Y(Lt(e,l))}else return new we(t,n)}}function Ds(e,t,r,n,i,s){let o=F(r),l=P(o,r),u=Jt(e-De,l,i,s);if(u instanceof Y){let c=u.merged,p=He(o,r,c),f=P(o,n)+Le(c),m=He(o,n,f);return new Y(new ee(m,p))}else if(u instanceof we&&o<32){let c=u.right,p=jt(r,c),f=jt(n,P(o,n)+Le(c));return new Y(new ee(f,p))}else{let c=u.right;return new we(t,dt(e,We(c)))}}function Ps(e,t,r,n,i){let s=F(i),o=P(1,i),l=Jt(e,t,r-De,o);if(l instanceof Y){let u=l.merged,c=He(1,i,u);return new Y(Lt(r,c))}else if(l instanceof we&&s<32){let u=l.left,c=Ht(i,u);return new Y(Lt(r,c))}else{let u=l.left;return new we(dt(r,We(u)),n)}}function Us(e,t,r,n,i,s){let o=F(i),l=P(1,i),u=Jt(e,t,r-De,l);if(u instanceof Y){let c=u.merged,p=He(1,i,c),f=Le(c)-Le(l),m=zt(s,h=>h+f);return new Y(new ee(m,p))}else if(u instanceof we&&o<32){let c=u.left,p=Ht(i,c),f=Le(c),m=(()=>{let w=zt(s,g=>g+f);return Ht(w,f)})();return new Y(new ee(m,p))}else{let c=u.left;return new we(dt(r,We(c)),n)}}var rt=class extends _{},Ve=class extends _{constructor(t,r){super(),this.shift=t,this.root=r}};function Vu(e,t){let r=F(t);if(r===0)return new rt;if(r===1)return new Ve(e,P(1,t));{let n=e+De;return new Ve(n,Qn(n,t))}}function Hs(){return new rt}function Ju(e){return new Ve(0,Kn(We(e)))}function Zn(e,t){if(e instanceof Ve){let r=e.shift,n=e.root;return 0<=t&&t<Le(n)?new E(Gs(n,r,t)):new O(void 0)}else return new O(void 0)}function Yu(e,t,r){if(e instanceof Ve){let n=e.shift,i=e.root;return 0<=t&&t<Le(i)?new Ve(n,Vr(n,i,t,r)):e}else return e}function ei(e,t,r){return Yu(e,t,n=>r)}function Xu(e,t){if(e instanceof rt)return t;if(t instanceof rt)return e;{let r=e.shift,n=e.root,i=t.shift,s=t.root,o=r>i?r:i,l=Jt(r,n,i,s);if(l instanceof Y){let u=l.merged;return new Ve(o,u)}else{let u=l.left,c=l.right;return Vu(o,Fr(u,c))}}}function Vs(e,t){return Xu(e,Ju(t))}function ti(e,t){if(e instanceof rt)return new rt;{let r=e.shift,n=e.root;return new Ve(r,Wr(n,t))}}function Js(e,t,r){if(e instanceof rt)return t;{let n=e.root;return Hr(n,t,r)}}function pe(e){return e}function Ys(e){return Object.fromEntries(e)}function Xs(){return null}function Yt(e){return e}function xr(e){return e}function Ks(){return Xs()}function wr(e){return Ys(e)}var Jr=class extends _{constructor(t){super(),this.dict=t}};function Qs(){return new Jr(Ut())}function ni(e,t){let r=e.dict,n=fr(r,t);return ds(n)}var ec=void 0;function Zs(e,t){return new Jr(Pt(e.dict,t,ec))}var rc=Ge.new();function Yr(){return rc}var nc=Qs();function br(){return nc}var S=a([]),Xr=new $e;var sc=new ye,oc=new ie,lc=new ce;function Kr(e,t){return e.name===t.name?lc:e.name<t.name?oc:sc}var Ce=class extends _{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},St=class extends _{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},de=class extends _{constructor(t,r,n,i,s,o,l,u){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=l,this.limit=u}},Kt=class extends _{constructor(t){super(),this.kind=t}},gr=class extends _{constructor(t,r){super(),this.kind=t,this.delay=r}},Qr=class extends _{constructor(t,r){super(),this.kind=t,this.delay=r}};function lo(e,t){if(t instanceof Kt)return e instanceof Kt;if(t instanceof gr)if(e instanceof gr){let r=t.delay;return e.delay===r}else return!1;else if(e instanceof Qr){let r=t.delay;return e.delay===r}else return!1}function fc(e,t){for(;;){let r=e,n=t;if(r instanceof L)return n;{let i=r.tail;if(i instanceof L){let s=r.head;e=i,t=d(s,n)}else{let s=i.head;if(s instanceof Ce){let o=s.name;if(o==="class"){let l=r.head;if(l instanceof Ce)if(l.name==="class"){let c=i.tail,p=s.value,f=l.kind,h=l.value+" "+p,w=new Ce(f,"class",h);e=d(w,c),t=n}else{let c=l;e=i,t=d(c,n)}else{let u=l;e=i,t=d(u,n)}}else if(o==="style"){let l=r.head;if(l instanceof Ce)if(l.name==="style"){let c=i.tail,p=s.value,f=l.kind,h=l.value+";"+p,w=new Ce(f,"style",h);e=d(w,c),t=n}else{let c=l;e=i,t=d(c,n)}else{let u=l;e=i,t=d(u,n)}}else{let l=r.head;e=i,t=d(l,n)}}else{let o=r.head;e=i,t=d(o,n)}}}}}function uo(e){let r=cs(e,(n,i)=>Kr(i,n));return fc(r,S)}var oi=0;function co(e,t){return new Ce(oi,e,t)}var li=1;function fo(e,t){return new St(li,e,t)}var ui=2;function ao(e,t,r,n,i,s,o){return new de(ui,e,t,r,n,i,s,o)}var ci=1;var fi=2;function _e(e,t){return co(e,t)}function ac(e,t){return fo(e,t)}function pc(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function po(e,t){return ao(e,t,S,!1,!1,pc(e),new Kt(0))}function _o(e){return _e("style",ae(e,"",(t,r)=>{let n=r[0],i=r[1];return t+n+":"+i+";"}))}function me(e){return _e("class",e)}function mo(){return me("")}function Zr(e){return _e("class",ae(e,"",(t,r)=>{let n=r[0],i=r[1];return t===""&&i?n:i?t+" "+n:t}))}function ai(e){return _e("id",e)}function en(e){return _e("type",e)}function ho(e){return _e("value",e)}function $o(e){return _e("placeholder",e)}function xo(e){return _e("for",e)}function wo(e){return _e("href",e)}function bo(e,t){return t?_e(e,""):ac(e,xr(!1))}function tn(e){return bo("checked",e)}function rn(e){return bo("autofocus",e)}var vr=class extends _{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};function dc(e){return t=>e(t.dispatch)}var di=new vr(a([]),a([]),a([]));function oe(){return di}function go(e){let t=di;return new vr(a([dc(e)]),t.before_paint,t.after_paint)}function yo(e,t){let r=i=>i.emit(e,t),n=di;return new vr(a([r]),n.before_paint,n.after_paint)}function be(){return null}function Zt(e,t){let r=e?.get(t);return r!=null?new E(r):new O(void 0)}function _t(e,t,r){return e??=new Map,e.set(t,r),e}function _i(e,t){return e?.delete(t),e}var nn=class extends _{},sn=class extends _{constructor(t,r){super(),this.key=t,this.parent=r}},mi=class extends _{constructor(t,r){super(),this.index=t,this.parent=r}};function _c(e,t){for(;;){let r=e,n=t;if(n instanceof L)return!1;{let i=n.head,s=n.tail;if(Yn(r,i))return!0;e=r,t=s}}}function mt(e,t,r){return r===""?new mi(t,e):new sn(r,e)}var hi=new nn,$i=`
`,xi="	";function vo(e,t){for(;;){let r=e,n=t;if(r instanceof nn){if(n instanceof L)return"";{let i=n.tail;return zs(i)}}else if(r instanceof sn){let i=r.key;e=r.parent,t=d(xi,d(i,n))}else{let i=r.index;e=r.parent,t=d($i,d(ze(i),n))}}}function mc(e){return vo(e,a([]))}function ko(e,t){return t instanceof L?!1:_c(mc(e),t)}var wi="\f";function bi(e,t){return vo(e,a([wi,t]))}var he=class extends _{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},Te=class extends _{constructor(t,r,n,i,s,o,l,u,c,p){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=l,this.keyed_children=u,this.self_closing=c,this.void=p}},Ne=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},er=class extends _{constructor(t,r,n,i,s,o,l){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=l}};function xc(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function te(e){return e instanceof he?1+e.children_count:1}var gi=0;function yi(e,t,r,n,i){return new he(gi,e,t,r,n,i)}var vi=1;function jr(e,t,r,n,i,s,o,l,u){return new Te(vi,e,t,r,n,uo(i),s,o,l,u||xc(n,r))}var ki=2;function ji(e,t,r){return new Ne(ki,e,t,r)}var Oo=3;function zo(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(o instanceof L)return[V(u),c];{let p=o.head;if(p instanceof he){let f=p;if(f.key===""){let m=o.tail,h=s+"::"+ze(l),w=zo(h,f.children,0,S,be()),g=w[0],$=w[1],v,b=f;v=new he(b.kind,b.key,b.mapper,g,$,b.children_count);let A=d(v,u),x=l+1;e=s,t=m,r=x,n=A,i=c}else{let m=p;if(m.key!==""){let h=o.tail,w=s+"::"+m.key,g=tr(w,m),$=d(g,u),v=_t(c,w,g),b=l+1;e=s,t=h,r=b,n=$,i=v}else{let h=p,w=o.tail,g=d(h,u),$=l+1;e=s,t=w,r=$,n=g,i=c}}}else{let f=p;if(f.key!==""){let m=o.tail,h=s+"::"+f.key,w=tr(h,f),g=d(w,u),$=_t(c,h,w),v=l+1;e=s,t=m,r=v,n=g,i=$}else{let m=p,h=o.tail,w=d(m,u),g=l+1;e=s,t=h,r=g,n=w,i=c}}}}}function tr(e,t){if(t instanceof he){let r=t.children,n=zo(e,r,0,S,be()),i=n[0],s=n[1],o=t;return new he(o.kind,e,o.mapper,i,s,o.children_count)}else if(t instanceof Te){let r=t;return new Te(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof Ne){let r=t;return new Ne(r.kind,e,r.mapper,r.content)}else{let r=t;return new er(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}}var nr=class extends _{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},Oi=class extends _{constructor(t,r){super(),this.kind=t,this.content=r}},zi=class extends _{constructor(t,r){super(),this.kind=t,this.inner_html=r}},Ei=class extends _{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},Li=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},Si=class extends _{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},Bi=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},Ai=class extends _{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},Ci=class extends _{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function Ti(e,t,r,n){return new nr(e,t,r,n)}var Ni=0;function Eo(e){return new Oi(Ni,e)}var Ii=1;function Lo(e){return new zi(Ii,e)}var Mi=2;function Or(e,t){return new Ei(Mi,e,t)}var on=3;function So(e,t,r){return new Li(on,e,t,r)}var qi=4;function Bo(e,t){return new Si(qi,e,t)}var ln=5;function Bt(e,t,r){return new Bi(ln,e,t,r)}var un=6;function Di(e,t){return new Ai(un,e,t)}var cn=7;function Ao(e,t){return new Ci(cn,e,t)}var an=class extends _{constructor(t,r){super(),this.patch=t,this.events=r}},Pi=class extends _{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function bc(e,t,r,n){return r==="input"?t===""?fn(e,n):!1:r==="select"?t===""?fn(e,n):!1:r==="textarea"&&t===""?fn(e,n):!1}function To(e,t,r,n,i,s,o,l){for(;;){let u=e,c=t,p=r,f=n,m=i,h=s,w=o,g=l;if(h instanceof L){if(m instanceof L)return new Pi(w,g,f);{let $=m.head;if($ instanceof de){let v=$,b=m.tail,y=$.name,A=d(v,g),x=zr(f,c,y);e=u,t=c,r=p,n=x,i=b,s=h,o=w,l=A}else{let v=$,b=m.tail,y=d(v,g);e=u,t=c,r=p,n=f,i=b,s=h,o=w,l=y}}}else if(m instanceof L){let $=h.head;if($ instanceof de){let v=$,b=h.tail,y=$.name,A=$.handler,x=d(v,w),j=Er(f,p,c,y,A);e=u,t=c,r=p,n=j,i=m,s=b,o=x,l=g}else{let v=$,b=h.tail,y=d(v,w);e=u,t=c,r=p,n=f,i=m,s=b,o=y,l=g}}else{let $=h.head,v=h.tail,b=m.head,y=m.tail,A=Kr(b,$);if(A instanceof ie)if(b instanceof de){let x=b.name,j=d(b,g),k=zr(f,c,x);e=u,t=c,r=p,n=k,i=y,s=h,o=w,l=j}else{let x=d(b,g);e=u,t=c,r=p,n=f,i=y,s=h,o=w,l=x}else if(A instanceof ce)if($ instanceof Ce)if(b instanceof Ce){let x,j=$.name;j==="value"||j==="checked"||j==="selected"?x=u||b.value!==$.value:x=b.value!==$.value;let k=x,B;k?B=d($,w):B=w;let I=B;e=u,t=c,r=p,n=f,i=y,s=v,o=I,l=g}else if(b instanceof de){let x=b.name,j=d($,w),k=d(b,g),B=zr(f,c,x);e=u,t=c,r=p,n=B,i=y,s=v,o=j,l=k}else{let x=d($,w),j=d(b,g);e=u,t=c,r=p,n=f,i=y,s=v,o=x,l=j}else if($ instanceof St)if(b instanceof St){let x,j=$.name;j==="scrollLeft"||j==="scrollRight"?x=!0:j==="value"?x=u||!G(b.value,$.value):j==="checked"?x=u||!G(b.value,$.value):j==="selected"?x=u||!G(b.value,$.value):x=!G(b.value,$.value);let k=x,B;k?B=d($,w):B=w;let I=B;e=u,t=c,r=p,n=f,i=y,s=v,o=I,l=g}else if(b instanceof de){let x=b.name,j=d($,w),k=d(b,g),B=zr(f,c,x);e=u,t=c,r=p,n=B,i=y,s=v,o=j,l=k}else{let x=d($,w),j=d(b,g);e=u,t=c,r=p,n=f,i=y,s=v,o=x,l=j}else if(b instanceof de){let x=$.name,j=$.handler,k=b.prevent_default!==$.prevent_default||b.stop_propagation!==$.stop_propagation||b.immediate!==$.immediate||!lo(b.limit,$.limit),B;k?B=d($,w):B=w;let I=B,q=Er(f,p,c,x,j);e=u,t=c,r=p,n=q,i=y,s=v,o=I,l=g}else{let x=$.name,j=$.handler,k=d($,w),B=d(b,g),I=Er(f,p,c,x,j);e=u,t=c,r=p,n=I,i=y,s=v,o=k,l=B}else if($ instanceof de){let x=$.name,j=$.handler,k=d($,w),B=Er(f,p,c,x,j);e=u,t=c,r=p,n=B,i=m,s=v,o=k,l=g}else{let x=d($,w);e=u,t=c,r=p,n=f,i=m,s=v,o=x,l=g}}}}function Ui(e,t,r,n,i,s,o,l,u,c,p,f,m,h){for(;;){let w=e,g=t,$=r,v=n,b=i,y=s,A=o,x=l,j=u,k=c,B=p,I=f,q=m,ne=h;if($ instanceof L){if(w instanceof L)return new an(new nr(j,A,B,I),ne);{let ue=w.head,je=w.tail,K;ue.key===""||!ni(b,ue.key)?K=A+te(ue):K=A;let z=K,J=nt(ne,k,x,ue);e=je,t=g,r=$,n=v,i=b,s=y,o=z,l=x,u=j,c=k,p=B,f=I,m=q,h=J}}else if(w instanceof L){let ue=Io(ne,q,k,x,$),je=Di($,x-y),K=d(je,B);return new an(new nr(j,A,K,I),ue)}else{let ue=$.head,je=w.head;if(je.key!==ue.key){let K=$.tail,X=w.tail,z=Zt(g,ue.key),J=Zt(v,je.key),M=ni(b,je.key);if(z.isOk())if(J.isOk())if(M)e=X,t=g,r=$,n=v,i=b,s=y-te(je),o=A,l=x,u=j,c=k,p=B,f=I,m=q,h=ne;else{let U=z[0],C=te(ue),T=x-y,D=So(ue.key,T,C),N=d(D,B),W=Zs(b,ue.key),H=y+C;e=d(U,w),t=g,r=$,n=v,i=W,s=H,o=A,l=x,u=j,c=k,p=N,f=I,m=q,h=ne}else{let U=te(je),C=y-U,T=nt(ne,k,x,je),D=Bo(je.key,U),N=d(D,B);e=X,t=g,r=$,n=v,i=b,s=C,o=A,l=x,u=j,c=k,p=N,f=I,m=q,h=T}else if(J.isOk()){let U=x-y,C=te(ue),T=ht(ne,q,k,x,ue),D=Di(a([ue]),U),N=d(D,B);e=w,t=g,r=K,n=v,i=b,s=y+C,o=A,l=x+C,u=j,c=k,p=N,f=I,m=q,h=T}else{let U=te(je),C=te(ue),T=Bt(x-y,U,ue),D,W=nt(ne,k,x,je);D=ht(W,q,k,x,ue);let H=D;e=X,t=g,r=K,n=v,i=b,s=y-U+C,o=A,l=x+C,u=j,c=k,p=d(T,B),f=I,m=q,h=H}}else{let K=w.head;if(K instanceof he){let X=$.head;if(X instanceof he){let z=X,J=$.tail,M=K,U=w.tail,C=x+1,T=M.children_count,D=z.children_count,N=$t(q,z.mapper),W=Ui(M.children,M.keyed_children,z.children,z.keyed_children,br(),y,0,C,-1,k,S,I,N,ne),H;if(W.patch.removed>0){let Qe=C+D-y,st=Ao(Qe,W.patch.removed);H=et(W.patch.changes,d(st,B))}else H=et(W.patch.changes,B);let Ie=H;e=U,t=g,r=J,n=v,i=b,s=y+D-T,o=A,l=C+D,u=j,c=k,p=Ie,f=W.patch.children,m=q,h=W.events}else{let z=X,J=$.tail,M=K,U=w.tail,C=te(M),T=te(z),D=Bt(x-y,C,z),N,H=nt(ne,k,x,M);N=ht(H,q,k,x,z);let fe=N;e=U,t=g,r=J,n=v,i=b,s=y-C+T,o=A,l=x+T,u=j,c=k,p=d(D,B),f=I,m=q,h=fe}}else if(K instanceof Te){let X=$.head;if(X instanceof Te){let z=X,J=K;if(J.namespace===z.namespace&&J.tag===z.tag){let M=$.tail,U=w.tail,C=$t(q,z.mapper),T=mt(k,x,z.key),D=bc(ne,z.namespace,z.tag,T),N=To(D,T,C,ne,J.attributes,z.attributes,S,S),W=N.added,H=N.removed,fe=N.events,Ie;H instanceof L?W instanceof L?Ie=S:Ie=a([Or(W,H)]):Ie=a([Or(W,H)]);let Qe=Ie,st=Ui(J.children,J.keyed_children,z.children,z.keyed_children,br(),0,0,0,x,T,Qe,S,C,fe),ot,bt=st.patch;bt.children instanceof L?bt.changes instanceof L?bt.removed===0?ot=I:ot=d(st.patch,I):ot=d(st.patch,I):ot=d(st.patch,I);let Bl=ot;e=U,t=g,r=M,n=v,i=b,s=y,o=A,l=x+1,u=j,c=k,p=B,f=Bl,m=q,h=st.events}else{let M=X,U=$.tail,C=K,T=w.tail,D=te(C),N=te(M),W=Bt(x-y,D,M),H,Ie=nt(ne,k,x,C);H=ht(Ie,q,k,x,M);let Qe=H;e=T,t=g,r=U,n=v,i=b,s=y-D+N,o=A,l=x+N,u=j,c=k,p=d(W,B),f=I,m=q,h=Qe}}else{let z=X,J=$.tail,M=K,U=w.tail,C=te(M),T=te(z),D=Bt(x-y,C,z),N,H=nt(ne,k,x,M);N=ht(H,q,k,x,z);let fe=N;e=U,t=g,r=J,n=v,i=b,s=y-C+T,o=A,l=x+T,u=j,c=k,p=d(D,B),f=I,m=q,h=fe}}else if(K instanceof Ne){let X=$.head;if(X instanceof Ne){let z=X;if(K.content===z.content){let M=$.tail;e=w.tail,t=g,r=M,n=v,i=b,s=y,o=A,l=x+1,u=j,c=k,p=B,f=I,m=q,h=ne}else{let M=X,U=$.tail,C=w.tail,T=Ti(x,0,a([Eo(M.content)]),S);e=C,t=g,r=U,n=v,i=b,s=y,o=A,l=x+1,u=j,c=k,p=B,f=d(T,I),m=q,h=ne}}else{let z=X,J=$.tail,M=K,U=w.tail,C=te(M),T=te(z),D=Bt(x-y,C,z),N,H=nt(ne,k,x,M);N=ht(H,q,k,x,z);let fe=N;e=U,t=g,r=J,n=v,i=b,s=y-C+T,o=A,l=x+T,u=j,c=k,p=d(D,B),f=I,m=q,h=fe}}else{let X=$.head;if(X instanceof er){let z=X,J=$.tail,M=K,U=w.tail,C=$t(q,z.mapper),T=mt(k,x,z.key),D=To(!1,T,C,ne,M.attributes,z.attributes,S,S),N=D.added,W=D.removed,H=D.events,fe;W instanceof L?N instanceof L?fe=S:fe=a([Or(N,W)]):fe=a([Or(N,W)]);let Ie=fe,Qe;M.inner_html===z.inner_html?Qe=Ie:Qe=d(Lo(z.inner_html),Ie);let ot=Qe,bt;ot instanceof L?bt=I:bt=d(Ti(x,0,ot,a([])),I);let ns=bt;e=U,t=g,r=J,n=v,i=b,s=y,o=A,l=x+1,u=j,c=k,p=B,f=ns,m=q,h=H}else{let z=X,J=$.tail,M=K,U=w.tail,C=te(M),T=te(z),D=Bt(x-y,C,z),N,H=nt(ne,k,x,M);N=ht(H,q,k,x,z);let fe=N;e=U,t=g,r=J,n=v,i=b,s=y-C+T,o=A,l=x+T,u=j,c=k,p=d(D,B),f=I,m=q,h=fe}}}}}}function pn(e,t,r){return Ui(a([t]),be(),a([r]),be(),br(),0,0,0,0,hi,S,S,pe,No(e))}var gc=globalThis.HTMLElement&&!!HTMLElement.prototype.moveBefore,dn=class{#e=null;#t=()=>{};#n=!1;constructor(t,r,{useServerEvents:n=!1}={}){this.#e=t,this.#t=r,this.#n=n}mount(t){this.#e.appendChild(this.#u(t))}#r=[];push(t,r=0){r&&(Ye(t.changes,n=>{switch(n.kind){case un:case on:n.before=(n.before|0)+r;break;case cn:case ln:n.from=(n.from|0)+r;break}}),Ye(t.children,n=>{n.index=(n.index|0)+r})),this.#r.push({node:this.#e,patch:t}),this.#o()}#o(){for(;this.#r.length;){let{node:t,patch:r}=this.#r.pop();Ye(r.changes,n=>{switch(n.kind){case un:this.#c(t,n.children,n.before);break;case on:this.#p(t,n.key,n.before,n.count);break;case qi:this.#d(t,n.key,n.count);break;case cn:this.#i(t,n.from,n.count);break;case ln:this.#f(t,n.from,n.count,n.with);break;case Ni:this.#l(t,n.content);break;case Ii:this.#_(t,n.inner_html);break;case Mi:this.#a(t,n.added,n.removed);break}}),r.removed&&this.#i(t,t.childNodes.length-r.removed,r.removed),Ye(r.children,n=>{this.#r.push({node:t.childNodes[n.index|0],patch:n})})}}#c(t,r,n){let i=document.createDocumentFragment();Ye(r,s=>{let o=this.#u(s);Fi(t,o),i.appendChild(o)}),t.insertBefore(i,t.childNodes[n|0]??null)}#p(t,r,n,i){let s=t[R].keyedChildren.get(r).deref(),o=t.childNodes[n]??null;for(let l=0;l<i&&s!==null;++l){let u=s.nextSibling;gc?t.moveBefore(s,o):t.insertBefore(s,o),s=u}}#d(t,r,n){this.#s(t,t[R].keyedChildren.get(r).deref(),n)}#i(t,r,n){this.#s(t,t.childNodes[r|0],n)}#s(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[R].key;s&&t[R].keyedChildren.delete(s);for(let[o,{timeout:l}]of r[R].debouncers)window.clearTimeout(l);t.removeChild(r),r=i}}#f(t,r,n,i){this.#i(t,r,n);let s=this.#u(i);Fi(t,s),t.insertBefore(s,t.childNodes[r|0]??null)}#l(t,r){t.data=r??""}#_(t,r){t.innerHTML=r??""}#a(t,r,n){Ye(n,i=>{let s=i.name;t[R].handlers.has(s)?(t.removeEventListener(s,Mo),t[R].handlers.delete(s),t[R].throttles.has(s)&&t[R].throttles.delete(s),t[R].debouncers.has(s)&&(window.clearTimeout(t[R].debouncers.get(s).timeout),t[R].debouncers.delete(s))):(t.removeAttribute(s),qo[s]?.removed?.(t,s))}),Ye(r,i=>{this.#m(t,i)})}#u(t){switch(t.kind){case vi:{let r=t.namespace?document.createElementNS(t.namespace,t.tag):document.createElement(t.tag);return Xe(r,t.key),Ye(t.attributes,n=>{this.#m(r,n)}),this.#c(r,t.children,0),r}case ki:{let r=document.createTextNode(t.content??"");return Xe(r,t.key),r}case gi:{let r=document.createDocumentFragment(),n=document.createTextNode("");return Xe(n,t.key),r.appendChild(n),Ye(t.children,i=>{r.appendChild(this.#u(i))}),r}case Oo:{let r=t.namespace?document.createElementNS(t.namespace,t.tag):document.createElement(t.tag);return Xe(r,t.key),Ye(t.attributes,n=>{this.#m(r,n)}),this.#_(r,t.inner_html),r}}}#m(t,r){switch(r.kind){case oi:{let n=r.name,i=r.value??"";i!==t.getAttribute(n)&&t.setAttribute(n,i),qo[n]?.added?.(t,i);break}case li:t[r.name]=r.value;break;case ui:{t[R].handlers.has(r.name)||t.addEventListener(r.name,Mo,{passive:!r.prevent_default});let n=r.prevent_default,i=r.stop_propagation,s=r.immediate,o=Array.isArray(r.include)?r.include:[];if(r.limit?.kind===fi){let l=t[R].throttles.get(r.name)??{last:0,delay:r.limit.delay};t[R].throttles.set(r.name,l)}if(r.limit?.kind===ci){let l=t[R].debouncers.get(r.name)??{timeout:null,delay:r.limit.delay};t[R].debouncers.set(r.name,l)}t[R].handlers.set(r.name,l=>{n&&l.preventDefault(),i&&l.stopPropagation();let u="",c=l.currentTarget;for(;c!==this.#e;){let f=c[R].key;if(f)u=`${xi}${f}${u}`;else{let m=c.parentNode.childNodes,h=[].indexOf.call(m,c);u=`${$i}${h}${u}`}c=c.parentNode}u=u.slice(1);let p=this.#n?yc(l,o):l;if(t[R].throttles.has(l.type)){let f=t[R].throttles.get(l.type),m=Date.now(),h=f.last||0;m>h+f.delay?(f.last=m,this.#t(p,u,l.type,s)):l.preventDefault()}else if(t[R].debouncers.has(l.type)){let f=t[R].debouncers.get(l.type);window.clearTimeout(f.timeout),f.timeout=window.setTimeout(()=>{this.#t(p,u,l.type,s)},f.delay)}else this.#t(p,u,l.type,s)});break}}}};function Ye(e,t){if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)}var R=Symbol("metadata");function Xe(e,t=""){switch(e.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:e[R]={key:t,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case Node.TEXT_NODE:e[R]={key:t,debouncers:new Map};break}}function Fi(e,t){if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(t=t.firstChild;t;t=t.nextSibling)Fi(e,t);return}let r=t[R].key;r&&e[R].keyedChildren.set(r,new WeakRef(t))}function Mo(e){let r=e.currentTarget[R].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)}function yc(e,t=[]){let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,l=r;s<i.length;s++){if(s===i.length-1){l[i[s]]=o[i[s]];break}l=l[i[s]]??={},o=o[i[s]]}}return r}var qo={checked:Do("checked"),selected:Do("selected"),value:vc("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};function Do(e){return{added(t,r){t[e]=!0},removed(t){t[e]=!1}}}function vc(e){return{added(t,r){t[e]=r}}}var kc="http://www.w3.org/1999/xhtml";function Uo(e){let t=Fo(e);if(t===null||t.children instanceof L){let r=document.createTextNode("");return Xe(r),e.appendChild(r),Ro()}else{if(t.children instanceof Oe&&t.children.tail instanceof L)return t.children.head;{let r=document.createTextNode("");return Xe(r),e.insertBefore(r,e.firstChild),Sr(t.children)}}}function Fo(e){switch(e.nodeType){case Node.ELEMENT_NODE:{let t=e.getAttribute("data-lustre-key");Xe(e,t),t&&e.removeAttribute("data-lustre-key");let r=e.localName,n=e.namespaceURI;!n&&jc.includes(r)&&Oc(r,e);let i=zc(e),s=Po(e),o=!n||n===kc?le(r,i,s):Ri(n,r,i,s);return t?tr(t,o):o}case Node.TEXT_NODE:return Xe(e),_n(e.data);case Node.DOCUMENT_FRAGMENT_NODE:return Xe(e),e.childNodes.length>0?Sr(Po(e)):null;default:return null}}var jc=["input","select","textarea"];function Oc(e,t){window.queueMicrotask(()=>{t.type==="checkbox"&&t.checked?t.dispatchEvent(new Event("change",{bubbles:!0})):t.type==="radio"&&t.checked?t.dispatchEvent(new Event("change",{bubbles:!0})):t.value&&t.dispatchEvent(new Event("input",{bubbles:!0}))})}function Po(e){let t=S,r=e.lastChild;for(;r;){let n=Fo(r),i=r.previousSibling;n?t=new Oe(n,t):e.removeChild(r),r=i}return t}function zc(e){let t=e.attributes.length,r=S;for(;t-- >0;)r=new Oe(Ec(e.attributes[t]),r);return r}function Ec(e){let t=e.localName,r=e.value;return _e(t,r)}var sr=()=>globalThis.window&&window.document;var Gi=(e,t)=>e===t;var ir=class{initialNodeOffset=0;constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#t=i,this.#n=s,this.#c=new dn(this.root,(c,p,f)=>{let[m,h]=mn(this.#o,p,f,c);this.#o=m,h.isOk()&&this.dispatch(h[0],!1)});let o=Uo(this.root);this.#r=this.#t(this.#e);let{patch:l,events:u}=pn(Wi(),o,this.#r);this.#o=u,this.#c.push(l,this.initialNodeOffset),this.#a(n,!1)}root=null;dispatch(t,r=!1){if(this.#l||=r,this.#p)this.#d.push(t);else{let[n,i]=this.#n(this.#e,t);this.#e=n,this.#a(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#t;#n;#r;#o;#c;#p=!1;#d=[];#i=S;#s=S;#f=null;#l=!1;#_={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},internals:()=>this.root?.host?this.root.host.internals:this.root?.internals};#a(t){for(this.#p=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#_);if(this.#i=Wo(this.#i,t.before_paint),this.#s=Wo(this.#s,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#n(this.#e,this.#d.shift())}this.#p=!1,this.#l?(window.cancelAnimationFrame(this.#f),this.#u()):this.#f||(this.#f=window.requestAnimationFrame(()=>{this.#u()}))}#u(){this.#l=!1,this.#f=null;let t=this.#t(this.#e),{patch:r,events:n}=pn(this.#o,this.#r,t);if(this.#o=n,this.#r=t,this.#c.push(r,this.initialNodeOffset),this.#i instanceof Oe){let i=Go(this.#i);this.#i=S,window.queueMicrotask(()=>{this.#l=!0,this.#a(i)})}if(this.#s instanceof Oe){let i=Go(this.#s);this.#s=S,window.requestAnimationFrame(()=>{this.#l=!0,this.#a(i)})}}};function Go(e){return{synchronous:e,after_paint:S,before_paint:S}}function Wo(e,t){return e instanceof L?t:t instanceof L?e:et(e,t)}var Ho=new WeakMap;async function Vo(e){let t=[];for(let n of document.querySelectorAll("link[rel=stylesheet], style"))n.sheet||t.push(new Promise((i,s)=>{n.addEventListener("load",i),n.addEventListener("error",s)}));if(await Promise.allSettled(t),!e.host.isConnected)return[];e.adoptedStyleSheets=e.host.getRootNode().adoptedStyleSheets;let r=[];for(let n of document.styleSheets)try{e.adoptedStyleSheets.push(n)}catch{try{let i=Ho.get(n);if(!i){i=new CSSStyleSheet;for(let s of n.cssRules)i.insertRule(s.cssText,i.cssRules.length);Ho.set(n,i)}e.adoptedStyleSheets.push(i)}catch{let i=n.ownerNode.cloneNode();e.prepend(i),r.push(i)}}return r}var Ke=class extends _{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Wi(){return new Ke(be(),S,S)}function No(e){return new Ke(e.handlers,e.next_dispatched_paths,S)}function Ko(e,t,r){return _i(e,bi(t,r))}function zr(e,t,r){let n=Ko(e.handlers,t,r),i=e;return new Ke(n,i.dispatched_paths,i.next_dispatched_paths)}function Jo(e,t,r){return ae(r,e,(n,i)=>{if(i instanceof de){let s=i.name;return Ko(n,t,s)}else return n})}function mn(e,t,r,n){let i=d(t,e.next_dispatched_paths),s,o=e;s=new Ke(o.handlers,o.dispatched_paths,i);let l=s,u=Zt(l.handlers,t+wi+r);if(u.isOk()){let c=u[0];return[l,ft(n,c)]}else return[l,new O(a([]))]}function fn(e,t){return ko(t,e.dispatched_paths)}function Lc(e,t){return kt(t,e)}function Qo(e,t,r,n,i){return _t(e,bi(r,n),Lc(t,i))}function Er(e,t,r,n,i){let s=Qo(e.handlers,t,r,n,i),o=e;return new Ke(s,o.dispatched_paths,o.next_dispatched_paths)}function Yo(e,t,r,n){return ae(n,e,(i,s)=>{if(s instanceof de){let o=s.name,l=s.handler;return Qo(i,t,r,o,l)}else return i})}function $t(e,t){let r=Gi(e,pe);return Gi(t,pe)?e:r?t:i=>e(t(i))}function Xo(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(l instanceof L)return i;{let u=l.head,c=l.tail;e=Zo(i,s,o,u),t=s,r=o+te(u),n=c}}}function Zo(e,t,r,n){if(n instanceof he){let i=n.children;return Xo(e,t,r+1,i)}else if(n instanceof Te){let i=n.attributes,s=n.children,o=mt(t,r,n.key),u=Jo(e,o,i);return Xo(u,o,0,s)}else{if(n instanceof Ne)return e;{let i=n.attributes,s=mt(t,r,n.key);return Jo(e,s,i)}}}function nt(e,t,r,n){let i=Zo(e.handlers,t,r,n),s=e;return new Ke(i,s.dispatched_paths,s.next_dispatched_paths)}function Hi(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(c instanceof L)return s;{let p=c.head,f=c.tail;e=el(s,o,l,u,p),t=o,r=l,n=u+te(p),i=f}}}function el(e,t,r,n,i){if(i instanceof he){let s=i.children,o=$t(t,i.mapper),l=n+1;return Hi(e,o,r,l,s)}else if(i instanceof Te){let s=i.attributes,o=i.children,l=mt(r,n,i.key),u=$t(t,i.mapper),p=Yo(e,u,l,s);return Hi(p,u,l,0,o)}else{if(i instanceof Ne)return e;{let s=i.attributes,o=mt(r,n,i.key),l=$t(t,i.mapper);return Yo(e,l,o,s)}}}function ht(e,t,r,n,i){let s=el(e.handlers,t,r,n,i),o=e;return new Ke(s,o.dispatched_paths,o.next_dispatched_paths)}function Io(e,t,r,n,i){let s=Hi(e.handlers,t,r,n,i),o=e;return new Ke(s,o.dispatched_paths,o.next_dispatched_paths)}function le(e,t,r){return jr("",pe,"",e,t,r,be(),!1,!1)}function Ri(e,t,r,n){return jr("",pe,e,t,r,n,be(),!1,!1)}function _n(e){return ji("",pe,e)}function Ro(){return ji("",pe,"")}function Sc(e,t){for(;;){let r=e,n=t;if(r instanceof L)return n;{let i=r.head;if(i instanceof he){let s=r.tail,o=i.children_count;e=s,t=n+o}else e=r.tail,t=n+1}}}function Sr(e){return yi("",pe,e,be(),Sc(e,0))}function ge(e){return _n(e)}function tl(e,t){return le("footer",e,t)}function rl(e,t){return le("header",e,t)}function nl(e,t){return le("h1",e,t)}function il(e,t){return le("section",e,t)}function sl(e,t){return le("div",e,t)}function hn(e,t){return le("li",e,t)}function ol(e,t){return le("ul",e,t)}function ll(e,t){return le("a",e,t)}function ul(e,t){return le("span",e,t)}function cl(e,t){return le("strong",e,t)}function $n(e,t){return le("button",e,t)}function or(e){return le("input",e,S)}function xn(e,t){return le("label",e,t)}var xt=class extends _{constructor(t){super(),this.message=t}},At=class extends _{constructor(t,r){super(),this.name=t,this.data=r}};var wt=class extends _{};var Yi=({init:e,update:t,view:r,config:n},i)=>{if(!sr())return new O(new Ct);if(!i.includes("-"))return new O(new wn(i));if(window.customElements.get(i))return new O(new bn(i));let[s,o]=e(void 0),l=n.attributes.entries().map(([c])=>c),u=class extends HTMLElement{static get observedAttributes(){return l}static formAssociated=n.is_form_associated;#e;#t=[];#n;constructor(){super(),this.internals=this.attachInternals(),this.internals.shadowRoot?this.#n=this.internals.shadowRoot:this.#n=this.attachShadow({mode:n.open_shadow_root?"open":"closed"}),n.adopt_styles&&this.#r(),this.#e=new ir(this.#n,[s,o],r,t)}adoptedCallback(){n.adopt_styles&&this.#r()}attributeChangedCallback(p,f,m){let h=n.attributes.get(p)(m);h.constructor===E&&this.dispatch(h[0])}formResetCallback(){n.on_form_reset instanceof Q&&this.dispatch(n.on_form_reset[0])}formStateRestoreCallback(p,f){switch(f){case"restore":n.on_form_restore instanceof Q&&this.dispatch(n.on_form_restore[0](p));break;case"autocomplete":n.on_form_populate instanceof Q&&this.dispatch(n.on_form_autofill[0](p));break}}send(p){switch(p.constructor){case xt:{this.dispatch(p.message,!1);break}case At:{this.emit(p.name,p.data);break}case wt:break}}dispatch(p,f=!1){this.#e.dispatch(p,f)}emit(p,f){this.#e.emit(p,f)}async#r(){for(;this.#t.length;)this.#t.pop().remove(),this.shadowRoot.firstChild.remove();this.#t=await Vo(this.#n),this.#e.initialNodeOffset=this.#t.length}};return n.properties.forEach((c,p)=>{Object.defineProperty(u.prototype,p,{get(){return this[`_${p}`]},set(f){this[`_${p}`]=f;let m=ft(f,c);m.constructor===E&&this.dispatch(m[0])}})}),window.customElements.define(i,u),new E(void 0)};var lr=class extends _{constructor(t,r,n,i,s,o,l,u){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=l,this.on_form_restore=u}},Br=class extends _{constructor(t){super(),this.apply=t}};function Xi(e){let t=new lr(!1,!0,Yr(),Yr(),!1,Xr,Xr,Xr);return ae(e,t,(r,n)=>n.apply(r))}function Ki(e,t){return new Br(r=>{let n=Pt(r.attributes,e,t),i=r;return new lr(i.open_shadow_root,i.adopt_styles,n,i.properties,i.is_form_associated,i.on_form_autofill,i.on_form_reset,i.on_form_restore)})}function al(e){return new Br(t=>{let r=t;return new lr(e,r.adopt_styles,r.attributes,r.properties,r.is_form_associated,r.on_form_autofill,r.on_form_reset,r.on_form_restore)})}function pl(e){return new Br(t=>{let r=t;return new lr(r.open_shadow_root,e,r.attributes,r.properties,r.is_form_associated,r.on_form_autofill,r.on_form_reset,r.on_form_restore)})}var Qi=class e{static start({init:t,update:r,view:n},i,s){if(!sr())return new O(new Ct);let o=i instanceof HTMLElement?i:document.querySelector(i);return o?new E(new e(o,t(s),r,n)):new O(new gn(i))}#e;constructor(t,[r,n],i,s){this.#e=new ir(t,[r,n],s,i)}send(t){switch(t.constructor){case xt:{this.dispatch(t.message,!1);break}case At:{this.emit(t.name,t.data);break}case wt:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},_l=Qi.start;var yn=class extends _{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var wn=class extends _{constructor(t){super(),this.name=t}},bn=class extends _{constructor(t){super(),this.name=t}},gn=class extends _{constructor(t){super(),this.selector=t}},Ct=class extends _{};function ml(e,t,r,n){return new yn(e,t,r,Xi(n))}function hl(e,t,r){return new yn(e,t,r,Xi(S))}function $l(e,t,r){return Nr(!sr(),new O(new Ct),()=>_l(e,t,r))}function Nc(e){let t=[be(),S,0],r=ae(e,t,(o,l)=>{let u=o[0],c=o[1],p=o[2],f=l[0],m=l[1],h=tr(f,m),w;return f===""?w=u:w=_t(u,f,h),[w,d(h,c),p+1]}),n=r[0],i=r[1],s=r[2];return[n,V(i),s]}function Ic(e,t,r){let n=Nc(r),i=n[0],s=n[1];return jr("",pe,"",e,t,s,i,!1,!1)}function wl(e,t){return Ic("ul",e,t)}function Zi(e,t){return yo(e,t)}function Pe(e,t){return po(e,t)}function Ar(e){return Pe("click",qe(e))}function bl(e){return Pe("blur",qe(e))}function qc(){return Xn(a(["target","value"]),at)}function gl(e){return Pe("input",(()=>{let t=qc();return kt(t,e)})())}function Dc(){return Xn(a(["target","checked"]),Ur)}function vn(e){return Pe("change",(()=>{let t=Dc();return kt(t,e)})())}var it=class extends _{constructor(t,r,n){super(),this.title=t,this.completed=r,this.editing=n}},kn=class extends _{constructor(t){super(),this.title=t}},Cr=class extends _{constructor(t){super(),this.completed=t}},jn=class extends _{constructor(t){super(),this.editing=t}},On=class extends _{constructor(t){super(),this.title=t}},zn=class extends _{constructor(t){super(),this.completed=t}},En=class extends _{},Ln=class extends _{};function Pc(e){return[new it("",!1,!1),oe()]}function Uc(e){return Pe("keydown",Wt("keyCode",Rt,t=>t===13?qe(e):mr(e,"not enter")))}function Fc(e){return Pe("dblclick",qe(e))}function Rc(e){return hn(a([Zr(a([["completed",e.completed],["editing",e.editing]]))]),a([e.editing?or(a([me("edit"),ho(e.title),rn(!0),gl(r=>new On(r)),bl(new Ln),Uc(new Ln)])):sl(a([me("view")]),a([or(a([me("toggle"),en("checkbox"),tn(e.completed),vn(r=>new zn(r))])),xn(a([Fc(new jn(!0))]),a([ge(e.title)])),$n(a([me("destroy"),Ar(new En)]),a([]))]))]))}var kl="todomvc-item",jl="change";function vl(e){return Zi(jl,wr(a([["title",Yt(e.title)],["completed",xr(e.completed)]])))}var Ol="delete";function zl(e,t,r,n){return le(kl,a([_e("title",e),_e("completed",t?"yes":"no"),Pe(jl,Gt(a(["detail","title"]),at,i=>Gt(a(["detail","completed"]),Ur,s=>qe(r(i,s))))),Pe(Ol,qe(n))]),a([]))}function Gc(e,t){if(t instanceof kn){let r=t.title;return[(()=>{let n=e;return new it(r,n.completed,n.editing)})(),oe()]}else if(t instanceof Cr){let r=t.completed;return[(()=>{let n=e;return new it(n.title,r,n.editing)})(),oe()]}else if(t instanceof jn){let r=t.editing;return[(()=>{let n=e;return new it(n.title,n.completed,r)})(),oe()]}else if(t instanceof On){let r=t.title;return[(()=>{let n=e;return new it(r,n.completed,n.editing)})(),oe()]}else if(t instanceof zn){let r=t.completed,n,i=e;n=new it(i.title,r,i.editing);let s=n;return[s,vl(s)]}else{if(t instanceof En)return[e,Zi(Ol,Ks())];{let r,n=e;r=new it(Dr(e.title),n.completed,!1);let i=r;return[i,vl(i)]}}}function El(){let e=ml(Pc,Gc,Rc,a([al(!0),pl(!1),Ki("title",t=>new E(new kn(t))),Ki("completed",t=>t==="yes"?new E(new Cr(!0)):t==="no"?new E(new Cr(!1)):new O(void 0))]));return Yi(e,kl)}var Ll=e=>{let t=document.getElementById(e);t&&(t.value="")};var ke=class extends _{constructor(t,r,n,i,s){super(),this.entries=t,this.active=r,this.completed=n,this.uid=i,this.visibility=s}},Tt=class extends _{constructor(t,r,n,i){super(),this.title=t,this.completed=r,this.deleted=n,this.id=i}},Nt=class extends _{},It=class extends _{},Tr=class extends _{},Sn=class extends _{constructor(t){super(),this.value=t}},Bn=class extends _{},An=class extends _{constructor(t){super(),this.completed=t}},Cn=class extends _{constructor(t){super(),this.visibility=t}},Tn=class extends _{constructor(t){super(),this.index=t}},ts=class extends _{constructor(t,r,n){super(),this.index=t,this.title=r,this.completed=n}};function Hc(e,t){return new Tt(e,!1,!1,t)}function Vc(e,t){return t instanceof Nt?e instanceof Nt:t instanceof It?e instanceof It:e instanceof Tr}function Jc(e){return[new ke(Hs(),0,0,0,new Nt),oe()]}function Yc(e){return zl(e.title,e.completed,(t,r)=>new ts(e.id,t,r),new Tn(e.id))}function Xc(e){let t;e===1?t="item":t="items";let r=t;return ul(a([me("todo-count")]),a([cl(a([]),a([ge(ze(e))])),ge(" "),ge(r),ge(" left")]))}function es(e,t,r){return hn(a([Ar(new Cn(t))]),a([ll(a([wo(e),Zr(a([["selected",Vc(t,r)]]))]),a([t instanceof Nt?ge("All"):t instanceof It?ge("Active"):ge("Completed")]))]))}function Kc(e){return ol(a([me("filters")]),a([es("#/",new Nt,e),es("#/active",new It,e),es("#/completed",new Tr,e)]))}function rs(e){return e?_o(a([["display","none"]])):mo()}function Qc(e){let t=e.active+e.completed;return il(a([me("main"),rs(t<=0)]),a([or(a([ai("toggle-all"),me("toggle-all"),en("checkbox"),tn(e.active<=0),vn(r=>new An(r))])),xn(a([xo("toggle-all")]),a([ge("Mark all as complete")])),wl(a([me("todo-list")]),Js(e.entries,a([]),(r,n)=>{let i,s=e.visibility;return s instanceof It?i=!n.completed&&!n.deleted:s instanceof Tr?i=n.completed&&!n.deleted:i=!n.deleted,i?d([ze(n.id),Yc(n)],r):r}))]))}function Zc(e){return $n(a([me("clear-completed"),rs(e===0),Ar(new Bn)]),a([ge("Clear completed ("),ge(ze(e)),ge(")")]))}function ef(e){return Pe("keydown",Wt("keyCode",Rt,t=>Gt(a(["target","value"]),at,r=>t===13?qe(e(r)):mr(e(r),"not enter"))))}function tf(){return rl(a([me("header")]),a([nl(a([]),a([ge("todos")])),or(a([ai("new-todo"),me("new-todo"),$o("What needs to be done?"),rn(!0),ef(e=>new Sn(e))]))]))}function rf(e){let t=e.active+e.completed;return Sr(a([tf(),Qc(e),tl(a([me("footer"),rs(t<=0)]),a([Xc(e.active),Kc(e.visibility),Zc(e.completed)]))]))}function nf(e){return go(t=>Ll(e))}function sf(e,t){if(t instanceof Sn){let r=t.value,n=Dr(r);return Nr(n==="",[e,oe()],()=>{let i=Vs(e.entries,Hc(n,e.uid)),s=e.uid+1,o=e.active+1,l,u=e;return l=new ke(i,o,u.completed,s,u.visibility),[l,nf("new-todo")]})}else if(t instanceof Bn){let r=ti(e.entries,n=>{if(n.completed){let s=n;return new Tt(s.title,s.completed,!0,s.id)}else return n});return[(()=>{let n=e;return new ke(r,n.active,0,n.uid,n.visibility)})(),oe()]}else if(t instanceof An){let r=t.completed,n=ti(e.entries,l=>{let u=l;return new Tt(u.title,r,u.deleted,u.id)}),i=e.completed+e.active,s;if(r){let l=e;s=new ke(n,0,i,l.uid,l.visibility)}else{let l=e;s=new ke(n,i,0,l.uid,l.visibility)}return[s,oe()]}else if(t instanceof Cn){let r=t.visibility;return[(()=>{let n=e;return new ke(n.entries,n.active,n.completed,n.uid,r)})(),oe()]}else if(t instanceof Tn){let r=t.index,n=Zn(e.entries,r);if(n.isOk()){let i=n[0];if(i.deleted)return[e,oe()];{let s=ei(e.entries,r,(()=>{let c=i;return new Tt(c.title,c.completed,!0,c.id)})()),o;if(i.completed){let c=e;o=new ke(s,c.active,e.completed-1,c.uid,c.visibility)}else{let c=e;o=new ke(s,e.active-1,c.completed,c.uid,c.visibility)}return[o,oe()]}}else return[e,oe()]}else{let r=t.index,n=t.title,i=t.completed,s=Zn(e.entries,r);if(s.isOk()){let o=s[0];if(o.completed!==i){let l=ei(e.entries,r,(()=>{let f=o;return new Tt(n,i,f.deleted,f.id)})()),u,c=o.completed;if(i)if(c){let f=e;u=new ke(l,f.active,f.completed,f.uid,f.visibility)}else{let f=e.active-1,m=e.completed+1,h=e;u=new ke(l,f,m,h.uid,h.visibility)}else if(c){let f=e.active+1,m=e.completed-1,h=e;u=new ke(l,f,m,h.uid,h.visibility)}else{let f=e;u=new ke(l,f.active,f.completed,f.uid,f.visibility)}return[u,oe()]}else return[e,oe()]}else return[e,oe()]}}function Sl(){let e=hl(Jc,sf,rf),t=El();if(!t.isOk())throw cr("let_assert","todomvc",18,"main","Pattern match failed, no pattern matched the value.",{value:t});let r=$l(e,".todoapp",void 0);if(!r.isOk())throw cr("let_assert","todomvc",19,"main","Pattern match failed, no pattern matched the value.",{value:r})}Sl();
