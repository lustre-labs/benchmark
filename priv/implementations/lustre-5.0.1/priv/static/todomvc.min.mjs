function $r(e,t,r){return e?t:r()}var d=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},Ye=class{static fromArray(t,r){let n=r||new Be;for(let i=t.length-1;i>=0;--i)n=new we(t[i],n);return n}[Symbol.iterator](){return new fn(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof Be}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function $(e,t){return new we(e,t)}function a(e,t){return Ye.fromArray(e,t)}var fn=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Be)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Be=class extends Ye{},we=class extends Ye{constructor(t,r){super(),this.head=t,this.tail=r}},jt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Pt(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Pt(this.rawBuffer,this.bitOffset,i),o=Pt(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Pt(this.rawBuffer,this.bitOffset,r),s=Pt(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Wi("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Wi("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Pt(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Gi={};function Wi(e,t){Gi[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Gi[e]=!0)}var Lt=class e extends d{static isResult(t){return t instanceof e}},S=class extends Lt{constructor(t){super(),this[0]=t}isOk(){return!0}},L=class extends Lt{constructor(t){super(),this[0]=t}isOk(){return!1}};function N(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Hi(n)||!Hi(i)||!$l(n,i)||al(n,i)||pl(n,i)||dl(n,i)||_l(n,i)||hl(n,i)||ml(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=fl(n);for(let c of l(n))r.push(u(n,c),u(i,c))}return!0}function fl(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function al(e,t){return e instanceof Date&&(e>t||e<t)}function pl(e,t){return!(e instanceof jt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function dl(e,t){return Array.isArray(e)&&e.length!==t.length}function _l(e,t){return e instanceof Map&&e.size!==t.size}function hl(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function ml(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Hi(e){return typeof e=="object"&&e!==null}function $l(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function xr(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let l in s)o[l]=s[l];return o}var J=class extends d{},U=class extends d{},re=class extends d{};var X=class extends d{constructor(t){super(),this[0]=t}},ce=class extends d{};function Ft(e,t,r){return Vi(t,r,e)}var R=class extends d{},qe=class extends d{};function Gt(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function q(e){return Gt(e,a([]))}function yl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);{let o=n.head;e=n.tail,t=i,r=$(i(o),s)}}}function ut(e,t){return yl(e,t,a([]))}function vl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function Xe(e,t){return vl(q(e),t)}function be(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function kl(e,t,r,n,i,s){for(;;){let o=e,l=t,u=r,c=n,f=i,p=s,h=$(f,u);if(o.hasLength(0))return c instanceof R?$(q(h),p):$(h,p);{let x=o.head,m=o.tail,g=l(f,x);if(g instanceof re&&c instanceof qe)e=m,t=l,r=h,n=c,i=x,s=p;else if(g instanceof J&&c instanceof R)e=m,t=l,r=h,n=c,i=x,s=p;else if(g instanceof U&&c instanceof R)e=m,t=l,r=h,n=c,i=x,s=p;else if(g instanceof re&&c instanceof R){let _;c instanceof R?_=$(q(h),p):_=$(h,p);let v=_;if(m.hasLength(0))return $(a([x]),v);{let b=m.head,O=m.tail,y,w=l(x,b);w instanceof J?y=new R:w instanceof U?y=new R:y=new qe;let k=y;e=O,t=l,r=a([x]),n=k,i=b,s=v}}else if(g instanceof J&&c instanceof qe){let _;c instanceof R?_=$(q(h),p):_=$(h,p);let v=_;if(m.hasLength(0))return $(a([x]),v);{let b=m.head,O=m.tail,y,w=l(x,b);w instanceof J?y=new R:w instanceof U?y=new R:y=new qe;let k=y;e=O,t=l,r=a([x]),n=k,i=b,s=v}}else{let _;c instanceof R?_=$(q(h),p):_=$(h,p);let v=_;if(m.hasLength(0))return $(a([x]),v);{let b=m.head,O=m.tail,y,w=l(x,b);w instanceof J?y=new R:w instanceof U?y=new R:y=new qe;let k=y;e=O,t=l,r=a([x]),n=k,i=b,s=v}}}}}function jl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return Gt(s,l);if(s.hasLength(0))return Gt(i,l);{let u=i.head,c=i.tail,f=s.head,p=s.tail,h=o(u,f);h instanceof J?(e=c,t=s,r=o,n=$(u,l)):h instanceof re?(e=i,t=p,r=o,n=$(f,l)):(e=i,t=p,r=o,n=$(f,l))}}}function Ll(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);if(n.hasLength(1)){let o=n.head;return q($(q(o),s))}else{let o=n.head,l=n.tail.head,u=n.tail.tail,c=jl(o,l,i,a([]));e=u,t=i,r=$(c,s)}}}function Ol(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return Gt(s,l);if(s.hasLength(0))return Gt(i,l);{let u=i.head,c=i.tail,f=s.head,p=s.tail,h=o(u,f);h instanceof J?(e=i,t=p,r=o,n=$(f,l)):h instanceof re?(e=c,t=s,r=o,n=$(u,l)):(e=c,t=s,r=o,n=$(u,l))}}}function zl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);if(n.hasLength(1)){let o=n.head;return q($(q(o),s))}else{let o=n.head,l=n.tail.head,u=n.tail.tail,c=Ol(o,l,i,a([]));e=u,t=i,r=$(c,s)}}}function El(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return a([]);if(n.hasLength(1)&&i instanceof R)return n.head;if(n.hasLength(1)&&i instanceof qe){let o=n.head;return q(o)}else i instanceof R?(e=Ll(n,s,a([])),t=new qe,r=s):(e=zl(n,s,a([])),t=new R,r=s)}}function Yi(e,t){if(e.hasLength(0))return a([]);if(e.hasLength(1)){let r=e.head;return a([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof J?s=new R:o instanceof U?s=new R:s=new qe;let l=s,u=kl(i,t,a([r]),l,n,a([]));return El(u,new R,t)}}function Zi(e){return!!e.isOk()}var ts=new WeakMap,dn=new DataView(new ArrayBuffer(8)),_n=0;function hn(e){let t=ts.get(e);if(t!==void 0)return t;let r=_n++;return _n===2147483647&&(_n=0),ts.set(e,r),r}function mn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function xn(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function ns(e){dn.setFloat64(0,e);let t=dn.getInt32(0),r=dn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function Rl(e){return xn(e.toString())}function Gl(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return hn(e);if(e instanceof Date)return ns(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Le(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Le(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+mn(Le(n),Le(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+mn(Le(o),xn(s))|0}}return r}function Le(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return ns(e);case"string":return xn(e);case"bigint":return Rl(e);case"object":return Gl(e);case"symbol":return hn(e);case"function":return hn(e);default:return 0}}var Ue=5,wn=Math.pow(2,Ue),Wl=wn-1,Hl=wn/2,Vl=wn/4,fe=0,De=1,ye=2,ft=3,bn={type:ye,bitmap:0,array:[]};function Vt(e,t){return e>>>t&Wl}function br(e,t){return 1<<Vt(e,t)}function Jl(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function gn(e,t){return Jl(e&t-1)}function Oe(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Yl(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function $n(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function is(e,t,r,n,i,s){let o=Le(t);if(o===n)return{type:ft,hash:o,array:[{type:fe,k:t,v:r},{type:fe,k:i,v:s}]};let l={val:!1};return Jt(yn(bn,e,o,t,r,l),e,n,i,s,l)}function Jt(e,t,r,n,i,s){switch(e.type){case De:return Xl(e,t,r,n,i,s);case ye:return yn(e,t,r,n,i,s);case ft:return Kl(e,t,r,n,i,s)}}function Xl(e,t,r,n,i,s){let o=Vt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:De,size:e.size+1,array:Oe(e.array,o,{type:fe,k:n,v:i})};if(l.type===fe)return N(n,l.k)?i===l.v?e:{type:De,size:e.size,array:Oe(e.array,o,{type:fe,k:n,v:i})}:(s.val=!0,{type:De,size:e.size,array:Oe(e.array,o,is(t+Ue,l.k,l.v,r,n,i))});let u=Jt(l,t+Ue,r,n,i,s);return u===l?e:{type:De,size:e.size,array:Oe(e.array,o,u)}}function yn(e,t,r,n,i,s){let o=br(r,t),l=gn(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[l];if(u.type!==fe){let f=Jt(u,t+Ue,r,n,i,s);return f===u?e:{type:ye,bitmap:e.bitmap,array:Oe(e.array,l,f)}}let c=u.k;return N(n,c)?i===u.v?e:{type:ye,bitmap:e.bitmap,array:Oe(e.array,l,{type:fe,k:n,v:i})}:(s.val=!0,{type:ye,bitmap:e.bitmap,array:Oe(e.array,l,is(t+Ue,c,u.v,r,n,i))})}else{let u=e.array.length;if(u>=Hl){let c=new Array(32),f=Vt(r,t);c[f]=yn(bn,t+Ue,r,n,i,s);let p=0,h=e.bitmap;for(let x=0;x<32;x++){if((h&1)!==0){let m=e.array[p++];c[x]=m}h=h>>>1}return{type:De,size:u+1,array:c}}else{let c=Yl(e.array,l,{type:fe,k:n,v:i});return s.val=!0,{type:ye,bitmap:e.bitmap|o,array:c}}}}function Kl(e,t,r,n,i,s){if(r===e.hash){let o=vn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:ft,hash:r,array:Oe(e.array,o,{type:fe,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:ft,hash:r,array:Oe(e.array,l,{type:fe,k:n,v:i})}}return Jt({type:ye,bitmap:br(e.hash,t),array:[e]},t,r,n,i,s)}function vn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(N(t,e.array[n].k))return n;return-1}function wr(e,t,r,n){switch(e.type){case De:return Ql(e,t,r,n);case ye:return Zl(e,t,r,n);case ft:return eu(e,n)}}function Ql(e,t,r,n){let i=Vt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==fe)return wr(s,t+Ue,r,n);if(N(n,s.k))return s}}function Zl(e,t,r,n){let i=br(r,t);if((e.bitmap&i)===0)return;let s=gn(e.bitmap,i),o=e.array[s];if(o.type!==fe)return wr(o,t+Ue,r,n);if(N(n,o.k))return o}function eu(e,t){let r=vn(e,t);if(!(r<0))return e.array[r]}function kn(e,t,r,n){switch(e.type){case De:return tu(e,t,r,n);case ye:return ru(e,t,r,n);case ft:return nu(e,n)}}function tu(e,t,r,n){let i=Vt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===fe){if(!N(s.k,n))return e}else if(o=kn(s,t+Ue,r,n),o===s)return e;if(o===void 0){if(e.size<=Vl){let l=e.array,u=new Array(e.size-1),c=0,f=0,p=0;for(;c<i;){let h=l[c];h!==void 0&&(u[f]=h,p|=1<<c,++f),++c}for(++c;c<l.length;){let h=l[c];h!==void 0&&(u[f]=h,p|=1<<c,++f),++c}return{type:ye,bitmap:p,array:u}}return{type:De,size:e.size-1,array:Oe(e.array,i,o)}}return{type:De,size:e.size,array:Oe(e.array,i,o)}}function ru(e,t,r,n){let i=br(r,t);if((e.bitmap&i)===0)return e;let s=gn(e.bitmap,i),o=e.array[s];if(o.type!==fe){let l=kn(o,t+Ue,r,n);return l===o?e:l!==void 0?{type:ye,bitmap:e.bitmap,array:Oe(e.array,s,l)}:e.bitmap===i?void 0:{type:ye,bitmap:e.bitmap^i,array:$n(e.array,s)}}return N(n,o.k)?e.bitmap===i?void 0:{type:ye,bitmap:e.bitmap^i,array:$n(e.array,s)}:e}function nu(e,t){let r=vn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:ft,hash:e.hash,array:$n(e.array,r)}}function ss(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===fe){t(s.v,s.k);continue}ss(s,t)}}}var Pe=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=wr(this.root,0,Le(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?bn:this.root,s=Jt(i,0,Le(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=kn(this.root,0,Le(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:wr(this.root,0,Le(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){ss(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+mn(Le(r),Le(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!N(t.get(n,!r),r))throw rs}),!0}catch(r){if(r===rs)return!1;throw r}}},rs=Symbol();var su=void 0,os={};function ge(e){return e.toString()}function jn(e,t){return e.startsWith(t)}var ls=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),ou=new RegExp(`^[${ls}]*`),lu=new RegExp(`[${ls}]*$`);function us(e){return e.replace(ou,"")}function cs(e){return e.replace(lu,"")}function zt(){return Pe.new()}function Rt(e,t){let r=e.get(t,os);return r===os?new L(su):new S(r)}function Vi(e,t,r){return r.set(e,t)}function ct(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Lt)return"Result";if(e instanceof Ye)return"List";if(e instanceof jt)return"BitArray";if(e instanceof Pe)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function cu(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function as(e){return cu(e,"")}function Ln(e){let r=us(e);return cs(r)}function ps(e,t){if(e instanceof Pe||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new S(new ce):new S(new X(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof Ye){let n=0;for(let i of e){if(n===t)return new S(new X(i));n++}return new L("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new S(new X(e[t])):new S(new ce):new L(r?"Indexable":"Dict")}function ds(e){return Number.isInteger(e)?new S(e):new L(0)}function _s(e){return typeof e=="string"?new S(e):new L("")}var it=class extends d{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},Fe=class extends d{constructor(t){super(),this.function=t}};function pt(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new S(n):new L(i)}function Ke(e){return new Fe(t=>[e,a([])])}function gr(e,t){return new Fe(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function _u(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,l=s.tail,u=o.function(n),c=u;if(u[1].hasLength(0))return c;e=n,t=i,r=l}}}function ms(e,t){return new Fe(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:_u(r,i,t)})}function $s(e,t){return a([new it(e,ct(t),a([]))])}function xs(e,t,r){let n=r(e);return n.isOk()?[n[0],a([])]:[n[0],a([new it(t,ct(e),a([]))])]}function hu(e){return N(!0,e)?[!0,a([])]:N(!1,e)?[!1,a([])]:[!1,$s("Bool",e)]}function mu(e){return xs(e,"Int",ds)}function zn(e,t){return new Fe(r=>[e,$s(t,r)])}var ws=new Fe(hu),yr=new Fe(mu);function $u(e){return xs(e,"String",_s)}var Et=new Fe($u);function On(e,t){let r=ms(Et,a([gr(yr,ge)])),n=ut(t,s=>{let o=s,l=pt(o,r);return l.isOk()?l[0]:"<"+ct(o)+">"}),i=ut(e[1],s=>{let o=s;return new it(o.expected,o.found,Xe(n,s.path))});return[e[0],i]}function xu(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(s.hasLength(0)){let f=l(u);return On(f,q(o))}else{let f=s.head,p=s.tail,h=ps(u,f);if(h.isOk()&&h[0]instanceof X){let x=h[0][0];e=p,t=$(f,o),r=l,n=x,i=c}else{if(h.isOk()&&h[0]instanceof ce)return c(u,$(f,o));{let x=h[0],_=[l(u)[0],a([new it(x,ct(u),a([]))])];return On(_,q(o))}}}}}function St(e,t,r){return new Fe(n=>{let i=xu(e,a([]),t.function,n,(f,p)=>{let m=[t.function(f)[0],a([new it("Field","Nothing",a([]))])];return On(m,q(p))}),s=i[0],o=i[1],l=r(s).function(n),u=l[0],c=l[1];return[u,Xe(o,c)]})}function vr(e,t,r){return St(a([e]),t,r)}var Re=e=>[e],kr=(e,t)=>[e,t],dt=(e,t)=>[...e,t],Bt=(e,t)=>[t,...e],_t=(e,t)=>[...e,...t],C=(e,t)=>t[e-1],Ge=(e,t,r)=>t.with(e-1,r),T=e=>e.length;var ht=(e,t)=>e.map(t),mt=(e,t)=>e<<t,Yt=(e,t)=>e>>t;function bu(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(l<=u)e=s,t=c(o,C(l,s)),r=l+1,n=u,i=c;else return o}}function ys(e,t,r){let n=T(e);return bu(e,t,2,n,r)}function gu(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(o>0)e=i,t=l(s,C(o,i)),r=o-1,n=l;else return s}}function jr(e,t,r){let n=T(e);return gu(e,t,n,r)}var W=class extends d{constructor(t,r){super(),this.size=t,this.children=r}},G=class extends d{constructor(t,r){super(),this.sizes=t,this.children=r}},he=class extends d{constructor(t){super(),this.children=t}},D=class extends d{constructor(t){super(),this.merged=t}},ae=class extends d{constructor(t,r){super(),this.left=t,this.right=r}};function En(e){return new he(e)}function ve(e){if(e instanceof W)return e.size;if(e instanceof he){let t=e.children;return T(t)}else{let t=e.sizes;return C(T(t),t)}}function Os(e){let t=ve(C(1,e));return ys(e,Re(t),(r,n)=>{let i=C(T(r),r)+ve(n);return dt(r,i)})}function $t(e,t){let r=Os(t);return new G(r,t)}function zs(e,t,r){for(;;){let n=e,i=t,s=r;if(C(i,n)>s)return i-1;e=n,t=i+1,r=s}}function Or(e,t){if(e instanceof W){let r=e.size,n=e.children;return new W(r,ht(n,i=>Or(i,t)))}else if(e instanceof G){let r=e.sizes,n=e.children;return new G(r,ht(n,i=>Or(i,t)))}else{let r=e.children;return new he(ht(r,t))}}function zr(e,t,r){if(e instanceof W){let n=e.children;return jr(n,t,(i,s)=>zr(s,i,r))}else if(e instanceof G){let n=e.children;return jr(n,t,(i,s)=>zr(s,i,r))}else{let n=e.children;return jr(n,t,r)}}function st(e,t){let r=T(t),n=C(r,t),s=mt(1,e)*(r-1)+ve(n);return new W(s,t)}function Sn(e,t){let r=T(t),n=mt(1,e),i=Os(t),s;if(r===1?s=0:s=C(r-1,i),s===n*(r-1)){let u=C(r,i);return new W(u,t)}else return new G(i,t)}var Ce=5;function Es(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof W){let o=n.children,l=Yt(s,i),u=s-mt(l,i);e=C(l+1,o),t=i-Ce,r=u}else if(n instanceof G){let o=n.sizes,l=n.children,u=Yt(s,i),c=zs(o,u+1,s),f;c===0?f=s:f=s-C(c,o);let p=f;e=C(c+1,l),t=i-Ce,r=p}else{let o=n.children;return C(s+1,o)}}}function Er(e,t,r,n){if(t instanceof W){let i=t.size,s=t.children,o=Yt(r,e),l=r-mt(o,e),u,c=C(o+1,s),f=(h=>Er(e-Ce,h,l,n))(c);u=(h=>Ge(o+1,s,h))(f);let p=u;return new W(i,p)}else if(t instanceof G){let i=t.sizes,s=t.children,o=Yt(r,e),l=zs(i,o+1,r),u;l===0?u=r:u=r-C(l,i);let c=u,f,p=C(l+1,s),h=(m=>Er(e-Ce,m,c,n))(p);f=(m=>Ge(l+1,s,m))(h);let x=f;return new G(i,x)}else{let i=t.children,s=Ge(r+1,i,n(C(r+1,i)));return new he(s)}}var Ct=32;function vs(e,t,r,n,i){let s=T(r),o=C(s,r),l=Tt(e-Ce,o,n,i);if(l instanceof D){let u=l.merged,c=Ge(s,r,u);return new D(st(e,c))}else if(l instanceof ae&&s<32){let u=l.right,c=dt(r,u);return ve(o)===mt(1,e)?new D(st(e,c)):new D($t(e,c))}else{let u=l.right;return new ae(t,st(e,Re(u)))}}function Tt(e,t,r,n){if(t instanceof W&&n instanceof he){let i=t.children;return vs(e,t,i,r,n)}else if(t instanceof G&&n instanceof he){let i=t.sizes,s=t.children;return ks(e,t,s,i,r,n)}else if(t instanceof he&&n instanceof W){let i=n.children;return js(e,t,r,n,i)}else if(t instanceof he&&n instanceof G){let i=n.sizes,s=n.children;return Ls(e,t,r,n,s,i)}else if(t instanceof he&&n instanceof he){let i=t.children,s=n.children;return T(i)+T(s)<=Ct?new D(new he(_t(i,s))):new ae(t,n)}else if(t instanceof W&&e>r){let i=t.children;return vs(e,t,i,r,n)}else if(t instanceof G&&e>r){let i=t.sizes,s=t.children;return ks(e,t,s,i,r,n)}else if(n instanceof W&&r>e){let i=n.children;return js(e,t,r,n,i)}else if(n instanceof G&&r>e){let i=n.sizes,s=n.children;return Ls(e,t,r,n,s,i)}else if(t instanceof W&&n instanceof W){let i=t.children,s=n.children;if(T(i)+T(s)<=Ct){let l=_t(i,s),u=C(T(i),i);return ve(u)===mt(1,e)?new D(st(e,l)):new D($t(e,l))}else return new ae(t,n)}else if(t instanceof W&&n instanceof G){let i=t.children,s=n.children;if(T(i)+T(s)<=Ct){let l=_t(i,s);return new D($t(e,l))}else return new ae(t,n)}else if(t instanceof G&&n instanceof W){let i=t.children,s=n.children;if(T(i)+T(s)<=Ct){let l=_t(i,s);return new D($t(e,l))}else return new ae(t,n)}else{let i=t.children,s=n.children;if(T(i)+T(s)<=Ct){let l=_t(i,s);return new D($t(e,l))}else return new ae(t,n)}}function ks(e,t,r,n,i,s){let o=T(r),l=C(o,r),u=Tt(e-Ce,l,i,s);if(u instanceof D){let c=u.merged,f=Ge(o,r,c),p=C(o,n)+ve(c),h=Ge(o,n,p);return new D(new G(h,f))}else if(u instanceof ae&&o<32){let c=u.right,f=dt(r,c),p=dt(n,C(o,n)+ve(c));return new D(new G(p,f))}else{let c=u.right;return new ae(t,st(e,Re(c)))}}function js(e,t,r,n,i){let s=T(i),o=C(1,i),l=Tt(e,t,r-Ce,o);if(l instanceof D){let u=l.merged,c=Ge(1,i,u);return new D($t(r,c))}else if(l instanceof ae&&s<32){let u=l.left,c=Bt(i,u);return new D($t(r,c))}else{let u=l.left;return new ae(st(r,Re(u)),n)}}function Ls(e,t,r,n,i,s){let o=T(i),l=C(1,i),u=Tt(e,t,r-Ce,l);if(u instanceof D){let c=u.merged,f=Ge(1,i,c),p=ve(c)-ve(l),h=ht(s,x=>x+p);return new D(new G(h,f))}else if(u instanceof ae&&o<32){let c=u.left,f=Bt(i,c),p=ve(c),h,m=ht(s,_=>_+p);h=Bt(m,p);let g=h;return new D(new G(g,f))}else{let c=u.left;return new ae(st(r,Re(c)),n)}}var Qe=class extends d{},We=class extends d{constructor(t,r){super(),this.shift=t,this.root=r}};function ju(e,t){let r=T(t);if(r===0)return new Qe;if(r===1)return new We(e,C(1,t));{let n=e+Ce;return new We(n,Sn(n,t))}}function As(){return new Qe}function Lu(e){return new We(0,En(Re(e)))}function An(e,t){if(e instanceof We){let r=e.shift,n=e.root;return 0<=t&&t<ve(n)?new S(Es(n,r,t)):new L(void 0)}else return new L(void 0)}function Xt(e,t,r){if(e instanceof We){let n=e.shift,i=e.root;return 0<=t&&t<ve(i)?new We(n,Er(n,i,t,r)):e}else return e}function Bn(e,t,r){return Xt(e,t,n=>r)}function Ou(e,t){if(e instanceof Qe)return t;if(t instanceof Qe)return e;{let r=e.shift,n=e.root,i=t.shift,s=t.root,o;r>i?o=r:o=i;let u=o,c=Tt(r,n,i,s);if(c instanceof D){let f=c.merged;return new We(u,f)}else{let f=c.left,p=c.right;return ju(u,kr(f,p))}}}function Bs(e,t){return Ou(e,Lu(t))}function Cn(e,t){if(e instanceof Qe)return new Qe;{let r=e.shift,n=e.root;return new We(r,Or(n,t))}}function Cs(e,t,r){if(e instanceof Qe)return t;{let n=e.root;return zr(n,t,r)}}function ie(e){return e}function Nn(e){return e}var Sr=class extends d{constructor(t){super(),this.dict=t}};function Ns(){return new Sr(zt())}function Mn(e,t){let r=e.dict,n=Rt(r,t);return Zi(n)}var Bu=void 0;function Ms(e,t){return new Sr(Ft(e.dict,t,Bu))}var Tu=Pe.new();function Ar(){return Tu}var Nu=Ns();function Zt(){return Nu}var Te=globalThis?.document,Br="http://www.w3.org/1999/xhtml",Cr=1,Tr=3,er=11,Is=!!globalThis.HTMLElement?.prototype?.moveBefore;var z=a([]),Nr=new ce;var Mu=new re,Iu=new J,qu=new U;function Mr(e,t){return e.name===t.name?qu:e.name<t.name?Iu:Mu}var ze=class extends d{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},Nt=class extends d{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},se=class extends d{constructor(t,r,n,i,s,o,l,u){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=l,this.limit=u}},Mt=class extends d{constructor(t){super(),this.kind=t}},tr=class extends d{constructor(t,r){super(),this.kind=t,this.delay=r}},rr=class extends d{constructor(t,r){super(),this.kind=t,this.delay=r}};function Ws(e,t){if(e instanceof Mt&&t instanceof Mt)return!0;if(e instanceof tr&&t instanceof tr&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else if(e instanceof rr&&t instanceof rr&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else return!1}function Fu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(2)&&r.head instanceof ze&&r.head.name==="class"&&r.tail.head instanceof ze&&r.tail.head.name==="class"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,l=r.tail.tail,u=s+" "+o,c=new ze(i,"class",u);e=$(c,l),t=n}else if(r.atLeastLength(2)&&r.head instanceof ze&&r.head.name==="style"&&r.tail.head instanceof ze&&r.tail.head.name==="style"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,l=r.tail.tail,u=s+";"+o,c=new ze(i,"style",u);e=$(c,l),t=n}else{let i=r.head;e=r.tail,t=$(i,n)}}}function Hs(e){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=Yi(e,(n,i)=>Mr(i,n));return Fu(r,z)}}var Un=0;function Vs(e,t){return new ze(Un,e,t)}var Pn=1;function Js(e,t){return new Nt(Pn,e,t)}var Fn=2;function Ys(e,t,r,n,i,s,o){return new se(Fn,e,t,r,n,i,s,o)}var Rn=1;var Gn=2;function Ee(e,t){return Vs(e,t)}function Gu(e,t){return Js(e,t)}function Xs(e,t){return t?Ee(e,""):Gu(e,Nn(!1))}function Wn(e){return Xs("autofocus",e)}function Q(e){return Ee("class",e)}function Ks(){return Q("")}function Qs(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head[1]){let i=r.head[0],s=r.tail;return n+i+" "+Qs(s,n)}else e=r.tail,t=n}}function Hn(e){return Q(Qs(e,""))}function Vn(e){return Ee("id",e)}function Zs(e,t){return e===""||t===""?Q(""):Ee("style",e+":"+t+";")}function eo(e){return Ee("href",e)}function Jn(e){return Xs("checked",e)}function to(e){return Ee("for",e)}function ro(e){return Ee("placeholder",e)}function Yn(e){return Ee("type",e)}function no(e){return Ee("value",e)}var Ir=class extends d{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var io=new Ir(a([]),a([]),a([]));function me(){return io}function so(e){let t=n=>{let i=n.dispatch;return e(i)},r=io;return new Ir(a([t]),r.before_paint,r.after_paint)}function pe(){return null}function It(e,t){let r=e?.get(t);return r!=null?new S(r):new L(void 0)}function xt(e,t,r){return e??=new Map,e.set(t,r),e}function Xn(e,t){return e?.delete(t),e}var Dr=class extends d{},Ur=class extends d{constructor(t,r){super(),this.key=t,this.parent=r}},Kn=class extends d{constructor(t,r){super(),this.index=t,this.parent=r}};function Hu(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(jn(r,i))return!0;e=r,t=s}}}function ot(e,t,r){return r===""?new Kn(t,e):new Ur(r,e)}var Qn=new Dr,Zn=`
`,ei="	";function oo(e,t){for(;;){let r=e,n=t;if(r instanceof Dr){if(n.hasLength(0))return"";{let i=n.tail;return as(i)}}else if(r instanceof Ur){let i=r.key;e=r.parent,t=$(ei,$(i,n))}else{let i=r.index;e=r.parent,t=$(Zn,$(ge(i),n))}}}function Vu(e){return oo(e,a([]))}function lo(e,t){return t.hasLength(0)?!1:Hu(Vu(e),t)}var ti="\f";function ri(e,t){return oo(e,a([ti,t]))}var de=class extends d{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},Se=class extends d{constructor(t,r,n,i,s,o,l,u,c,f){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=l,this.keyed_children=u,this.self_closing=c,this.void=f}},Ve=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},Ne=class extends d{constructor(t,r,n,i,s,o,l){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=l}};function Xu(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function ke(e){return e instanceof de?1+e.children_count:1}var ni=0;function ii(e,t,r,n,i){return new de(ni,e,t,r,n,i)}var si=1;function sr(e,t,r,n,i,s,o,l,u){return new Se(si,e,t,r,n,Hs(i),s,o,l,u||Xu(n,r))}var oi=2;function li(e,t,r){return new Ve(oi,e,t,r)}var co=3;function fo(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(o.hasLength(0))return[q(u),c];if(o.atLeastLength(1)&&o.head instanceof de&&o.head.key===""){let f=o.head,p=o.tail,h=s+"::"+ge(l),x=fo(h,f.children,0,z,pe()),m=x[0],g=x[1],_,v=f;_=new de(v.kind,v.key,v.mapper,m,g,v.children_count);let O=$(_,u),y=l+1;e=s,t=p,r=y,n=O,i=c}else if(o.atLeastLength(1)&&o.head.key!==""){let f=o.head,p=o.tail,h=s+"::"+f.key,x=or(h,f),m=$(x,u),g=xt(c,h,x),_=l+1;e=s,t=p,r=_,n=m,i=g}else{let f=o.head,p=o.tail,h=$(f,u),x=l+1;e=s,t=p,r=x,n=h,i=c}}}function or(e,t){if(t instanceof Se){let r=t;return new Se(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof Ve){let r=t;return new Ve(r.kind,e,r.mapper,r.content)}else if(t instanceof Ne){let r=t;return new Ne(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}else{let r=t.children,n=fo(e,r,0,z,pe()),i=n[0],s=n[1],o=t;return new de(o.kind,e,o.mapper,i,s,o.children_count)}}var wt=class extends d{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},ui=class extends d{constructor(t,r){super(),this.kind=t,this.content=r}},ci=class extends d{constructor(t,r){super(),this.kind=t,this.inner_html=r}},fi=class extends d{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},ai=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},pi=class extends d{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},di=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},_i=class extends d{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},hi=class extends d{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function mi(e,t,r,n){return new wt(e,t,r,n)}var $i=0;function ao(e){return new ui($i,e)}var xi=1;function po(e){return new ci(xi,e)}var wi=2;function bi(e,t){return new fi(wi,e,t)}var Pr=3;function _o(e,t,r){return new ai(Pr,e,t,r)}var gi=4;function ho(e,t){return new pi(gi,e,t)}var Fr=5;function yi(e,t,r){return new di(Fr,e,t,r)}var Rr=6;function vi(e,t){return new _i(Rr,e,t)}var Gr=7;function mo(e,t){return new hi(Gr,e,t)}var Jr=class extends d{constructor(t,r){super(),this.patch=t,this.events=r}},ki=class extends d{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function Qu(e,t,r,n){return r==="input"&&t===""?Hr(e,n):r==="select"&&t===""?Hr(e,n):r==="textarea"&&t===""?Hr(e,n):!1}function xo(e,t,r,n,i,s,o,l){for(;;){let u=e,c=t,f=r,p=n,h=i,x=s,m=o,g=l;if(h.hasLength(0)&&x.hasLength(0))return new ki(m,g,p);if(h.atLeastLength(1)&&h.head instanceof se&&x.hasLength(0)){let _=h.head,v=h.head.name,b=h.tail,O=$(_,g),y=Wr(p,c,v);e=u,t=c,r=f,n=y,i=b,s=x,o=m,l=O}else if(h.atLeastLength(1)&&x.hasLength(0)){let _=h.head,v=h.tail,b=$(_,g);e=u,t=c,r=f,n=p,i=v,s=x,o=m,l=b}else if(h.hasLength(0)&&x.atLeastLength(1)&&x.head instanceof se){let _=x.head,v=x.head.name,b=x.head.handler,O=x.tail,y=$(_,m),w=lr(p,f,c,v,b);e=u,t=c,r=f,n=w,i=h,s=O,o=y,l=g}else if(h.hasLength(0)&&x.atLeastLength(1)){let _=x.head,v=x.tail,b=$(_,m);e=u,t=c,r=f,n=p,i=h,s=v,o=b,l=g}else{let _=h.head,v=h.tail,b=x.head,O=x.tail,y=Mr(_,b);if(_ instanceof ze&&y instanceof U&&b instanceof ze){let w,k=b.name;k==="value"||k==="checked"||k==="selected"?w=u||_.value!==b.value:w=_.value!==b.value;let E=w,A;E?A=$(b,m):A=m;let M=A;e=u,t=c,r=f,n=p,i=v,s=O,o=M,l=g}else if(_ instanceof Nt&&y instanceof U&&b instanceof Nt){let w,k=b.name;k==="scrollLeft"||k==="scrollRight"?w=!0:k==="value"?w=u||!N(_.value,b.value):k==="checked"?w=u||!N(_.value,b.value):k==="selected"?w=u||!N(_.value,b.value):w=!N(_.value,b.value);let E=w,A;E?A=$(b,m):A=m;let M=A;e=u,t=c,r=f,n=p,i=v,s=O,o=M,l=g}else if(_ instanceof se&&y instanceof U&&b instanceof se){let w=b.name,k=b.handler,E=_.prevent_default!==b.prevent_default||_.stop_propagation!==b.stop_propagation||_.immediate!==b.immediate||!Ws(_.limit,b.limit),A;E?A=$(b,m):A=m;let M=A,P=lr(p,f,c,w,k);e=u,t=c,r=f,n=P,i=v,s=O,o=M,l=g}else if(_ instanceof se&&y instanceof U){let w=_.name,k=$(b,m),E=$(_,g),A=Wr(p,c,w);e=u,t=c,r=f,n=A,i=v,s=O,o=k,l=E}else if(y instanceof U&&b instanceof se){let w=b.name,k=b.handler,E=$(b,m),A=$(_,g),M=lr(p,f,c,w,k);e=u,t=c,r=f,n=M,i=v,s=O,o=E,l=A}else if(y instanceof U){let w=$(b,m),k=$(_,g);e=u,t=c,r=f,n=p,i=v,s=O,o=w,l=k}else if(y instanceof re&&b instanceof se){let w=b.name,k=b.handler,E=$(b,m),A=lr(p,f,c,w,k);e=u,t=c,r=f,n=A,i=h,s=O,o=E,l=g}else if(y instanceof re){let w=$(b,m);e=u,t=c,r=f,n=p,i=h,s=O,o=w,l=g}else if(_ instanceof se&&y instanceof J){let w=_.name,k=$(_,g),E=Wr(p,c,w);e=u,t=c,r=f,n=E,i=v,s=x,o=m,l=k}else{let w=$(_,g);e=u,t=c,r=f,n=p,i=v,s=x,o=m,l=w}}}}function ji(e,t,r,n,i,s,o,l,u,c,f,p,h,x){for(;;){let m=e,g=t,_=r,v=n,b=i,O=s,y=o,w=l,k=u,E=c,A=f,M=p,P=h,oe=x;if(m.hasLength(0)&&_.hasLength(0))return new Jr(new wt(k,y,A,M),oe);if(m.atLeastLength(1)&&_.hasLength(0)){let B=m.head,H=m.tail,j;B.key===""||!Mn(b,B.key)?j=y+ke(B):j=y;let V=j,ee=ur(oe,E,w,B);e=H,t=g,r=_,n=v,i=b,s=O,o=V,l=w,u=k,c=E,f=A,p=M,h=P,x=ee}else if(m.hasLength(0)&&_.atLeastLength(1)){let B=bo(oe,P,E,w,_),H=vi(_,w-O),j=$(H,A);return new Jr(new wt(k,y,j,M),B)}else if(m.atLeastLength(1)&&_.atLeastLength(1)&&m.head.key!==_.head.key){let B=m.head,H=m.tail,j=_.head,le=_.tail,V=It(g,j.key),ee=It(v,B.key),xe=Mn(b,B.key);if(ee.isOk()&&V.isOk()&&xe)e=H,t=g,r=_,n=v,i=b,s=O-ke(B),o=y,l=w,u=k,c=E,f=A,p=M,h=P,x=oe;else if(ee.isOk()&&V.isOk()){let F=V[0],I=ke(j),Y=w-O,te=_o(j.key,Y,I),ue=$(te,A),Ae=Ms(b,j.key),Ie=O+I;e=$(F,m),t=g,r=_,n=v,i=Ae,s=Ie,o=y,l=w,u=k,c=E,f=ue,p=M,h=P,x=oe}else if(!ee.isOk()&&V.isOk()){let F=ke(B),I=O-F,Y=ur(oe,E,w,B),te=ho(B.key,F),ue=$(te,A);e=H,t=g,r=_,n=v,i=b,s=I,o=y,l=w,u=k,c=E,f=ue,p=M,h=P,x=Y}else if(ee.isOk()&&!V.isOk()){let F=w-O,I=ke(j),Y=Vr(oe,P,E,w,j),te=vi(a([j]),F),ue=$(te,A);e=m,t=g,r=le,n=v,i=b,s=O+I,o=y,l=w+I,u=k,c=E,f=ue,p=M,h=P,x=Y}else{let F=ke(B),I=ke(j),Y=yi(w-O,F,j),te,Ae=ur(oe,E,w,B);te=Vr(Ae,P,E,w,j);let Ie=te;e=H,t=g,r=le,n=v,i=b,s=O-F+I,o=y,l=w+I,u=k,c=E,f=$(Y,A),p=M,h=P,x=Ie}}else if(m.atLeastLength(1)&&m.head instanceof de&&_.atLeastLength(1)&&_.head instanceof de){let B=m.head,H=m.tail,j=_.head,le=_.tail,V=w+1,ee=B.children_count,xe=j.children_count,F=lt(P,j.mapper),I=ji(B.children,B.keyed_children,j.children,j.keyed_children,Zt(),O,0,V,-1,E,z,M,F,oe),Y;if(I.patch.removed>0){let Ae=V+xe-O,Ie=mo(Ae,I.patch.removed);Y=Xe(I.patch.changes,$(Ie,A))}else Y=Xe(I.patch.changes,A);let ue=Y;e=H,t=g,r=le,n=v,i=b,s=O+xe-ee,o=y,l=V+xe,u=k,c=E,f=ue,p=I.patch.children,h=P,x=I.events}else if(m.atLeastLength(1)&&m.head instanceof Se&&_.atLeastLength(1)&&_.head instanceof Se&&m.head.namespace===_.head.namespace&&m.head.tag===_.head.tag){let B=m.head,H=m.tail,j=_.head,le=_.tail,V=lt(P,j.mapper),ee=ot(E,w,j.key),xe=Qu(oe,j.namespace,j.tag,ee),F=xo(xe,ee,V,oe,B.attributes,j.attributes,z,z),I=F.added,Y=F.removed,te=F.events,ue;I.hasLength(0)&&Y.hasLength(0)?ue=z:ue=a([bi(I,Y)]);let Ae=ue,Ie=ji(B.children,B.keyed_children,j.children,j.keyed_children,Zt(),0,0,0,w,ee,Ae,z,V,te),kt,tt=Ie.patch;tt instanceof wt&&tt.removed===0&&tt.changes.hasLength(0)&&tt.children.hasLength(0)?kt=M:kt=$(Ie.patch,M);let cn=kt;e=H,t=g,r=le,n=v,i=b,s=O,o=y,l=w+1,u=k,c=E,f=A,p=cn,h=P,x=Ie.events}else if(m.atLeastLength(1)&&m.head instanceof Ve&&_.atLeastLength(1)&&_.head instanceof Ve&&m.head.content===_.head.content){let B=m.head,H=m.tail,j=_.head,le=_.tail;e=H,t=g,r=le,n=v,i=b,s=O,o=y,l=w+1,u=k,c=E,f=A,p=M,h=P,x=oe}else if(m.atLeastLength(1)&&m.head instanceof Ve&&_.atLeastLength(1)&&_.head instanceof Ve){let B=m.tail,H=_.head,j=_.tail,le=mi(w,0,a([ao(H.content)]),z);e=B,t=g,r=j,n=v,i=b,s=O,o=y,l=w+1,u=k,c=E,f=A,p=$(le,M),h=P,x=oe}else if(m.atLeastLength(1)&&m.head instanceof Ne&&_.atLeastLength(1)&&_.head instanceof Ne){let B=m.head,H=m.tail,j=_.head,le=_.tail,V=lt(P,j.mapper),ee=ot(E,w,j.key),xe=xo(!1,ee,V,oe,B.attributes,j.attributes,z,z),F=xe.added,I=xe.removed,Y=xe.events,te;F.hasLength(0)&&I.hasLength(0)?te=z:te=a([bi(F,I)]);let ue=te,Ae;B.inner_html===j.inner_html?Ae=ue:Ae=$(po(j.inner_html),ue);let kt=Ae,tt;kt.hasLength(0)?tt=M:tt=$(mi(w,0,kt,a([])),M);let cn=tt;e=H,t=g,r=le,n=v,i=b,s=O,o=y,l=w+1,u=k,c=E,f=A,p=cn,h=P,x=Y}else{let B=m.head,H=m.tail,j=_.head,le=_.tail,V=ke(B),ee=ke(j),xe=yi(w-O,V,j),F,Y=ur(oe,E,w,B);F=Vr(Y,P,E,w,j);let te=F;e=H,t=g,r=le,n=v,i=b,s=O-V+ee,o=y,l=w+ee,u=k,c=E,f=$(xe,A),p=M,h=P,x=te}}}function Li(e,t,r){return ji(a([t]),pe(),a([r]),pe(),Zt(),0,0,0,0,Qn,z,z,ie,wo(e))}var Xr=class{offset=0;#e=null;#s=()=>{};#u=!1;constructor(t,r,{useServerEvents:n=!1}={}){this.#e=t,this.#s=r,this.#u=n}mount(t){Yr(this.#e,this.#l(t))}#r=[];push(t){let r=this.offset;r&&(Ze(t.changes,n=>{switch(n.kind){case Rr:case Pr:n.before=(n.before|0)+r;break;case Gr:case Fr:n.from=(n.from|0)+r;break}}),Ze(t.children,n=>{n.index=(n.index|0)+r})),this.#r.push({node:this.#e,patch:t}),this.#o()}#o(){let t=this;for(;t.#r.length;){let{node:r,patch:n}=t.#r.pop();Ze(n.changes,i=>{switch(i.kind){case Rr:t.#c(r,i.children,i.before);break;case Pr:t.#p(r,i.key,i.before,i.count);break;case gi:t.#d(r,i.key,i.count);break;case Gr:t.#t(r,i.from,i.count);break;case Fr:t.#f(r,i.from,i.count,i.with);break;case $i:t.#i(r,i.content);break;case xi:t.#_(r,i.inner_html);break;case wi:t.#a(r,i.added,i.removed);break}}),n.removed&&t.#t(r,r.childNodes.length-n.removed,n.removed),Ze(n.children,i=>{t.#r.push({node:fr(r,i.index),patch:i})})}}#c(t,r,n){let i=vo();Ze(r,s=>{let o=this.#l(s);zi(t,o),Yr(i,o)}),Oi(t,i,fr(t,n))}#p(t,r,n,i){let s=ko(t,r),o=fr(t,n);for(let l=0;l<i&&s!==null;++l){let u=s.nextSibling;Is?t.moveBefore(s,o):Oi(t,s,o),s=u}}#d(t,r,n){this.#n(t,ko(t,r),n)}#t(t,r,n){this.#n(t,fr(t,r),n)}#n(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[Z].key;s&&t[Z].keyedChildren.delete(s);for(let[o,{timeout:l}]of r[Z].debouncers)clearTimeout(l);t.removeChild(r),r=i}}#f(t,r,n,i){this.#t(t,r,n);let s=this.#l(i);zi(t,s),Oi(t,s,fr(t,r))}#i(t,r){t.data=r??""}#_(t,r){t.innerHTML=r??""}#a(t,r,n){Ze(n,i=>{let s=i.name;t[Z].handlers.has(s)?(t.removeEventListener(s,jo),t[Z].handlers.delete(s),t[Z].throttles.has(s)&&t[Z].throttles.delete(s),t[Z].debouncers.has(s)&&(clearTimeout(t[Z].debouncers.get(s).timeout),t[Z].debouncers.delete(s))):(t.removeAttribute(s),Oo[s]?.removed?.(t,s))}),Ze(r,i=>{this.#m(t,i)})}#l(t){switch(t.kind){case si:{let r=go(t);return this.#h(r,t),this.#c(r,t.children,0),r}case oi:{let r=yo(t.content);return et(r,t.key),r}case ni:{let r=vo(),n=yo();return et(n,t.key),Yr(r,n),Ze(t.children,i=>{Yr(r,this.#l(i))}),r}case co:{let r=go(t);return this.#h(r,t),this.#_(r,t.inner_html),r}}}#h(t,{attributes:r}){Ze(r,n=>this.#m(t,n))}#m(t,r){let n=t[Z];switch(r.kind){case Un:{let i=r.name,s=r.value??"";s!==t.getAttribute(i)&&t.setAttribute(i,s),Oo[i]?.added?.(t,s);break}case Pn:t[r.name]=r.value;break;case Fn:{n.handlers.has(r.name)||t.addEventListener(r.name,jo,{passive:!r.prevent_default});let i=r.prevent_default,s=r.stop_propagation,o=r.immediate,l=Array.isArray(r.include)?r.include:[];if(r.limit?.kind===Gn){let u=n.throttles.get(r.name)??{last:0,delay:r.limit.delay};n.throttles.set(r.name,u)}if(r.limit?.kind===Rn){let u=n.debouncers.get(r.name)??{timeout:null,delay:r.limit.delay};n.debouncers.set(r.name,u)}n.handlers.set(r.name,u=>{i&&u.preventDefault(),s&&u.stopPropagation();let c=u.type,f="",p=u.currentTarget;for(;p!==this.#e;){let x=p[Z].key,m=p.parentNode;if(x)f=`${ei}${x}${f}`;else{let g=m.childNodes,_=[].indexOf.call(g,p);m===this.#e&&(_-=this.offset),f=`${Zn}${_}${f}`}p=m}f=f.slice(1);let h=this.#u?Zu(u,l):u;if(n.throttles.has(c)){let x=n.throttles.get(c),m=Date.now(),g=x.last||0;m>g+x.delay?(x.last=m,this.#s(h,f,c,o)):u.preventDefault()}else if(n.debouncers.has(c)){let x=n.debouncers.get(c);clearTimeout(x.timeout),x.timeout=setTimeout(()=>{this.#s(h,f,c,o)},x.delay)}else this.#s(h,f,c,o)});break}}}},Ze=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},Yr=(e,t)=>e.appendChild(t),Oi=(e,t,r)=>e.insertBefore(t,r??null),go=({key:e,tag:t,namespace:r})=>{let n=Te.createElementNS(r||Br,t);return et(n,e),n},yo=e=>Te.createTextNode(e??""),vo=()=>Te.createDocumentFragment(),fr=(e,t)=>e.childNodes[t|0],Z=Symbol("lustre"),et=(e,t="")=>{switch(e.nodeType){case Cr:case er:e[Z]={key:t,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case Tr:e[Z]={key:t,debouncers:new Map};break}},zi=(e,t)=>{if(t.nodeType===er){for(t=t.firstChild;t;t=t.nextSibling)zi(e,t);return}let r=t[Z].key;r&&e[Z].keyedChildren.set(r,new WeakRef(t))},ko=(e,t)=>e[Z].keyedChildren.get(t).deref(),jo=e=>{let r=e.currentTarget[Z].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)},Zu=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,l=r;s<i.length;s++){if(s===i.length-1){l[i[s]]=o[i[s]];break}l=l[i[s]]??={},o=o[i[s]]}}return r},Lo=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),ec=e=>({added(t,r){t[e]=r}}),Oo={checked:Lo("checked"),selected:Lo("selected"),value:ec("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var So=e=>{let t=Ao(e);if(t===null||t.children instanceof Be){let r=zo();return et(r),e.appendChild(r),Bo()}else{if(t.children instanceof we&&t.children.tail instanceof Be)return t.children.head;{let r=zo();return et(r),e.insertBefore(r,e.firstChild),ar(t.children)}}},zo=()=>Te.createTextNode(""),Ao=e=>{switch(e.nodeType){case Cr:{let t=e.getAttribute("data-lustre-key");et(e,t),t&&e.removeAttribute("data-lustre-key");let r=e.localName,n=e.namespaceURI,i=!n||n===Br;i&&tc.includes(r)&&rc(r,e);let s=nc(e),o=Eo(e),l=i?ne(r,s,o):Ei(n,r,s,o);return t?or(t,l):l}case Tr:return et(e),Kr(e.data);case er:return et(e),e.childNodes.length>0?ar(Eo(e)):null;default:return null}},tc=["input","select","textarea"],rc=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),Te.activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},Eo=e=>{let t=z,r=e.lastChild;for(;r;){let n=Ao(r),i=r.previousSibling;n?t=new we(n,t):e.removeChild(r),r=i}return t},nc=e=>{let t=e.attributes.length,r=z;for(;t-- >0;)r=new we(ic(e.attributes[t]),r);return r},ic=e=>{let t=e.localName,r=e.value;return Ee(t,r)};var dr=()=>!!Te;var Si=(e,t)=>e===t;var pr=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#u=s,this.#c=new Xr(this.root,(o,l,u)=>{let[c,f]=Qr(this.#o,l,u,o);this.#o=c,f.isOk()&&this.dispatch(f[0],!1)}),this.#r=So(this.root),this.#o=Ai(),this.#i=!0,this.#a(n)}root=null;set offset(t){this.#c.offset=t}dispatch(t,r=!1){if(this.#i||=r,this.#p)this.#d.push(t);else{let[n,i]=this.#u(this.#e,t);this.#e=n,this.#a(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#s;#u;#r;#o;#c;#p=!1;#d=[];#t=z;#n=z;#f=null;#i=!1;#_={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root};#a(t){for(this.#p=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#_);if(this.#t=To(this.#t,t.before_paint),this.#n=To(this.#n,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#u(this.#e,this.#d.shift())}this.#p=!1,this.#i?(cancelAnimationFrame(this.#f),this.#l()):this.#f||(this.#f=requestAnimationFrame(()=>{this.#l()}))}#l(){this.#i=!1,this.#f=null;let t=this.#s(this.#e),{patch:r,events:n}=Li(this.#o,this.#r,t);if(this.#o=n,this.#r=t,this.#c.push(r),this.#t instanceof we){let i=Co(this.#t);this.#t=z,queueMicrotask(()=>{this.#i=!0,this.#a(i)})}if(this.#n instanceof we){let i=Co(this.#n);this.#n=z,requestAnimationFrame(()=>{this.#i=!0,this.#a(i)})}}};function Co(e){return{synchronous:e,after_paint:z,before_paint:z}}function To(e,t){return e instanceof Be?t:t instanceof Be?e:Xe(e,t)}var Je=class extends d{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Ai(){return new Je(pe(),z,z)}function wo(e){return new Je(e.handlers,e.next_dispatched_paths,z)}function qo(e,t,r){return Xn(e,ri(t,r))}function Wr(e,t,r){let n=qo(e.handlers,t,r),i=e;return new Je(n,i.dispatched_paths,i.next_dispatched_paths)}function No(e,t,r){return be(r,e,(n,i)=>{if(i instanceof se){let s=i.name;return qo(n,t,s)}else return n})}function Qr(e,t,r,n){let i=$(t,e.next_dispatched_paths),s,o=e;s=new Je(o.handlers,o.dispatched_paths,i);let l=s,u=It(l.handlers,t+ti+r);if(u.isOk()){let c=u[0];return[l,pt(n,c)]}else return[l,new L(a([]))]}function Hr(e,t){return lo(t,e.dispatched_paths)}function Do(e,t,r,n,i){return xt(e,ri(r,n),gr(i,t))}function lr(e,t,r,n,i){let s=Do(e.handlers,t,r,n,i),o=e;return new Je(s,o.dispatched_paths,o.next_dispatched_paths)}function Mo(e,t,r,n){return be(n,e,(i,s)=>{if(s instanceof se){let o=s.name,l=s.handler;return Do(i,t,r,o,l)}else return i})}function lt(e,t){let r=Si(e,ie),n=Si(t,ie);return n?e:r&&!n?t:i=>e(t(i))}function Io(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(l.hasLength(0))return i;{let u=l.head,c=l.tail;e=Uo(i,s,o,u),t=s,r=o+ke(u),n=c}}}function Uo(e,t,r,n){if(n instanceof Se){let i=n.attributes,s=n.children,o=ot(t,r,n.key),u=No(e,o,i);return Io(u,o,0,s)}else if(n instanceof de){let i=n.children;return Io(e,t,r+1,i)}else if(n instanceof Ne){let i=n.attributes,s=ot(t,r,n.key);return No(e,s,i)}else return e}function ur(e,t,r,n){let i=Uo(e.handlers,t,r,n),s=e;return new Je(i,s.dispatched_paths,s.next_dispatched_paths)}function Bi(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,c=i;if(c.hasLength(0))return s;{let f=c.head,p=c.tail;e=Po(s,o,l,u,f),t=o,r=l,n=u+ke(f),i=p}}}function Po(e,t,r,n,i){if(i instanceof Se){let s=i.attributes,o=i.children,l=ot(r,n,i.key),u=lt(t,i.mapper),f=Mo(e,u,l,s);return Bi(f,u,l,0,o)}else if(i instanceof de){let s=i.children,o=lt(t,i.mapper),l=n+1;return Bi(e,o,r,l,s)}else if(i instanceof Ne){let s=i.attributes,o=ot(r,n,i.key),l=lt(t,i.mapper);return Mo(e,l,o,s)}else return e}function Vr(e,t,r,n,i){let s=Po(e.handlers,t,r,n,i),o=e;return new Je(s,o.dispatched_paths,o.next_dispatched_paths)}function bo(e,t,r,n,i){let s=Bi(e.handlers,t,r,n,i),o=e;return new Je(s,o.dispatched_paths,o.next_dispatched_paths)}function ne(e,t,r){return sr("",ie,"",e,t,r,pe(),!1,!1)}function Ei(e,t,r,n){return sr("",ie,e,t,r,n,pe(),!1,!1)}function Kr(e){return li("",ie,e)}function Bo(){return li("",ie,"")}function sc(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head instanceof de){let i=r.head.children_count;e=r.tail,t=n+i}else e=r.tail,t=n+1}}function ar(e){return ii("",ie,e,pe(),sc(e,0))}function $e(e){return Kr(e)}function Ro(e,t){return ne("footer",e,t)}function Go(e,t){return ne("header",e,t)}function Wo(e,t){return ne("h1",e,t)}function Ho(e,t){return ne("section",e,t)}function Vo(e,t){return ne("div",e,t)}function Ci(e,t){return ne("li",e,t)}function Jo(e,t){return ne("ul",e,t)}function Yo(e,t){return ne("a",e,t)}function Xo(e,t){return ne("span",e,t)}function Ko(e,t){return ne("strong",e,t)}function Ti(e,t){return ne("button",e,t)}function _r(e){return ne("input",e,z)}function Ni(e,t){return ne("label",e,t)}var bt=class extends d{constructor(t){super(),this.message=t}},Dt=class extends d{constructor(t,r){super(),this.name=t,this.data=r}};var gt=class extends d{};var Mi=class extends d{constructor(t,r,n,i,s,o,l,u){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=l,this.on_form_restore=u}};function el(e){let t=new Mi(!1,!0,Ar(),Ar(),!1,Nr,Nr,Nr);return be(e,t,(r,n)=>n.apply(r))}var Ii=class e{static start({init:t,update:r,view:n},i,s){if(!dr())return new L(new Ut);let o=i instanceof HTMLElement?i:Te.querySelector(i);return o?new S(new e(o,t(s),r,n)):new L(new Zr(i))}#e;constructor(t,[r,n],i,s){this.#e=new pr(t,[r,n],s,i)}send(t){switch(t.constructor){case bt:{this.dispatch(t.message,!1);break}case Dt:{this.emit(t.name,t.data);break}case gt:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},tl=Ii.start;var qi=class extends d{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var Zr=class extends d{constructor(t){super(),this.selector=t}},Ut=class extends d{};function rl(e,t,r){return new qi(e,t,r,el(z))}function nl(e,t,r){return $r(!dr(),new L(new Ut),()=>tl(e,t,r))}function pc(e){let t=[pe(),z,0],r=be(e,t,(o,l)=>{let u=o[0],c=o[1],f=o[2],p=l[0],h=l[1],x=or(p,h),m;return p===""?m=u:m=xt(u,p,x),[m,$(x,c),f+1]}),n=r[0],i=r[1],s=r[2];return[n,q(i),s]}function dc(e,t,r){let n=pc(r),i=n[0],s=n[1];return sr("",ie,"",e,t,s,i,!1,!1)}function il(e,t){return dc("ul",e,t)}function hc(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function yt(e,t){return Ys(e,t,z,!1,!1,hc(e),new Mt(0))}function en(e){return yt("click",Ke(e))}function sl(e){return yt("input",St(a(["target","value"]),Et,t=>Ke(e(t))))}function Di(e){return yt("change",St(a(["target","checked"]),ws,t=>Ke(e(t))))}function ol(e){return yt("blur",Ke(e))}var ll=e=>{let t=document.getElementById(e);t&&(t.value="")};var _e=class extends d{constructor(t,r,n,i,s){super(),this.entries=t,this.active=r,this.completed=n,this.uid=i,this.visibility=s}},Me=class extends d{constructor(t,r,n,i,s){super(),this.description=t,this.completed=r,this.editing=n,this.deleted=i,this.id=s}},hr=class extends d{},mr=class extends d{},tn=class extends d{},rn=class extends d{constructor(t){super(),this.value=t}},nn=class extends d{},sn=class extends d{constructor(t){super(),this.completed=t}},on=class extends d{constructor(t){super(),this.visibility=t}},ln=class extends d{constructor(t){super(),this.index=t}},un=class extends d{constructor(t,r){super(),this.index=t,this.completed=r}},vt=class extends d{constructor(t,r){super(),this.index=t,this.editing=r}},Pi=class extends d{constructor(t,r){super(),this.index=t,this.description=r}};function $c(e,t){return new Me(e,!1,!1,!1,t)}function xc(e){return[new _e(As(),0,0,0,new hr),me()]}function wc(e){let t;e===1?t="item":t="items";let r=t;return Xo(a([Q("todo-count")]),a([Ko(a([]),a([$e(ge(e))])),$e(" "),$e(r),$e(" left")]))}function Ui(e,t,r){return Ci(a([en(new on(t))]),a([Yo(a([eo(e),Hn(a([["selected",N(t,r)]]))]),a([t instanceof hr?$e("All"):t instanceof mr?$e("Active"):$e("Completed")]))]))}function bc(e){return Jo(a([Q("filters")]),a([Ui("#/",new hr,e),Ui("#/active",new mr,e),Ui("#/completed",new tn,e)]))}function Fi(e){return e?Zs("display","none"):Ks()}function gc(e){return Ti(a([Q("clear-completed"),Fi(e===0),en(new nn)]),a([$e("Clear completed ("),$e(ge(e)),$e(")")]))}function ul(e){return yt("keydown",vr("keyCode",yr,t=>St(a(["target","value"]),Et,r=>t===13?Ke(e(r)):zn(e(r),"not enter"))))}function yc(){return Go(a([Q("header")]),a([Wo(a([]),a([$e("todos")])),_r(a([Vn("new-todo"),Q("new-todo"),ro("What needs to be done?"),Wn(!0),ul(e=>new rn(e))]))]))}function vc(e){return yt("dblclick",Ke(e))}function kc(e){let t=e.description,r=e.completed,n=e.editing,i=e.id;return Ci(a([Hn(a([["completed",r],["editing",n]]))]),a([e.editing?_r(a([Q("edit"),no(t),Wn(!0),sl(o=>new Pi(i,o)),ol(new vt(i,!1)),ul(o=>new vt(i,!1))])):Vo(a([Q("view")]),a([_r(a([Q("toggle"),Yn("checkbox"),Jn(r),Di(o=>new un(i,o))])),Ni(a([vc(new vt(i,!0))]),a([$e(t)])),Ti(a([Q("destroy"),en(new ln(i))]),a([]))]))]))}function jc(e){let t=e.active+e.completed;return Ho(a([Q("main"),Fi(t<=0)]),a([_r(a([Vn("toggle-all"),Q("toggle-all"),Yn("checkbox"),Jn(e.active<=0),Di(r=>new sn(r))])),Ni(a([to("toggle-all")]),a([$e("Mark all as complete")])),il(a([Q("todo-list")]),Cs(e.entries,a([]),(r,n)=>{let i,s=e.visibility;return s instanceof tn?i=n.completed&&!n.deleted:s instanceof mr?i=!n.completed&&!n.deleted:i=!n.deleted,i?$([ge(n.id),kc(n)],r):r}))]))}function Lc(e){let t=e.active+e.completed;return ar(a([yc(),jc(e),Ro(a([Q("footer"),Fi(t<=0)]),a([wc(e.active),bc(e.visibility),gc(e.completed)]))]))}function Oc(e){return so(t=>ll(e))}function zc(e,t){if(t instanceof rn){let r=t.value,n=Ln(r);return $r(n==="",[e,me()],()=>{let i=Bs(e.entries,$c(n,e.uid)),s=e.uid+1,o=e.active+1,l,u=e;return l=new _e(i,o,u.completed,s,u.visibility),[l,Oc("new-todo")]})}else if(t instanceof on){let r=t.visibility;return[(()=>{let n=e;return new _e(n.entries,n.active,n.completed,n.uid,r)})(),me()]}else if(t instanceof sn){let r=t.completed,n=Cn(e.entries,l=>{let u=l;return new Me(u.description,r,u.editing,u.deleted,u.id)}),i=e.completed+e.active,s;if(r){let l=e;s=new _e(n,0,i,l.uid,l.visibility)}else{let l=e;s=new _e(n,i,0,l.uid,l.visibility)}return[s,me()]}else if(t instanceof nn){let r=Cn(e.entries,n=>{if(n instanceof Me&&n.completed){let i=n;return new Me(i.description,i.completed,i.editing,!0,i.id)}else return n});return[(()=>{let n=e;return new _e(r,n.active,0,n.uid,n.visibility)})(),me()]}else if(t instanceof ln){let r=t.index,n=An(e.entries,r);if(n.isOk()&&!n[0].deleted){let i=n[0],s=Bn(e.entries,r,(()=>{let c=i;return new Me(c.description,c.completed,c.editing,!0,c.id)})()),o;if(i.completed){let c=e;o=new _e(s,c.active,e.completed-1,c.uid,c.visibility)}else{let c=e;o=new _e(s,e.active-1,c.completed,c.uid,c.visibility)}return[o,me()]}else return[e,me()]}else if(t instanceof un){let r=t.index,n=t.completed,i=An(e.entries,r);if(i.isOk()&&i[0].completed!==n){let s=i[0],o=Bn(e.entries,r,(()=>{let c=s;return new Me(c.description,n,c.editing,c.deleted,c.id)})()),l;if(n){let c=e.active-1,f=e.completed+1,p=e;l=new _e(o,c,f,p.uid,p.visibility)}else{let c=e.active+1,f=e.completed-1,p=e;l=new _e(o,c,f,p.uid,p.visibility)}return[l,me()]}else return[e,me()]}else if(t instanceof vt&&t.editing){let r=t.index,n=Xt(e.entries,r,i=>{let s=i;return new Me(s.description,s.completed,!0,s.deleted,s.id)});return[(()=>{let i=e;return new _e(n,i.active,i.completed,i.uid,i.visibility)})(),me()]}else if(t instanceof vt&&!t.editing){let r=t.index,n=Xt(e.entries,r,i=>{let s=Ln(i.description),o=i;return new Me(s,o.completed,!1,o.deleted,o.id)});return[(()=>{let i=e;return new _e(n,i.active,i.completed,i.uid,i.visibility)})(),me()]}else{let r=t.index,n=t.description,i=Xt(e.entries,r,s=>{let o=s;return new Me(n,o.completed,o.editing,o.deleted,o.id)});return[(()=>{let s=e;return new _e(i,s.active,s.completed,s.uid,s.visibility)})(),me()]}}function cl(){let e=rl(xc,zc,Lc),t=nl(e,".todoapp",void 0);if(!t.isOk())throw xr("let_assert","todomvc",16,"main","Pattern match failed, no pattern matched the value.",{value:t})}cl();
