function jn(e,t,n){return e?t:n()}var _=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}},Je=class{static fromArray(t,n){let r=n||new b;for(let i=t.length-1;i>=0;--i)r=new be(t[i],r);return r}[Symbol.iterator](){return new mr(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof b}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}};function d(e,t){return new be(e,t)}function a(e,t){return Je.fromArray(e,t)}var mr=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof b)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}},b=class extends Je{},be=class extends Je{constructor(t,n){super(),this.head=t,this.tail=n}},At=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Yt(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let r=this.bitSize%8;if(r){let i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){let s=Yt(this.rawBuffer,this.bitOffset,i),o=Yt(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let r=this.bitSize%8;if(r){let i=Yt(this.rawBuffer,this.bitOffset,n),s=Yt(t.rawBuffer,t.bitOffset,n),o=8-r;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Zi("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Zi("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Yt(e,t,n){if(t===0)return e[n]??0;{let r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}var Qi={};function Zi(e,t){Qi[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Qi[e]=!0)}var Bt=class e extends _{static isResult(t){return t instanceof e}},v=class extends Bt{constructor(t){super(),this[0]=t}isOk(){return!0}},B=class extends Bt{constructor(t){super(),this[0]=t}isOk(){return!1}};function R(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!es(r)||!es(i)||!gl(r,i)||$l(r,i)||hl(r,i)||xl(r,i)||wl(r,i)||bl(r,i)||yl(r,i))return!1;let o=Object.getPrototypeOf(r);if(o!==null&&typeof o.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[l,u]=ml(r);for(let c of l(r))n.push(u(r,c),u(i,c))}return!0}function ml(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function $l(e,t){return e instanceof Date&&(e>t||e<t)}function hl(e,t){return!(e instanceof At)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function xl(e,t){return Array.isArray(e)&&e.length!==t.length}function wl(e,t){return e instanceof Map&&e.size!==t.size}function bl(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function yl(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function es(e){return typeof e=="object"&&e!==null}function gl(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function En(e,t,n,r,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=n,o.function=r,o.fn=r;for(let l in s)o[l]=s[l];return o}var Q=class extends _{},Z=class extends _{},nt=class extends _{};var ne=class extends _{constructor(t){super(),this[0]=t}},ye=class extends _{};function Xt(e,t,n){return ts(t,n,e)}var ie=class extends _{},dt=class extends _{};function Qt(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let i=n.head;e=n.tail,t=d(i,r)}}}function V(e){return Qt(e,a([]))}function zl(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof b)return V(s);{let o=r.head;e=r.tail,t=i,n=d(i(o),s)}}}function _t(e,t){return zl(e,t,a([]))}function Sl(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let i=n.head;e=n.tail,t=d(i,r)}}}function Ye(e,t){return Sl(V(e),t)}function ge(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof b)return i;{let o=r.head;e=r.tail,t=s(i,o),n=s}}}function Al(e,t,n,r,i,s){for(;;){let o=e,l=t,u=n,c=r,f=i,p=s,$=d(f,u);if(o instanceof b)return c instanceof ie?d(V($),p):d($,p);{let w=o.head,x=o.tail,g=l(f,w);if(c instanceof ie)if(g instanceof Q)e=x,t=l,n=$,r=c,i=w,s=p;else if(g instanceof Z)e=x,t=l,n=$,r=c,i=w,s=p;else{let m;c instanceof ie?m=d(V($),p):m=d($,p);let j=m;if(x instanceof b)return d(a([w]),j);{let y=x.head,k=x.tail,S,h=l(w,y);h instanceof Q?S=new ie:h instanceof Z?S=new ie:S=new dt;let E=S;e=k,t=l,n=a([w]),r=E,i=y,s=j}}else if(g instanceof Q){let m;c instanceof ie?m=d(V($),p):m=d($,p);let j=m;if(x instanceof b)return d(a([w]),j);{let y=x.head,k=x.tail,S,h=l(w,y);h instanceof Q?S=new ie:h instanceof Z?S=new ie:S=new dt;let E=S;e=k,t=l,n=a([w]),r=E,i=y,s=j}}else if(g instanceof Z){let m;c instanceof ie?m=d(V($),p):m=d($,p);let j=m;if(x instanceof b)return d(a([w]),j);{let y=x.head,k=x.tail,S,h=l(w,y);h instanceof Q?S=new ie:h instanceof Z?S=new ie:S=new dt;let E=S;e=k,t=l,n=a([w]),r=E,i=y,s=j}}else e=x,t=l,n=$,r=c,i=w,s=p}}}function Bl(e,t,n,r){for(;;){let i=e,s=t,o=n,l=r;if(i instanceof b)return Qt(s,l);if(s instanceof b)return Qt(i,l);{let u=i.head,c=i.tail,f=s.head,p=s.tail,$=o(u,f);$ instanceof Q?(e=c,t=s,n=o,r=d(u,l)):$ instanceof Z?(e=i,t=p,n=o,r=d(f,l)):(e=i,t=p,n=o,r=d(f,l))}}}function Cl(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof b)return V(s);{let o=r.tail;if(o instanceof b){let l=r.head;return V(d(V(l),s))}else{let l=r.head,u=o.head,c=o.tail,f=Bl(l,u,i,a([]));e=c,t=i,n=d(f,s)}}}}function Tl(e,t,n,r){for(;;){let i=e,s=t,o=n,l=r;if(i instanceof b)return Qt(s,l);if(s instanceof b)return Qt(i,l);{let u=i.head,c=i.tail,f=s.head,p=s.tail,$=o(u,f);$ instanceof Q?(e=i,t=p,n=o,r=d(f,l)):$ instanceof Z?(e=c,t=s,n=o,r=d(u,l)):(e=c,t=s,n=o,r=d(u,l))}}}function Ol(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof b)return V(s);{let o=r.tail;if(o instanceof b){let l=r.head;return V(d(V(l),s))}else{let l=r.head,u=o.head,c=o.tail,f=Tl(l,u,i,a([]));e=c,t=i,n=d(f,s)}}}}function Nl(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof b)return a([]);if(i instanceof ie){if(r.tail instanceof b)return r.head;e=Cl(r,s,a([])),t=new dt,n=s}else if(r.tail instanceof b){let l=r.head;return V(l)}else e=Ol(r,s,a([])),t=new ie,n=s}}function rs(e,t){if(e instanceof b)return a([]);{let n=e.tail;if(n instanceof b){let r=e.head;return a([r])}else{let r=e.head,i=n.head,s=n.tail,o,l=t(r,i);l instanceof Q?o=new ie:l instanceof Z?o=new ie:o=new dt;let u=o,c=Al(s,t,a([r]),u,i,a([]));return Nl(c,new ie,t)}}}function ls(e){return e instanceof v}var cs=new WeakMap,xr=new DataView(new ArrayBuffer(8)),wr=0;function br(e){let t=cs.get(e);if(t!==void 0)return t;let n=wr++;return wr===2147483647&&(wr=0),cs.set(e,n),n}function yr(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function vr(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function as(e){xr.setFloat64(0,e);let t=xr.getInt32(0),n=xr.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function Jl(e){return vr(e.toString())}function Yl(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return br(e);if(e instanceof Date)return as(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+ze(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+ze(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+yr(ze(r),ze(i))|0});else{let r=Object.keys(e);for(let i=0;i<r.length;i++){let s=r[i],o=e[s];n=n+yr(ze(o),vr(s))|0}}return n}function ze(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return as(e);case"string":return vr(e);case"bigint":return Jl(e);case"object":return Yl(e);case"symbol":return br(e);case"function":return br(e);default:return 0}}var De=5,kr=Math.pow(2,De),Xl=kr-1,Kl=kr/2,Ql=kr/4,_e=0,Le=1,ke=2,$t=3,jr={type:ke,bitmap:0,array:[]};function tn(e,t){return e>>>t&Xl}function Sn(e,t){return 1<<tn(e,t)}function Zl(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Er(e,t){return Zl(e&t-1)}function Se(e,t,n){let r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function eu(e,t,n){let r=e.length,i=new Array(r+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=n;s<r;)i[o++]=e[s++];return i}function gr(e,t){let n=e.length,r=new Array(n-1),i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function ps(e,t,n,r,i,s){let o=ze(t);if(o===r)return{type:$t,hash:o,array:[{type:_e,k:t,v:n},{type:_e,k:i,v:s}]};let l={val:!1};return nn(zr(jr,e,o,t,n,l),e,r,i,s,l)}function nn(e,t,n,r,i,s){switch(e.type){case Le:return tu(e,t,n,r,i,s);case ke:return zr(e,t,n,r,i,s);case $t:return nu(e,t,n,r,i,s)}}function tu(e,t,n,r,i,s){let o=tn(n,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:Le,size:e.size+1,array:Se(e.array,o,{type:_e,k:r,v:i})};if(l.type===_e)return R(r,l.k)?i===l.v?e:{type:Le,size:e.size,array:Se(e.array,o,{type:_e,k:r,v:i})}:(s.val=!0,{type:Le,size:e.size,array:Se(e.array,o,ps(t+De,l.k,l.v,n,r,i))});let u=nn(l,t+De,n,r,i,s);return u===l?e:{type:Le,size:e.size,array:Se(e.array,o,u)}}function zr(e,t,n,r,i,s){let o=Sn(n,t),l=Er(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[l];if(u.type!==_e){let f=nn(u,t+De,n,r,i,s);return f===u?e:{type:ke,bitmap:e.bitmap,array:Se(e.array,l,f)}}let c=u.k;return R(r,c)?i===u.v?e:{type:ke,bitmap:e.bitmap,array:Se(e.array,l,{type:_e,k:r,v:i})}:(s.val=!0,{type:ke,bitmap:e.bitmap,array:Se(e.array,l,ps(t+De,c,u.v,n,r,i))})}else{let u=e.array.length;if(u>=Kl){let c=new Array(32),f=tn(n,t);c[f]=zr(jr,t+De,n,r,i,s);let p=0,$=e.bitmap;for(let w=0;w<32;w++){if(($&1)!==0){let x=e.array[p++];c[w]=x}$=$>>>1}return{type:Le,size:u+1,array:c}}else{let c=eu(e.array,l,{type:_e,k:r,v:i});return s.val=!0,{type:ke,bitmap:e.bitmap|o,array:c}}}}function nu(e,t,n,r,i,s){if(n===e.hash){let o=Sr(e,r);if(o!==-1)return e.array[o].v===i?e:{type:$t,hash:n,array:Se(e.array,o,{type:_e,k:r,v:i})};let l=e.array.length;return s.val=!0,{type:$t,hash:n,array:Se(e.array,l,{type:_e,k:r,v:i})}}return nn({type:ke,bitmap:Sn(e.hash,t),array:[e]},t,n,r,i,s)}function Sr(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(R(t,e.array[r].k))return r;return-1}function zn(e,t,n,r){switch(e.type){case Le:return ru(e,t,n,r);case ke:return iu(e,t,n,r);case $t:return su(e,r)}}function ru(e,t,n,r){let i=tn(n,t),s=e.array[i];if(s!==void 0){if(s.type!==_e)return zn(s,t+De,n,r);if(R(r,s.k))return s}}function iu(e,t,n,r){let i=Sn(n,t);if((e.bitmap&i)===0)return;let s=Er(e.bitmap,i),o=e.array[s];if(o.type!==_e)return zn(o,t+De,n,r);if(R(r,o.k))return o}function su(e,t){let n=Sr(e,t);if(!(n<0))return e.array[n]}function Ar(e,t,n,r){switch(e.type){case Le:return ou(e,t,n,r);case ke:return lu(e,t,n,r);case $t:return uu(e,r)}}function ou(e,t,n,r){let i=tn(n,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===_e){if(!R(s.k,r))return e}else if(o=Ar(s,t+De,n,r),o===s)return e;if(o===void 0){if(e.size<=Ql){let l=e.array,u=new Array(e.size-1),c=0,f=0,p=0;for(;c<i;){let $=l[c];$!==void 0&&(u[f]=$,p|=1<<c,++f),++c}for(++c;c<l.length;){let $=l[c];$!==void 0&&(u[f]=$,p|=1<<c,++f),++c}return{type:ke,bitmap:p,array:u}}return{type:Le,size:e.size-1,array:Se(e.array,i,o)}}return{type:Le,size:e.size,array:Se(e.array,i,o)}}function lu(e,t,n,r){let i=Sn(n,t);if((e.bitmap&i)===0)return e;let s=Er(e.bitmap,i),o=e.array[s];if(o.type!==_e){let l=Ar(o,t+De,n,r);return l===o?e:l!==void 0?{type:ke,bitmap:e.bitmap,array:Se(e.array,s,l)}:e.bitmap===i?void 0:{type:ke,bitmap:e.bitmap^i,array:gr(e.array,s)}}return R(r,o.k)?e.bitmap===i?void 0:{type:ke,bitmap:e.bitmap^i,array:gr(e.array,s)}:e}function uu(e,t){let n=Sr(e,t);if(n<0)return e;if(e.array.length!==1)return{type:$t,hash:e.hash,array:gr(e.array,n)}}function ds(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let i=0;i<r;i++){let s=n[i];if(s!==void 0){if(s.type===_e){t(s.v,s.k);continue}ds(s,t)}}}var Ue=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let i=0;i<n.length;i++){let s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=e.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new e(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;let r=zn(this.root,0,ze(t),t);return r===void 0?n:r.v}set(t,n){let r={val:!1},i=this.root===void 0?jr:this.root,s=nn(i,0,ze(t),t,n,r);return s===this.root?this:new e(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=Ar(this.root,0,ze(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(t){return this.root===void 0?!1:zn(this.root,0,ze(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){ds(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+yr(ze(n),ze(r))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!R(t.get(r,!n),n))throw fs}),!0}catch(n){if(n===fs)return!1;throw n}}},fs=Symbol();var fu=void 0,_s={};function ve(e){return e.toString()}function Br(e,t){return e.startsWith(t)}var ms=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),au=new RegExp(`^[${ms}]*`),pu=new RegExp(`[${ms}]*$`);function $s(e){return e.replace(au,"")}function hs(e){return e.replace(pu,"")}function Tt(){return Ue.new()}function Kt(e,t){let n=e.get(t,_s);return n===_s?new B(fu):new v(n)}function ts(e,t,n){return n.set(e,t)}function mt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Bt)return"Result";if(e instanceof Je)return"List";if(e instanceof At)return"BitArray";if(e instanceof Ue)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function _u(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let i=n.head;e=n.tail,t=r+i}}}function ws(e){return _u(e,"")}function Cr(e){let n=$s(e);return hs(n)}function bs(e,t){if(e instanceof Ue||e instanceof WeakMap||e instanceof Map){let r={},i=e.get(t,r);return i===r?new v(new ye):new v(new ne(i))}let n=Number.isInteger(t);if(n&&t>=0&&t<8&&e instanceof Je){let r=0;for(let i of e){if(r===t)return new v(new ne(i));r++}return new B("Indexable")}return n&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new v(new ne(e[t])):new v(new ye):new B(n?"Indexable":"Dict")}function ys(e){return Number.isInteger(e)?new v(e):new B(0)}function gs(e){return typeof e=="string"?new v(e):new B("")}var st=class extends _{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}},Pe=class extends _{constructor(t){super(),this.function=t}};function xt(e,t){let n=t.function(e),r=n[0],i=n[1];return i instanceof b?new v(r):new B(i)}function Xe(e){return new Pe(t=>[e,a([])])}function An(e,t){return new Pe(n=>{let r=e.function(n),i=r[0],s=r[1];return[t(i),s]})}function wu(e,t,n){for(;;){let r=e,i=t,s=n;if(s instanceof b)return i;{let o=s.head,l=s.tail,u=o.function(r),c=u;if(u[1]instanceof b)return c;e=r,t=i,n=l}}}function ks(e,t){return new Pe(n=>{let r=e.function(n),i=r;return r[1]instanceof b?i:wu(n,i,t)})}function js(e,t){return a([new st(e,mt(t),a([]))])}function Es(e,t,n){let r=n(e);return r instanceof v?[r[0],a([])]:[r[0],a([new st(t,mt(e),a([]))])]}function bu(e){return R(!0,e)?[!0,a([])]:R(!1,e)?[!1,a([])]:[!1,js("Bool",e)]}function yu(e){return Es(e,"Int",ys)}function Or(e,t){return new Pe(n=>[e,js(t,n)])}var zs=new Pe(bu),Bn=new Pe(yu);function gu(e){return Es(e,"String",gs)}var Ot=new Pe(gu);function Tr(e,t){let n=ks(Ot,a([An(Bn,ve)])),r=_t(t,s=>{let o=s,l=xt(o,n);return l instanceof v?l[0]:"<"+mt(o)+">"}),i=_t(e[1],s=>{let o=s;return new st(o.expected,o.found,Ye(r,s.path))});return[e[0],i]}function vu(e,t,n,r,i){for(;;){let s=e,o=t,l=n,u=r,c=i;if(s instanceof b){let f=l(u);return Tr(f,V(o))}else{let f=s.head,p=s.tail,$=bs(u,f);if($ instanceof v){let w=$[0];if(w instanceof ne){let x=w[0];e=p,t=d(f,o),n=l,r=x,i=c}else return c(u,d(f,o))}else{let w=$[0],m=[l(u)[0],a([new st(w,mt(u),a([]))])];return Tr(m,V(o))}}}}function Nt(e,t,n){return new Pe(r=>{let i=vu(e,a([]),t.function,r,(f,p)=>{let x=[t.function(f)[0],a([new st("Field","Nothing",a([]))])];return Tr(x,V(p))}),s=i[0],o=i[1],l=n(s).function(r),u=l[0],c=l[1];return[u,Ye(o,c)]})}function Cn(e,t,n){return Nt(a([e]),t,n)}var Fe=e=>[e],Tn=(e,t)=>[e,t],wt=(e,t)=>[...e,t],It=(e,t)=>[t,...e],bt=(e,t)=>[...e,...t],U=(e,t)=>t[e-1],Re=(e,t,n)=>t.with(e-1,n),F=e=>e.length;var yt=(e,t)=>e.map(t),gt=(e,t)=>e<<t,rn=(e,t)=>e>>t;function ju(e,t,n,r,i){for(;;){let s=e,o=t,l=n,u=r,c=i;if(l<=u)e=s,t=c(o,U(l,s)),n=l+1,r=u,i=c;else return o}}function Bs(e,t,n){let r=F(e);return ju(e,t,2,r,n)}function Eu(e,t,n,r){for(;;){let i=e,s=t,o=n,l=r;if(o>0)e=i,t=l(s,U(o,i)),n=o-1,r=l;else return s}}function On(e,t,n){let r=F(e);return Eu(e,t,r,n)}var fe=class extends _{constructor(t,n){super(),this.size=t,this.children=n}},ee=class extends _{constructor(t,n){super(),this.sizes=t,this.children=n}},kt=class extends _{constructor(t){super(),this.children=t}},J=class extends _{constructor(t){super(),this.merged=t}},Oe=class extends _{constructor(t,n){super(),this.left=t,this.right=n}};function Lr(e){return new kt(e)}function je(e){if(e instanceof fe)return e.size;if(e instanceof ee){let t=e.sizes;return U(F(t),t)}else{let t=e.children;return F(t)}}function Cs(e){let t=je(U(1,e));return Bs(e,Fe(t),(n,r)=>{let i=U(F(n),n)+je(r);return wt(n,i)})}function vt(e,t){let n=Cs(t);return new ee(n,t)}function Ts(e,t,n){for(;;){let r=e,i=t,s=n;if(U(i,r)>s)return i-1;e=r,t=i+1,n=s}}function Mn(e,t){if(e instanceof fe){let n=e.size,r=e.children;return new fe(n,yt(r,i=>Mn(i,t)))}else if(e instanceof ee){let n=e.sizes,r=e.children;return new ee(n,yt(r,i=>Mn(i,t)))}else{let n=e.children;return new kt(yt(n,t))}}function In(e,t,n){if(e instanceof fe){let r=e.children;return On(r,t,(i,s)=>In(s,i,n))}else if(e instanceof ee){let r=e.children;return On(r,t,(i,s)=>In(s,i,n))}else{let r=e.children;return On(r,t,n)}}function ot(e,t){let n=F(t),r=U(n,t),s=gt(1,e)*(n-1)+je(r);return new fe(s,t)}function Dr(e,t){let n=F(t),r=gt(1,e),i=Cs(t),s;if(n===1?s=0:s=U(n-1,i),s===r*(n-1)){let u=U(n,i);return new fe(u,t)}else return new ee(i,t)}var Ne=5;function Os(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof fe){let o=r.children,l=rn(s,i),u=s-gt(l,i);e=U(l+1,o),t=i-Ne,n=u}else if(r instanceof ee){let o=r.sizes,l=r.children,u=rn(s,i),c=Ts(o,u+1,s),f;c===0?f=s:f=s-U(c,o);let p=f;e=U(c+1,l),t=i-Ne,n=p}else{let o=r.children;return U(s+1,o)}}}function qn(e,t,n,r){if(t instanceof fe){let i=t.size,s=t.children,o=rn(n,e),l=n-gt(o,e),u,c=U(o+1,s),f=($=>qn(e-Ne,$,l,r))(c);u=($=>Re(o+1,s,$))(f);let p=u;return new fe(i,p)}else if(t instanceof ee){let i=t.sizes,s=t.children,o=rn(n,e),l=Ts(i,o+1,n),u;l===0?u=n:u=n-U(l,i);let c=u,f,p=U(l+1,s),$=(x=>qn(e-Ne,x,c,r))(p);f=(x=>Re(l+1,s,x))($);let w=f;return new ee(i,w)}else{let i=t.children,s=Re(n+1,i,r(U(n+1,i)));return new kt(s)}}var qt=32;function Nr(e,t,n,r,i){let s=F(n),o=U(s,n),l=Lt(e-Ne,o,r,i);if(l instanceof J){let u=l.merged,c=Re(s,n,u);return new J(ot(e,c))}else if(s<32){let u=l.right,c=wt(n,u);return je(o)===gt(1,e)?new J(ot(e,c)):new J(vt(e,c))}else{let u=l.right;return new Oe(t,ot(e,Fe(u)))}}function Lt(e,t,n,r){if(r instanceof fe)if(t instanceof fe)if(e>n){let i=t.children;return Nr(e,t,i,n,r)}else if(n>e){let i=r.children;return Ir(e,t,n,r,i)}else{let i=r.children,s=t.children;if(F(s)+F(i)<=qt){let l=bt(s,i),u=U(F(s),s);return je(u)===gt(1,e)?new J(ot(e,l)):new J(vt(e,l))}else return new Oe(t,r)}else if(t instanceof ee)if(e>n){let i=t.sizes,s=t.children;return Mr(e,t,s,i,n,r)}else if(n>e){let i=r.children;return Ir(e,t,n,r,i)}else{let i=r.children,s=t.children;if(F(s)+F(i)<=qt){let l=bt(s,i);return new J(vt(e,l))}else return new Oe(t,r)}else{let i=r.children;return Ir(e,t,n,r,i)}else if(r instanceof ee)if(t instanceof fe)if(e>n){let i=t.children;return Nr(e,t,i,n,r)}else if(n>e){let i=r.sizes,s=r.children;return qr(e,t,n,r,s,i)}else{let i=r.children,s=t.children;if(F(s)+F(i)<=qt){let l=bt(s,i);return new J(vt(e,l))}else return new Oe(t,r)}else if(t instanceof ee)if(e>n){let i=t.sizes,s=t.children;return Mr(e,t,s,i,n,r)}else if(n>e){let i=r.sizes,s=r.children;return qr(e,t,n,r,s,i)}else{let i=r.children,s=t.children;if(F(s)+F(i)<=qt){let l=bt(s,i);return new J(vt(e,l))}else return new Oe(t,r)}else{let i=r.sizes,s=r.children;return qr(e,t,n,r,s,i)}else if(t instanceof fe){let i=t.children;return Nr(e,t,i,n,r)}else if(t instanceof ee){let i=t.sizes,s=t.children;return Mr(e,t,s,i,n,r)}else{let i=r.children,s=t.children;return F(s)+F(i)<=qt?new J(new kt(bt(s,i))):new Oe(t,r)}}function Mr(e,t,n,r,i,s){let o=F(n),l=U(o,n),u=Lt(e-Ne,l,i,s);if(u instanceof J){let c=u.merged,f=Re(o,n,c),p=U(o,r)+je(c),$=Re(o,r,p);return new J(new ee($,f))}else if(o<32){let c=u.right,f=wt(n,c),p=wt(r,U(o,r)+je(c));return new J(new ee(p,f))}else{let c=u.right;return new Oe(t,ot(e,Fe(c)))}}function Ir(e,t,n,r,i){let s=F(i),o=U(1,i),l=Lt(e,t,n-Ne,o);if(l instanceof J){let u=l.merged,c=Re(1,i,u);return new J(vt(n,c))}else if(s<32){let u=l.left,c=It(i,u);return new J(vt(n,c))}else{let u=l.left;return new Oe(ot(n,Fe(u)),r)}}function qr(e,t,n,r,i,s){let o=F(i),l=U(1,i),u=Lt(e,t,n-Ne,l);if(u instanceof J){let c=u.merged,f=Re(1,i,c),p=je(c)-je(l),$=yt(s,w=>w+p);return new J(new ee($,f))}else if(o<32){let c=u.left,f=It(i,c),p=je(c),$,x=yt(s,m=>m+p);$=It(x,p);let g=$;return new J(new ee(g,f))}else{let c=u.left;return new Oe(ot(n,Fe(c)),r)}}var Me=class extends _{},lt=class extends _{constructor(t,n){super(),this.shift=t,this.root=n}};function Bu(e,t){let n=F(t);if(n===0)return new Me;if(n===1)return new lt(e,U(1,t));{let r=e+Ne;return new lt(r,Dr(r,t))}}function Ms(){return new Me}function Cu(e){return new lt(0,Lr(Fe(e)))}function Ur(e,t){if(e instanceof Me)return new B(void 0);{let n=e.shift,r=e.root;return 0<=t&&t<je(r)?new v(Os(r,n,t)):new B(void 0)}}function sn(e,t,n){if(e instanceof Me)return e;{let r=e.shift,i=e.root;return 0<=t&&t<je(i)?new lt(r,qn(r,i,t,n)):e}}function Pr(e,t,n){return sn(e,t,r=>n)}function Tu(e,t){if(e instanceof Me)return t;if(t instanceof Me)return e;{let n=e.shift,r=e.root,i=t.shift,s=t.root,o;n>i?o=n:o=i;let u=o,c=Lt(n,r,i,s);if(c instanceof J){let f=c.merged;return new lt(u,f)}else{let f=c.left,p=c.right;return Bu(u,Tn(f,p))}}}function Is(e,t){return Tu(e,Cu(t))}function Fr(e,t){if(e instanceof Me)return new Me;{let n=e.shift,r=e.root;return new lt(n,Mn(r,t))}}function qs(e,t,n){if(e instanceof Me)return t;{let r=e.root;return In(r,t,n)}}function ae(e){return e}function Gr(e){return e}var Ln=class extends _{constructor(t){super(),this.dict=t}};function Ds(){return new Ln(Tt())}function Wr(e,t){let n=e.dict,r=Kt(n,t);return ls(r)}var qu=void 0;function Us(e,t){return new Ln(Xt(e.dict,t,qu))}var Du=Ue.new();function Dn(){return Du}var Uu=Ds();function un(){return Uu}var Ie=globalThis?.document,Un="http://www.w3.org/1999/xhtml",Pn=1,Fn=3,cn=11,Ps=!!globalThis.HTMLElement?.prototype?.moveBefore;var C=a([]),Rn=new ye;var Pu=new nt,Fu=new Q,Ru=new Z;function Gn(e,t){return e.name===t.name?Ru:e.name<t.name?Fu:Pu}var qe=class extends _{constructor(t,n,r){super(),this.kind=t,this.name=n,this.value=r}},Dt=class extends _{constructor(t,n,r){super(),this.kind=t,this.name=n,this.value=r}},me=class extends _{constructor(t,n,r,i,s,o,l,u){super(),this.kind=t,this.name=n,this.handler=r,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=l,this.limit=u}},Ut=class extends _{constructor(t){super(),this.kind=t}},fn=class extends _{constructor(t,n){super(),this.kind=t,this.delay=n}},Wn=class extends _{constructor(t,n){super(),this.kind=t,this.delay=n}};function Ys(e,t){if(t instanceof Ut)return e instanceof Ut;if(t instanceof fn)if(e instanceof fn){let n=t.delay;return e.delay===n}else return!1;else if(e instanceof Wn){let n=t.delay;return e.delay===n}else return!1}function Vu(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let i=n.tail;if(i instanceof b){let s=n.head;e=i,t=d(s,r)}else{let s=i.head;if(s instanceof qe){let o=s.name;if(o==="class"){let l=n.head;if(l instanceof qe)if(l.name==="class"){let c=i.tail,f=s.value,p=l.kind,w=l.value+" "+f,x=new qe(p,"class",w);e=d(x,c),t=r}else{let c=l;e=i,t=d(c,r)}else{let u=l;e=i,t=d(u,r)}}else if(o==="style"){let l=n.head;if(l instanceof qe)if(l.name==="style"){let c=i.tail,f=s.value,p=l.kind,w=l.value+";"+f,x=new qe(p,"style",w);e=d(x,c),t=r}else{let c=l;e=i,t=d(c,r)}else{let u=l;e=i,t=d(u,r)}}else{let l=n.head;e=i,t=d(l,r)}}else{let o=n.head;e=i,t=d(o,r)}}}}}function Xs(e){if(e instanceof b)return e;if(e.tail instanceof b)return e;{let r=rs(e,(i,s)=>Gn(s,i));return Vu(r,C)}}var Yr=0;function Ks(e,t){return new qe(Yr,e,t)}var Xr=1;function Qs(e,t){return new Dt(Xr,e,t)}var Kr=2;function Zs(e,t,n,r,i,s,o){return new me(Kr,e,t,n,r,i,s,o)}var Qr=1;var Zr=2;function Ae(e,t){return Ks(e,t)}function Yu(e,t){return Qs(e,t)}function eo(e,t){return t?Ae(e,""):Yu(e,Gr(!1))}function ei(e){return eo("autofocus",e)}function oe(e){return Ae("class",e)}function to(){return oe("")}function no(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;if(n.head[1]){let s=n.tail,o=n.head[0];return r+o+" "+no(s,r)}else e=n.tail,t=r}}function ti(e){return oe(no(e,""))}function ni(e){return Ae("id",e)}function ro(e,t){return e===""||t===""?oe(""):Ae("style",e+":"+t+";")}function io(e){return Ae("href",e)}function ri(e){return eo("checked",e)}function so(e){return Ae("for",e)}function oo(e){return Ae("placeholder",e)}function ii(e){return Ae("type",e)}function lo(e){return Ae("value",e)}var Hn=class extends _{constructor(t,n,r){super(),this.synchronous=t,this.before_paint=n,this.after_paint=r}};var uo=new Hn(a([]),a([]),a([]));function pe(){return uo}function co(e){let t=r=>{let i=r.dispatch;return e(i)},n=uo;return new Hn(a([t]),n.before_paint,n.after_paint)}function $e(){return null}function Pt(e,t){let n=e?.get(t);return n!=null?new v(n):new B(void 0)}function ut(e,t,n){return e??=new Map,e.set(t,n),e}function si(e,t){return e?.delete(t),e}var Jn=class extends _{},Yn=class extends _{constructor(t,n){super(),this.key=t,this.parent=n}},oi=class extends _{constructor(t,n){super(),this.index=t,this.parent=n}};function Ku(e,t){for(;;){let n=e,r=t;if(r instanceof b)return!1;{let i=r.head,s=r.tail;if(Br(n,i))return!0;e=n,t=s}}}function ct(e,t,n){return n===""?new oi(t,e):new Yn(n,e)}var li=new Jn,ui=`
`,ci="	";function fo(e,t){for(;;){let n=e,r=t;if(n instanceof Jn){if(r instanceof b)return"";{let i=r.tail;return ws(i)}}else if(n instanceof Yn){let i=n.key;e=n.parent,t=d(ci,d(i,r))}else{let i=n.index;e=n.parent,t=d(ui,d(ve(i),r))}}}function Qu(e){return fo(e,a([]))}function ao(e,t){return t instanceof b?!1:Ku(Qu(e),t)}var fi="\f";function ai(e,t){return fo(e,a([fi,t]))}var de=class extends _{constructor(t,n,r,i,s,o){super(),this.kind=t,this.key=n,this.mapper=r,this.children=i,this.keyed_children=s,this.children_count=o}},Be=class extends _{constructor(t,n,r,i,s,o,l,u,c,f){super(),this.kind=t,this.key=n,this.mapper=r,this.namespace=i,this.tag=s,this.attributes=o,this.children=l,this.keyed_children=u,this.self_closing=c,this.void=f}},Ce=class extends _{constructor(t,n,r,i){super(),this.kind=t,this.key=n,this.mapper=r,this.content=i}},Ft=class extends _{constructor(t,n,r,i,s,o,l){super(),this.kind=t,this.key=n,this.mapper=r,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=l}};function tc(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function K(e){return e instanceof de?1+e.children_count:1}var pi=0;function di(e,t,n,r,i){return new de(pi,e,t,n,r,i)}var _i=1;function dn(e,t,n,r,i,s,o,l,u){return new Be(_i,e,t,n,r,Xs(i),s,o,l,u||tc(r,n))}var mi=2;function $i(e,t,n){return new Ce(mi,e,t,n)}var _o=3;function mo(e,t,n,r,i){for(;;){let s=e,o=t,l=n,u=r,c=i;if(o instanceof b)return[V(u),c];{let f=o.head;if(f instanceof de){let p=f;if(p.key===""){let $=o.tail,w=s+"::"+ve(l),x=mo(w,p.children,0,C,$e()),g=x[0],m=x[1],j,y=p;j=new de(y.kind,y.key,y.mapper,g,m,y.children_count);let S=d(j,u),h=l+1;e=s,t=$,n=h,r=S,i=c}else{let $=f;if($.key!==""){let w=o.tail,x=s+"::"+$.key,g=Rt(x,$),m=d(g,u),j=ut(c,x,g),y=l+1;e=s,t=w,n=y,r=m,i=j}else{let w=f,x=o.tail,g=d(w,u),m=l+1;e=s,t=x,n=m,r=g,i=c}}}else{let p=f;if(p.key!==""){let $=o.tail,w=s+"::"+p.key,x=Rt(w,p),g=d(x,u),m=ut(c,w,x),j=l+1;e=s,t=$,n=j,r=g,i=m}else{let $=f,w=o.tail,x=d($,u),g=l+1;e=s,t=w,n=g,r=x,i=c}}}}}function Rt(e,t){if(t instanceof de){let n=t.children,r=mo(e,n,0,C,$e()),i=r[0],s=r[1],o=t;return new de(o.kind,e,o.mapper,i,s,o.children_count)}else if(t instanceof Be){let n=t;return new Be(n.kind,e,n.mapper,n.namespace,n.tag,n.attributes,n.children,n.keyed_children,n.self_closing,n.void)}else if(t instanceof Ce){let n=t;return new Ce(n.kind,e,n.mapper,n.content)}else{let n=t;return new Ft(n.kind,e,n.mapper,n.namespace,n.tag,n.attributes,n.inner_html)}}var Wt=class extends _{constructor(t,n,r,i){super(),this.index=t,this.removed=n,this.changes=r,this.children=i}},hi=class extends _{constructor(t,n){super(),this.kind=t,this.content=n}},xi=class extends _{constructor(t,n){super(),this.kind=t,this.inner_html=n}},wi=class extends _{constructor(t,n,r){super(),this.kind=t,this.added=n,this.removed=r}},bi=class extends _{constructor(t,n,r,i){super(),this.kind=t,this.key=n,this.before=r,this.count=i}},yi=class extends _{constructor(t,n,r){super(),this.kind=t,this.key=n,this.count=r}},gi=class extends _{constructor(t,n,r,i){super(),this.kind=t,this.from=n,this.count=r,this.with=i}},vi=class extends _{constructor(t,n,r){super(),this.kind=t,this.children=n,this.before=r}},ki=class extends _{constructor(t,n,r){super(),this.kind=t,this.from=n,this.count=r}};function ji(e,t,n,r){return new Wt(e,t,n,r)}var Ei=0;function $o(e){return new hi(Ei,e)}var zi=1;function ho(e){return new xi(zi,e)}var Si=2;function _n(e,t){return new wi(Si,e,t)}var Xn=3;function xo(e,t,n){return new bi(Xn,e,t,n)}var Ai=4;function wo(e,t){return new yi(Ai,e,t)}var Kn=5;function jt(e,t,n){return new gi(Kn,e,t,n)}var Qn=6;function Bi(e,t){return new vi(Qn,e,t)}var Zn=7;function bo(e,t){return new ki(Zn,e,t)}var tr=class extends _{constructor(t,n){super(),this.patch=t,this.events=n}},Ci=class extends _{constructor(t,n,r){super(),this.added=t,this.removed=n,this.events=r}};function rc(e,t,n,r){return n==="input"?t===""?er(e,r):!1:n==="select"?t===""?er(e,r):!1:n==="textarea"&&t===""?er(e,r):!1}function go(e,t,n,r,i,s,o,l){for(;;){let u=e,c=t,f=n,p=r,$=i,w=s,x=o,g=l;if(w instanceof b){if($ instanceof b)return new Ci(x,g,p);{let m=$.head;if(m instanceof me){let j=m,y=$.tail,k=m.name,S=d(j,g),h=mn(p,c,k);e=u,t=c,n=f,r=h,i=y,s=w,o=x,l=S}else{let j=m,y=$.tail,k=d(j,g);e=u,t=c,n=f,r=p,i=y,s=w,o=x,l=k}}}else if($ instanceof b){let m=w.head;if(m instanceof me){let j=m,y=w.tail,k=m.name,S=m.handler,h=d(j,x),E=$n(p,f,c,k,S);e=u,t=c,n=f,r=E,i=$,s=y,o=h,l=g}else{let j=m,y=w.tail,k=d(j,x);e=u,t=c,n=f,r=p,i=$,s=y,o=k,l=g}}else{let m=w.head,j=w.tail,y=$.head,k=$.tail,S=Gn(y,m);if(S instanceof Q)if(y instanceof me){let h=y.name,E=d(y,g),z=mn(p,c,h);e=u,t=c,n=f,r=z,i=k,s=w,o=x,l=E}else{let h=d(y,g);e=u,t=c,n=f,r=p,i=k,s=w,o=x,l=h}else if(S instanceof Z)if(m instanceof qe)if(y instanceof qe){let h,E=m.name;E==="value"||E==="checked"||E==="selected"?h=u||y.value!==m.value:h=y.value!==m.value;let z=h,T;z?T=d(m,x):T=x;let I=T;e=u,t=c,n=f,r=p,i=k,s=j,o=I,l=g}else if(y instanceof me){let h=y.name,E=d(m,x),z=d(y,g),T=mn(p,c,h);e=u,t=c,n=f,r=T,i=k,s=j,o=E,l=z}else{let h=d(m,x),E=d(y,g);e=u,t=c,n=f,r=p,i=k,s=j,o=h,l=E}else if(m instanceof Dt)if(y instanceof Dt){let h,E=m.name;E==="scrollLeft"||E==="scrollRight"?h=!0:E==="value"?h=u||!R(y.value,m.value):E==="checked"?h=u||!R(y.value,m.value):E==="selected"?h=u||!R(y.value,m.value):h=!R(y.value,m.value);let z=h,T;z?T=d(m,x):T=x;let I=T;e=u,t=c,n=f,r=p,i=k,s=j,o=I,l=g}else if(y instanceof me){let h=y.name,E=d(m,x),z=d(y,g),T=mn(p,c,h);e=u,t=c,n=f,r=T,i=k,s=j,o=E,l=z}else{let h=d(m,x),E=d(y,g);e=u,t=c,n=f,r=p,i=k,s=j,o=h,l=E}else if(y instanceof me){let h=m.name,E=m.handler,z=y.prevent_default!==m.prevent_default||y.stop_propagation!==m.stop_propagation||y.immediate!==m.immediate||!Ys(y.limit,m.limit),T;z?T=d(m,x):T=x;let I=T,L=$n(p,f,c,h,E);e=u,t=c,n=f,r=L,i=k,s=j,o=I,l=g}else{let h=m.name,E=m.handler,z=d(m,x),T=d(y,g),I=$n(p,f,c,h,E);e=u,t=c,n=f,r=I,i=k,s=j,o=z,l=T}else if(m instanceof me){let h=m.name,E=m.handler,z=d(m,x),T=$n(p,f,c,h,E);e=u,t=c,n=f,r=T,i=$,s=j,o=z,l=g}else{let h=d(m,x);e=u,t=c,n=f,r=p,i=$,s=j,o=h,l=g}}}}function Ti(e,t,n,r,i,s,o,l,u,c,f,p,$,w){for(;;){let x=e,g=t,m=n,j=r,y=i,k=s,S=o,h=l,E=u,z=c,T=f,I=p,L=$,te=w;if(m instanceof b){if(x instanceof b)return new tr(new Wt(E,S,T,I),te);{let re=x.head,we=x.tail,X;re.key===""||!Wr(y,re.key)?X=S+K(re):X=S;let A=X,H=Ke(te,z,h,re);e=we,t=g,n=m,r=j,i=y,s=k,o=A,l=h,u=E,c=z,f=T,p=I,$=L,w=H}}else if(x instanceof b){let re=ko(te,L,z,h,m),we=Bi(m,h-k),X=d(we,T);return new tr(new Wt(E,S,X,I),re)}else{let re=m.head,we=x.head;if(we.key!==re.key){let X=m.tail,Y=x.tail,A=Pt(g,re.key),H=Pt(j,we.key),q=Wr(y,we.key);if(A instanceof v)if(H instanceof v)if(q)e=Y,t=g,n=m,r=j,i=y,s=k-K(we),o=S,l=h,u=E,c=z,f=T,p=I,$=L,w=te;else{let P=A[0],O=K(re),N=h-k,D=xo(re.key,N,O),M=d(D,T),G=Us(y,re.key),W=k+O;e=d(P,x),t=g,n=m,r=j,i=G,s=W,o=S,l=h,u=E,c=z,f=M,p=I,$=L,w=te}else{let P=K(we),O=k-P,N=Ke(te,z,h,we),D=wo(we.key,P),M=d(D,T);e=Y,t=g,n=m,r=j,i=y,s=O,o=S,l=h,u=E,c=z,f=M,p=I,$=L,w=N}else if(H instanceof v){let P=h-k,O=K(re),N=ft(te,L,z,h,re),D=Bi(a([re]),P),M=d(D,T);e=x,t=g,n=X,r=j,i=y,s=k+O,o=S,l=h+O,u=E,c=z,f=M,p=I,$=L,w=N}else{let P=K(we),O=K(re),N=jt(h-k,P,re),D,G=Ke(te,z,h,we);D=ft(G,L,z,h,re);let W=D;e=Y,t=g,n=X,r=j,i=y,s=k-P+O,o=S,l=h+O,u=E,c=z,f=d(N,T),p=I,$=L,w=W}}else{let X=x.head;if(X instanceof de){let Y=m.head;if(Y instanceof de){let A=Y,H=m.tail,q=X,P=x.tail,O=h+1,N=q.children_count,D=A.children_count,M=at(L,A.mapper),G=Ti(q.children,q.keyed_children,A.children,A.keyed_children,un(),k,0,O,-1,z,C,I,M,te),W;if(G.patch.removed>0){let Ve=O+D-k,et=bo(Ve,G.patch.removed);W=Ye(G.patch.changes,d(et,T))}else W=Ye(G.patch.changes,T);let Te=W;e=P,t=g,n=H,r=j,i=y,s=k+D-N,o=S,l=O+D,u=E,c=z,f=Te,p=G.patch.children,$=L,w=G.events}else{let A=Y,H=m.tail,q=X,P=x.tail,O=K(q),N=K(A),D=jt(h-k,O,A),M,W=Ke(te,z,h,q);M=ft(W,L,z,h,A);let ce=M;e=P,t=g,n=H,r=j,i=y,s=k-O+N,o=S,l=h+N,u=E,c=z,f=d(D,T),p=I,$=L,w=ce}}else if(X instanceof Be){let Y=m.head;if(Y instanceof Be){let A=Y,H=X;if(H.namespace===A.namespace&&H.tag===A.tag){let q=m.tail,P=x.tail,O=at(L,A.mapper),N=ct(z,h,A.key),D=rc(te,A.namespace,A.tag,N),M=go(D,N,O,te,H.attributes,A.attributes,C,C),G=M.added,W=M.removed,ce=M.events,Te;W instanceof b?G instanceof b?Te=C:Te=a([_n(G,W)]):Te=a([_n(G,W)]);let Ve=Te,et=Ti(H.children,H.keyed_children,A.children,A.keyed_children,un(),0,0,0,h,N,Ve,C,O,ce),tt,pt=et.patch;pt.children instanceof b?pt.changes instanceof b?pt.removed===0?tt=I:tt=d(et.patch,I):tt=d(et.patch,I):tt=d(et.patch,I);let _l=tt;e=P,t=g,n=q,r=j,i=y,s=k,o=S,l=h+1,u=E,c=z,f=T,p=_l,$=L,w=et.events}else{let q=Y,P=m.tail,O=X,N=x.tail,D=K(O),M=K(q),G=jt(h-k,D,q),W,Te=Ke(te,z,h,O);W=ft(Te,L,z,h,q);let Ve=W;e=N,t=g,n=P,r=j,i=y,s=k-D+M,o=S,l=h+M,u=E,c=z,f=d(G,T),p=I,$=L,w=Ve}}else{let A=Y,H=m.tail,q=X,P=x.tail,O=K(q),N=K(A),D=jt(h-k,O,A),M,W=Ke(te,z,h,q);M=ft(W,L,z,h,A);let ce=M;e=P,t=g,n=H,r=j,i=y,s=k-O+N,o=S,l=h+N,u=E,c=z,f=d(D,T),p=I,$=L,w=ce}}else if(X instanceof Ce){let Y=m.head;if(Y instanceof Ce){let A=Y;if(X.content===A.content){let q=m.tail;e=x.tail,t=g,n=q,r=j,i=y,s=k,o=S,l=h+1,u=E,c=z,f=T,p=I,$=L,w=te}else{let q=Y,P=m.tail,O=x.tail,N=ji(h,0,a([$o(q.content)]),C);e=O,t=g,n=P,r=j,i=y,s=k,o=S,l=h+1,u=E,c=z,f=T,p=d(N,I),$=L,w=te}}else{let A=Y,H=m.tail,q=X,P=x.tail,O=K(q),N=K(A),D=jt(h-k,O,A),M,W=Ke(te,z,h,q);M=ft(W,L,z,h,A);let ce=M;e=P,t=g,n=H,r=j,i=y,s=k-O+N,o=S,l=h+N,u=E,c=z,f=d(D,T),p=I,$=L,w=ce}}else{let Y=m.head;if(Y instanceof Ft){let A=Y,H=m.tail,q=X,P=x.tail,O=at(L,A.mapper),N=ct(z,h,A.key),D=go(!1,N,O,te,q.attributes,A.attributes,C,C),M=D.added,G=D.removed,W=D.events,ce;G instanceof b?M instanceof b?ce=C:ce=a([_n(M,G)]):ce=a([_n(M,G)]);let Te=ce,Ve;q.inner_html===A.inner_html?Ve=Te:Ve=d(ho(A.inner_html),Te);let tt=Ve,pt;tt instanceof b?pt=I:pt=d(ji(h,0,tt,a([])),I);let Xi=pt;e=P,t=g,n=H,r=j,i=y,s=k,o=S,l=h+1,u=E,c=z,f=T,p=Xi,$=L,w=W}else{let A=Y,H=m.tail,q=X,P=x.tail,O=K(q),N=K(A),D=jt(h-k,O,A),M,W=Ke(te,z,h,q);M=ft(W,L,z,h,A);let ce=M;e=P,t=g,n=H,r=j,i=y,s=k-O+N,o=S,l=h+N,u=E,c=z,f=d(D,T),p=I,$=L,w=ce}}}}}}function Oi(e,t,n){return Ti(a([t]),$e(),a([n]),$e(),un(),0,0,0,0,li,C,C,ae,vo(e))}var rr=class{offset=0;#e=null;#s=()=>{};#u=!1;constructor(t,n,{useServerEvents:r=!1}={}){this.#e=t,this.#s=n,this.#u=r}mount(t){nr(this.#e,this.#l(t))}#n=[];push(t){let n=this.offset;n&&(Qe(t.changes,r=>{switch(r.kind){case Qn:case Xn:r.before=(r.before|0)+n;break;case Zn:case Kn:r.from=(r.from|0)+n;break}}),Qe(t.children,r=>{r.index=(r.index|0)+n})),this.#n.push({node:this.#e,patch:t}),this.#o()}#o(){let t=this;for(;t.#n.length;){let{node:n,patch:r}=t.#n.pop();Qe(r.changes,i=>{switch(i.kind){case Qn:t.#c(n,i.children,i.before);break;case Xn:t.#p(n,i.key,i.before,i.count);break;case Ai:t.#d(n,i.key,i.count);break;case Zn:t.#t(n,i.from,i.count);break;case Kn:t.#f(n,i.from,i.count,i.with);break;case Ei:t.#i(n,i.content);break;case zi:t.#_(n,i.inner_html);break;case Si:t.#a(n,i.added,i.removed);break}}),r.removed&&t.#t(n,n.childNodes.length-r.removed,r.removed),Qe(r.children,i=>{t.#n.push({node:xn(n,i.index),patch:i})})}}#c(t,n,r){let i=zo();Qe(n,s=>{let o=this.#l(s);Mi(t,o),nr(i,o)}),Ni(t,i,xn(t,r))}#p(t,n,r,i){let s=So(t,n),o=xn(t,r);for(let l=0;l<i&&s!==null;++l){let u=s.nextSibling;Ps?t.moveBefore(s,o):Ni(t,s,o),s=u}}#d(t,n,r){this.#r(t,So(t,n),r)}#t(t,n,r){this.#r(t,xn(t,n),r)}#r(t,n,r){for(;r-- >0&&n!==null;){let i=n.nextSibling,s=n[le].key;s&&t[le].keyedChildren.delete(s);for(let[o,{timeout:l}]of n[le].debouncers)clearTimeout(l);t.removeChild(n),n=i}}#f(t,n,r,i){this.#t(t,n,r);let s=this.#l(i);Mi(t,s),Ni(t,s,xn(t,n))}#i(t,n){t.data=n??""}#_(t,n){t.innerHTML=n??""}#a(t,n,r){Qe(r,i=>{let s=i.name;t[le].handlers.has(s)?(t.removeEventListener(s,Ao),t[le].handlers.delete(s),t[le].throttles.has(s)&&t[le].throttles.delete(s),t[le].debouncers.has(s)&&(clearTimeout(t[le].debouncers.get(s).timeout),t[le].debouncers.delete(s))):(t.removeAttribute(s),Co[s]?.removed?.(t,s))}),Qe(n,i=>{this.#$(t,i)})}#l(t){switch(t.kind){case _i:{let n=jo(t);return this.#m(n,t),this.#c(n,t.children,0),n}case mi:{let n=Eo(t.content);return Ze(n,t.key),n}case pi:{let n=zo(),r=Eo();return Ze(r,t.key),nr(n,r),Qe(t.children,i=>{nr(n,this.#l(i))}),n}case _o:{let n=jo(t);return this.#m(n,t),this.#_(n,t.inner_html),n}}}#m(t,{attributes:n}){Qe(n,r=>this.#$(t,r))}#$(t,n){let r=t[le];switch(n.kind){case Yr:{let i=n.name,s=n.value??"";s!==t.getAttribute(i)&&t.setAttribute(i,s),Co[i]?.added?.(t,s);break}case Xr:t[n.name]=n.value;break;case Kr:{r.handlers.has(n.name)||t.addEventListener(n.name,Ao,{passive:!n.prevent_default});let i=n.prevent_default,s=n.stop_propagation,o=n.immediate,l=Array.isArray(n.include)?n.include:[];if(n.limit?.kind===Zr){let u=r.throttles.get(n.name)??{last:0,delay:n.limit.delay};r.throttles.set(n.name,u)}if(n.limit?.kind===Qr){let u=r.debouncers.get(n.name)??{timeout:null,delay:n.limit.delay};r.debouncers.set(n.name,u)}r.handlers.set(n.name,u=>{i&&u.preventDefault(),s&&u.stopPropagation();let c=u.type,f="",p=u.currentTarget;for(;p!==this.#e;){let w=p[le].key,x=p.parentNode;if(w)f=`${ci}${w}${f}`;else{let g=x.childNodes,m=[].indexOf.call(g,p);x===this.#e&&(m-=this.offset),f=`${ui}${m}${f}`}p=x}f=f.slice(1);let $=this.#u?ic(u,l):u;if(r.throttles.has(c)){let w=r.throttles.get(c),x=Date.now(),g=w.last||0;x>g+w.delay?(w.last=x,this.#s($,f,c,o)):u.preventDefault()}else if(r.debouncers.has(c)){let w=r.debouncers.get(c);clearTimeout(w.timeout),w.timeout=setTimeout(()=>{this.#s($,f,c,o)},w.delay)}else this.#s($,f,c,o)});break}}}},Qe=(e,t)=>{if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},nr=(e,t)=>e.appendChild(t),Ni=(e,t,n)=>e.insertBefore(t,n??null),jo=({key:e,tag:t,namespace:n})=>{let r=Ie.createElementNS(n||Un,t);return Ze(r,e),r},Eo=e=>Ie.createTextNode(e??""),zo=()=>Ie.createDocumentFragment(),xn=(e,t)=>e.childNodes[t|0],le=Symbol("lustre"),Ze=(e,t="")=>{switch(e.nodeType){case Pn:case cn:e[le]={key:t,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case Fn:e[le]={key:t,debouncers:new Map};break}},Mi=(e,t)=>{if(t.nodeType===cn){for(t=t.firstChild;t;t=t.nextSibling)Mi(e,t);return}let n=t[le].key;n&&e[le].keyedChildren.set(n,new WeakRef(t))},So=(e,t)=>e[le].keyedChildren.get(t).deref(),Ao=e=>{let n=e.currentTarget[le].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),n(e)},ic=(e,t=[])=>{let n={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let r of t){let i=r.split(".");for(let s=0,o=e,l=n;s<i.length;s++){if(s===i.length-1){l[i[s]]=o[i[s]];break}l=l[i[s]]??={},o=o[i[s]]}}return n},Bo=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),sc=e=>({added(t,n){t[e]=n}}),Co={checked:Bo("checked"),selected:Bo("selected"),value:sc("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var No=e=>{let t=Mo(e);if(t===null||t.children instanceof b){let n=To();return Ze(n),e.appendChild(n),Io()}else{if(t.children instanceof be&&t.children.tail instanceof b)return t.children.head;{let n=To();return Ze(n),e.insertBefore(n,e.firstChild),wn(t.children)}}},To=()=>Ie.createTextNode(""),Mo=e=>{switch(e.nodeType){case Pn:{let t=e.getAttribute("data-lustre-key");Ze(e,t),t&&e.removeAttribute("data-lustre-key");let n=e.localName,r=e.namespaceURI,i=!r||r===Un;i&&oc.includes(n)&&lc(n,e);let s=uc(e),o=Oo(e),l=i?ue(n,s,o):Ii(r,n,s,o);return t?Rt(t,l):l}case Fn:return Ze(e),ir(e.data);case cn:return Ze(e),e.childNodes.length>0?wn(Oo(e)):null;default:return null}},oc=["input","select","textarea"],lc=(e,t)=>{let n=t.value,r=t.checked;e==="input"&&t.type==="checkbox"&&!r||e==="input"&&t.type==="radio"&&!r||t.type!=="checkbox"&&t.type!=="radio"&&!n||queueMicrotask(()=>{t.value=n,t.checked=r,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),Ie.activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},Oo=e=>{let t=C,n=e.lastChild;for(;n;){let r=Mo(n),i=n.previousSibling;r?t=new be(r,t):e.removeChild(n),n=i}return t},uc=e=>{let t=e.attributes.length,n=C;for(;t-- >0;)n=new be(cc(e.attributes[t]),n);return n},cc=e=>{let t=e.localName,n=e.value;return Ae(t,n)};var yn=()=>!!Ie;var qi=(e,t)=>e===t;var bn=class{constructor(t,[n,r],i,s){this.root=t,this.#e=n,this.#s=i,this.#u=s,this.#c=new rr(this.root,(o,l,u)=>{let[c,f]=sr(this.#o,l,u,o);this.#o=c,f.isOk()&&this.dispatch(f[0],!1)}),this.#n=No(this.root),this.#o=Li(),this.#i=!0,this.#a(r)}root=null;set offset(t){this.#c.offset=t}dispatch(t,n=!1){if(this.#i||=n,this.#p)this.#d.push(t);else{let[r,i]=this.#u(this.#e,t);this.#e=r,this.#a(i)}}emit(t,n){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0}))}#e;#s;#u;#n;#o;#c;#p=!1;#d=[];#t=C;#r=C;#f=null;#i=!1;#_={dispatch:(t,n)=>this.dispatch(t,n),emit:(t,n)=>this.emit(t,n),select:()=>{},root:()=>this.root};#a(t){for(this.#p=!0;;){for(let n=t.synchronous;n.tail;n=n.tail)n.head(this.#_);if(this.#t=Lo(this.#t,t.before_paint),this.#r=Lo(this.#r,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#u(this.#e,this.#d.shift())}this.#p=!1,this.#i?(cancelAnimationFrame(this.#f),this.#l()):this.#f||(this.#f=requestAnimationFrame(()=>{this.#l()}))}#l(){this.#i=!1,this.#f=null;let t=this.#s(this.#e),{patch:n,events:r}=Oi(this.#o,this.#n,t);if(this.#o=r,this.#n=t,this.#c.push(n),this.#t instanceof be){let i=qo(this.#t);this.#t=C,queueMicrotask(()=>{this.#i=!0,this.#a(i)})}if(this.#r instanceof be){let i=qo(this.#r);this.#r=C,requestAnimationFrame(()=>{this.#i=!0,this.#a(i)})}}};function qo(e){return{synchronous:e,after_paint:C,before_paint:C}}function Lo(e,t){return e instanceof b?t:t instanceof b?e:Ye(e,t)}var We=class extends _{constructor(t,n,r){super(),this.handlers=t,this.dispatched_paths=n,this.next_dispatched_paths=r}};function Li(){return new We($e(),C,C)}function vo(e){return new We(e.handlers,e.next_dispatched_paths,C)}function Fo(e,t,n){return si(e,ai(t,n))}function mn(e,t,n){let r=Fo(e.handlers,t,n),i=e;return new We(r,i.dispatched_paths,i.next_dispatched_paths)}function Do(e,t,n){return ge(n,e,(r,i)=>{if(i instanceof me){let s=i.name;return Fo(r,t,s)}else return r})}function sr(e,t,n,r){let i=d(t,e.next_dispatched_paths),s,o=e;s=new We(o.handlers,o.dispatched_paths,i);let l=s,u=Pt(l.handlers,t+fi+n);if(u instanceof v){let c=u[0];return[l,xt(r,c)]}else return[l,new B(a([]))]}function er(e,t){return ao(t,e.dispatched_paths)}function Ro(e,t,n,r,i){return ut(e,ai(n,r),An(i,t))}function $n(e,t,n,r,i){let s=Ro(e.handlers,t,n,r,i),o=e;return new We(s,o.dispatched_paths,o.next_dispatched_paths)}function Uo(e,t,n,r){return ge(r,e,(i,s)=>{if(s instanceof me){let o=s.name,l=s.handler;return Ro(i,t,n,o,l)}else return i})}function at(e,t){let n=qi(e,ae);return qi(t,ae)?e:n?t:i=>e(t(i))}function Po(e,t,n,r){for(;;){let i=e,s=t,o=n,l=r;if(l instanceof b)return i;{let u=l.head,c=l.tail;e=Go(i,s,o,u),t=s,n=o+K(u),r=c}}}function Go(e,t,n,r){if(r instanceof de){let i=r.children;return Po(e,t,n+1,i)}else if(r instanceof Be){let i=r.attributes,s=r.children,o=ct(t,n,r.key),u=Do(e,o,i);return Po(u,o,0,s)}else{if(r instanceof Ce)return e;{let i=r.attributes,s=ct(t,n,r.key);return Do(e,s,i)}}}function Ke(e,t,n,r){let i=Go(e.handlers,t,n,r),s=e;return new We(i,s.dispatched_paths,s.next_dispatched_paths)}function Di(e,t,n,r,i){for(;;){let s=e,o=t,l=n,u=r,c=i;if(c instanceof b)return s;{let f=c.head,p=c.tail;e=Wo(s,o,l,u,f),t=o,n=l,r=u+K(f),i=p}}}function Wo(e,t,n,r,i){if(i instanceof de){let s=i.children,o=at(t,i.mapper),l=r+1;return Di(e,o,n,l,s)}else if(i instanceof Be){let s=i.attributes,o=i.children,l=ct(n,r,i.key),u=at(t,i.mapper),f=Uo(e,u,l,s);return Di(f,u,l,0,o)}else{if(i instanceof Ce)return e;{let s=i.attributes,o=ct(n,r,i.key),l=at(t,i.mapper);return Uo(e,l,o,s)}}}function ft(e,t,n,r,i){let s=Wo(e.handlers,t,n,r,i),o=e;return new We(s,o.dispatched_paths,o.next_dispatched_paths)}function ko(e,t,n,r,i){let s=Di(e.handlers,t,n,r,i),o=e;return new We(s,o.dispatched_paths,o.next_dispatched_paths)}function ue(e,t,n){return dn("",ae,"",e,t,n,$e(),!1,!1)}function Ii(e,t,n,r){return dn("",ae,e,t,n,r,$e(),!1,!1)}function ir(e){return $i("",ae,e)}function Io(){return $i("",ae,"")}function fc(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let i=n.head;if(i instanceof de){let s=n.tail,o=i.children_count;e=s,t=r+o}else e=n.tail,t=r+1}}}function wn(e){return di("",ae,e,$e(),fc(e,0))}function xe(e){return ir(e)}function Vo(e,t){return ue("footer",e,t)}function Jo(e,t){return ue("header",e,t)}function Yo(e,t){return ue("h1",e,t)}function Xo(e,t){return ue("section",e,t)}function Ko(e,t){return ue("div",e,t)}function Ui(e,t){return ue("li",e,t)}function Qo(e,t){return ue("ul",e,t)}function Zo(e,t){return ue("a",e,t)}function el(e,t){return ue("span",e,t)}function tl(e,t){return ue("strong",e,t)}function Pi(e,t){return ue("button",e,t)}function gn(e){return ue("input",e,C)}function Fi(e,t){return ue("label",e,t)}var Et=class extends _{constructor(t){super(),this.message=t}},Ht=class extends _{constructor(t,n){super(),this.name=t,this.data=n}};var zt=class extends _{};var Ri=class extends _{constructor(t,n,r,i,s,o,l,u){super(),this.open_shadow_root=t,this.adopt_styles=n,this.attributes=r,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=l,this.on_form_restore=u}};function il(e){let t=new Ri(!1,!0,Dn(),Dn(),!1,Rn,Rn,Rn);return ge(e,t,(n,r)=>r.apply(n))}var Gi=class e{static start({init:t,update:n,view:r},i,s){if(!yn())return new B(new Vt);let o=i instanceof HTMLElement?i:Ie.querySelector(i);return o?new v(new e(o,t(s),n,r)):new B(new or(i))}#e;constructor(t,[n,r],i,s){this.#e=new bn(t,[n,r],s,i)}send(t){switch(t.constructor){case Et:{this.dispatch(t.message,!1);break}case Ht:{this.emit(t.name,t.data);break}case zt:break}}dispatch(t,n){this.#e.dispatch(t,n)}emit(t,n){this.#e.emit(t,n)}},sl=Gi.start;var Wi=class extends _{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.config=i}};var or=class extends _{constructor(t){super(),this.selector=t}},Vt=class extends _{};function ol(e,t,n){return new Wi(e,t,n,il(C))}function ll(e,t,n){return jn(!yn(),new B(new Vt),()=>sl(e,t,n))}function hc(e){let t=[$e(),C,0],n=ge(e,t,(o,l)=>{let u=o[0],c=o[1],f=o[2],p=l[0],$=l[1],w=Rt(p,$),x;return p===""?x=u:x=ut(u,p,w),[x,d(w,c),f+1]}),r=n[0],i=n[1],s=n[2];return[r,V(i),s]}function xc(e,t,n){let r=hc(n),i=r[0],s=r[1];return dn("",ae,"",e,t,s,i,!1,!1)}function ul(e,t){return xc("ul",e,t)}function bc(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function St(e,t){return Zs(e,t,C,!1,!1,bc(e),new Ut(0))}function lr(e){return St("click",Xe(e))}function cl(e){return St("input",Nt(a(["target","value"]),Ot,t=>Xe(e(t))))}function Hi(e){return St("change",Nt(a(["target","checked"]),zs,t=>Xe(e(t))))}function fl(e){return St("blur",Xe(e))}var al=e=>{let t=document.getElementById(e);t&&(t.value="")};var he=class extends _{constructor(t,n,r,i,s){super(),this.entries=t,this.active=n,this.completed=r,this.uid=i,this.visibility=s}},He=class extends _{constructor(t,n,r,i,s){super(),this.description=t,this.completed=n,this.editing=r,this.deleted=i,this.id=s}},vn=class extends _{},kn=class extends _{},ur=class extends _{},cr=class extends _{constructor(t){super(),this.value=t}},fr=class extends _{},ar=class extends _{constructor(t){super(),this.completed=t}},pr=class extends _{constructor(t){super(),this.visibility=t}},dr=class extends _{constructor(t){super(),this.index=t}},_r=class extends _{constructor(t,n){super(),this.index=t,this.completed=n}},Jt=class extends _{constructor(t,n){super(),this.index=t,this.editing=n}},Ji=class extends _{constructor(t,n){super(),this.index=t,this.description=n}};function gc(e,t){return new He(e,!1,!1,!1,t)}function vc(e){return[new he(Ms(),0,0,0,new vn),pe()]}function kc(e){let t;e===1?t="item":t="items";let n=t;return el(a([oe("todo-count")]),a([tl(a([]),a([xe(ve(e))])),xe(" "),xe(n),xe(" left")]))}function Vi(e,t,n){return Ui(a([lr(new pr(t))]),a([Zo(a([io(e),ti(a([["selected",R(t,n)]]))]),a([t instanceof vn?xe("All"):t instanceof kn?xe("Active"):xe("Completed")]))]))}function jc(e){return Qo(a([oe("filters")]),a([Vi("#/",new vn,e),Vi("#/active",new kn,e),Vi("#/completed",new ur,e)]))}function Yi(e){return e?ro("display","none"):to()}function Ec(e){return Pi(a([oe("clear-completed"),Yi(e===0),lr(new fr)]),a([xe("Clear completed ("),xe(ve(e)),xe(")")]))}function pl(e){return St("keydown",Cn("keyCode",Bn,t=>Nt(a(["target","value"]),Ot,n=>t===13?Xe(e(n)):Or(e(n),"not enter"))))}function zc(){return Jo(a([oe("header")]),a([Yo(a([]),a([xe("todos")])),gn(a([ni("new-todo"),oe("new-todo"),oo("What needs to be done?"),ei(!0),pl(e=>new cr(e))]))]))}function Sc(e){return St("dblclick",Xe(e))}function Ac(e){let t=e.description,n=e.completed,r=e.editing,i=e.id;return Ui(a([ti(a([["completed",n],["editing",r]]))]),a([e.editing?gn(a([oe("edit"),lo(t),ei(!0),cl(o=>new Ji(i,o)),fl(new Jt(i,!1)),pl(o=>new Jt(i,!1))])):Ko(a([oe("view")]),a([gn(a([oe("toggle"),ii("checkbox"),ri(n),Hi(o=>new _r(i,o))])),Fi(a([Sc(new Jt(i,!0))]),a([xe(t)])),Pi(a([oe("destroy"),lr(new dr(i))]),a([]))]))]))}function Bc(e){let t=e.active+e.completed;return Xo(a([oe("main"),Yi(t<=0)]),a([gn(a([ni("toggle-all"),oe("toggle-all"),ii("checkbox"),ri(e.active<=0),Hi(n=>new ar(n))])),Fi(a([so("toggle-all")]),a([xe("Mark all as complete")])),ul(a([oe("todo-list")]),qs(e.entries,a([]),(n,r)=>{let i,s=e.visibility;return s instanceof kn?i=!r.completed&&!r.deleted:s instanceof ur?i=r.completed&&!r.deleted:i=!r.deleted,i?d([ve(r.id),Ac(r)],n):n}))]))}function Cc(e){let t=e.active+e.completed;return wn(a([zc(),Bc(e),Vo(a([oe("footer"),Yi(t<=0)]),a([kc(e.active),jc(e.visibility),Ec(e.completed)]))]))}function Tc(e){return co(t=>al(e))}function Oc(e,t){if(t instanceof cr){let n=t.value,r=Cr(n);return jn(r==="",[e,pe()],()=>{let i=Is(e.entries,gc(r,e.uid)),s=e.uid+1,o=e.active+1,l,u=e;return l=new he(i,o,u.completed,s,u.visibility),[l,Tc("new-todo")]})}else if(t instanceof fr){let n=Fr(e.entries,r=>{if(r.completed){let s=r;return new He(s.description,s.completed,s.editing,!0,s.id)}else return r});return[(()=>{let r=e;return new he(n,r.active,0,r.uid,r.visibility)})(),pe()]}else if(t instanceof ar){let n=t.completed,r=Fr(e.entries,l=>{let u=l;return new He(u.description,n,u.editing,u.deleted,u.id)}),i=e.completed+e.active,s;if(n){let l=e;s=new he(r,0,i,l.uid,l.visibility)}else{let l=e;s=new he(r,i,0,l.uid,l.visibility)}return[s,pe()]}else if(t instanceof pr){let n=t.visibility;return[(()=>{let r=e;return new he(r.entries,r.active,r.completed,r.uid,n)})(),pe()]}else if(t instanceof dr){let n=t.index,r=Ur(e.entries,n);if(r instanceof v){let i=r[0];if(i.deleted)return[e,pe()];{let s=Pr(e.entries,n,(()=>{let c=i;return new He(c.description,c.completed,c.editing,!0,c.id)})()),o;if(i.completed){let c=e;o=new he(s,c.active,e.completed-1,c.uid,c.visibility)}else{let c=e;o=new he(s,e.active-1,c.completed,c.uid,c.visibility)}return[o,pe()]}}else return[e,pe()]}else if(t instanceof _r){let n=t.index,r=t.completed,i=Ur(e.entries,n);if(i instanceof v){let s=i[0];if(s.completed!==r){let o=Pr(e.entries,n,(()=>{let c=s;return new He(c.description,r,c.editing,c.deleted,c.id)})()),l;if(r){let c=e.active-1,f=e.completed+1,p=e;l=new he(o,c,f,p.uid,p.visibility)}else{let c=e.active+1,f=e.completed-1,p=e;l=new he(o,c,f,p.uid,p.visibility)}return[l,pe()]}else return[e,pe()]}else return[e,pe()]}else if(t instanceof Jt)if(t.editing){let r=t.index,i=sn(e.entries,r,s=>{let o=s;return new He(o.description,o.completed,!0,o.deleted,o.id)});return[(()=>{let s=e;return new he(i,s.active,s.completed,s.uid,s.visibility)})(),pe()]}else{let r=t.index,i=sn(e.entries,r,s=>{let o=Cr(s.description),l=s;return new He(o,l.completed,!1,l.deleted,l.id)});return[(()=>{let s=e;return new he(i,s.active,s.completed,s.uid,s.visibility)})(),pe()]}else{let n=t.index,r=t.description,i=sn(e.entries,n,s=>{let o=s;return new He(r,o.completed,o.editing,o.deleted,o.id)});return[(()=>{let s=e;return new he(i,s.active,s.completed,s.uid,s.visibility)})(),pe()]}}function dl(){let e=ol(vc,Oc,Cc),t=ll(e,".todoapp",void 0);if(!(t instanceof v))throw En("let_assert","todomvc",16,"main","Pattern match failed, no pattern matched the value.",{value:t})}dl();
